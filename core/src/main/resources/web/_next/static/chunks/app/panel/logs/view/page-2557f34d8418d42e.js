(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4285],{10255:(e,t,n)=>{"use strict";function r(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}}),n(95155),n(47650),n(85744),n(20589)},13052:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},17828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,n(64054).createAsyncLocalStorage)()},24232:(e,t,n)=>{"use strict";n.d(t,{SubPage:()=>h});var r=n(95155),a=n(12115),l=n(13052),o=n(53999);function s(e){let{...t}=e;return(0,r.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function i(e){let{className:t,...n}=e;return(0,r.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,o.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...n})}function c(e){let{className:t,...n}=e;return(0,r.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,o.cn)("inline-flex items-center gap-1.5",t),...n})}function u(e){let{className:t,...n}=e;return(0,r.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,o.cn)("text-foreground font-normal",t),...n})}function d(e){let{children:t,className:n,...a}=e;return(0,r.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,o.cn)("[&>svg]:size-3.5",n),...a,children:null!=t?t:(0,r.jsx)(l.A,{})})}var m=n(76037),f=n(20193);function h(e){let{children:t,title:n,subTitle:l,icon:h,outerClassName:p,className:g,...y}=e;return(0,a.useEffect)(()=>{document.title="OPanel - ".concat(null!=l?l:n)},[n,l]),(0,r.jsxs)("div",{className:(0,o.cn)("group px-16 max-md:px-12 max-sm:px-8 flex-1 flex flex-col gap-6 max-md:gap-2",p),children:[(0,r.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(f.x2,{className:"cursor-pointer"}),(0,r.jsx)(m.w,{orientation:"vertical"}),(0,r.jsx)(s,{children:(0,r.jsxs)(i,{children:[(0,r.jsx)(c,{children:"OPanel"}),(0,r.jsx)(d,{}),l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{children:n}),(0,r.jsx)(d,{})]}),(0,r.jsx)(c,{children:(0,r.jsx)(u,{children:null!=l?l:n})})]})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5",children:[h,(0,r.jsx)("h1",{className:"text-3xl font-bold",children:null!=l?l:n})]})]}),(0,r.jsx)("div",{className:(0,o.cn)(g,"pb-14"),...y,children:t})]})}},31886:(e,t,n)=>{"use strict";n.d(t,{Kf:()=>i,QM:()=>m,nl:()=>d,ow:()=>u,qV:()=>c,y0:()=>o,yq:()=>s});var r=n(23464),a=n(16453),l=n(56671);let o="",s=globalThis.window?"".concat("http:"===window.location.protocol?"ws":"wss","://").concat(window.location.host):"ws://localhost:3000";function i(e,t,n){if(401===e.status&&"/login"!==window.location.pathname){(0,a.deleteCookie)("token"),window.location.href="/login";return}for(let[r,a]of n)if(e.status===r)return void l.oR.error(t,{description:a});l.oR.error(t,{description:e.message})}async function c(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(await r.A.request({method:"get",url:o+e,withCredentials:t})).data}async function u(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=t?JSON.stringify(t):"";return(await r.A.request({method:"post",maxBodyLength:1/0,url:o+e,withCredentials:n,headers:{"Content-Type":"text/plain"},data:a})).data}async function d(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=t?JSON.stringify(t):"";return(await r.A.request({method:"delete",maxBodyLength:1/0,url:o+e,withCredentials:n,headers:{"Content-Type":"text/plain"},data:a})).data}async function m(e,t,n){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],l=new FormData;return l.append("file",t),(await r.A.request({method:"post",url:o+e,withCredentials:a,headers:{"Content-Type":"multipart/form-data"},data:l,onUploadProgress:e=>{var t;return n&&n(null!=(t=e.progress)?t:0)}})).data}},32007:(e,t,n)=>{"use strict";n.d(t,{S:()=>o,f:()=>l});var r=n(56671),a=n(31886);async function l(e){window.open("".concat(a.y0,"/api/logs/").concat(e,"/download"),"_blank")}async function o(e){try{await (0,a.nl)("/api/logs/".concat(e)),r.oR.success("删除成功")}catch(e){(0,a.Kf)(e,"无法删除日志",[[400,"请求参数错误"],[401,"未登录"],[403,"当前日志不可删除"],[404,"找不到该日志"]])}}},35695:(e,t,n)=>{"use strict";var r=n(18999);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},36645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=n(88229)._(n(67357));function a(e,t){var n;let a={};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,r.default)({...l,modules:null==(n=l.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51362:(e,t,n)=>{"use strict";n.d(t,{D:()=>c,N:()=>u});var r=n(12115),a=(e,t,n,r,a,l,o,s)=>{let i=document.documentElement,c=["light","dark"];function u(t){var n;(Array.isArray(e)?e:[e]).forEach(e=>{let n="class"===e,r=n&&l?a.map(e=>l[e]||e):a;n?(i.classList.remove(...r),i.classList.add(l&&l[t]?l[t]:t)):i.setAttribute(e,t)}),n=t,s&&c.includes(n)&&(i.style.colorScheme=n)}if(r)u(r);else try{let e=localStorage.getItem(t)||n,r=o&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(r)}catch(e){}},l=["light","dark"],o="(prefers-color-scheme: dark)",s=r.createContext(void 0),i={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=r.useContext(s))?e:i},u=e=>r.useContext(s)?r.createElement(r.Fragment,null,e.children):r.createElement(m,{...e}),d=["light","dark"],m=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:a=!0,enableColorScheme:i=!0,storageKey:c="theme",themes:u=d,defaultTheme:m=a?"system":"light",attribute:y="data-theme",value:b,children:v,nonce:x,scriptProps:w}=e,[j,S]=r.useState(()=>h(c,m)),[k,A]=r.useState(()=>"system"===j?g():j),P=b?Object.values(b):u,O=r.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=g());let r=b?b[t]:t,o=n?p(x):null,s=document.documentElement,c=e=>{"class"===e?(s.classList.remove(...P),r&&s.classList.add(r)):e.startsWith("data-")&&(r?s.setAttribute(e,r):s.removeAttribute(e))};if(Array.isArray(y)?y.forEach(c):c(y),i){let e=l.includes(m)?m:null,n=l.includes(t)?t:e;s.style.colorScheme=n}null==o||o()},[x]),C=r.useCallback(e=>{let t="function"==typeof e?e(j):e;S(t);try{localStorage.setItem(c,t)}catch(e){}},[j]),_=r.useCallback(e=>{A(g(e)),"system"===j&&a&&!t&&O("system")},[j,t]);r.useEffect(()=>{let e=window.matchMedia(o);return e.addListener(_),_(e),()=>e.removeListener(_)},[_]),r.useEffect(()=>{let e=e=>{e.key===c&&(e.newValue?S(e.newValue):C(m))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[C]),r.useEffect(()=>{O(null!=t?t:j)},[t,j]);let N=r.useMemo(()=>({theme:j,setTheme:C,forcedTheme:t,resolvedTheme:"system"===j?k:j,themes:a?[...u,"system"]:u,systemTheme:a?k:void 0}),[j,C,t,k,a,u]);return r.createElement(s.Provider,{value:N},r.createElement(f,{forcedTheme:t,storageKey:c,attribute:y,enableSystem:a,enableColorScheme:i,defaultTheme:m,value:b,themes:u,nonce:x,scriptProps:w}),v)},f=r.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:l,enableSystem:o,enableColorScheme:s,defaultTheme:i,value:c,themes:u,nonce:d,scriptProps:m}=e,f=JSON.stringify([l,n,i,t,u,c,o,s]).slice(1,-1);return r.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(a.toString(),")(").concat(f,")")}})}),h=(e,t)=>{let n;try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t},p=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},g=e=>(e||(e=window.matchMedia(o)),e.matches?"dark":"light")},52815:(e,t,n)=>{"use strict";n.d(t,{FN:()=>s,Tx:()=>d,kz:()=>u,mt:()=>c});var r=n(23291);let a="opanel.settings";function l(){if(window.localStorage)return window.localStorage;throw Error("localStorage is not defined.")}let o={"dashboard.monitor-interval":2e3,"players.avatar-provider":r.zh.CRAFATAR,"players.skin-provider":r.HT.CRAFATAR,"players.cape-provider":r.FP.CRAFATAR,"terminal.autocomplete":!0,"terminal.word-wrap":!1,"terminal.font-size":12,"terminal.max-log-lines":1e3,"terminal.log-level":"INFO","terminal.log-time":!0,"terminal.thread-name":!0,"terminal.source-name":!0,"terminal.convert-ansi-code":!0,"code-of-conduct.auto-saving-interval":2e3,"monaco.word-wrap":!1,"monaco.font-size":14,"state.players.tab":"player-list","state.terminal.history":[],"state.code-of-conduct.current-editing":void 0},s={wordWrap:c("monaco.word-wrap")?"on":"off",fontSize:c("monaco.font-size"),unicodeHighlight:{ambiguousCharacters:!1}};function i(){let e;try{e=l()}catch(e){return o}let t=e.getItem(a);if(!t)return d(),o;let n=JSON.parse(null!=t?t:"{}");for(let e in o)void 0===n[e]&&(n[e]=o[e]);return e.setItem(a,JSON.stringify(n)),n}function c(e){return i()[e]}function u(e,t){let n=i();n[e]=t,l().setItem(a,JSON.stringify(n))}function d(){l().setItem(a,JSON.stringify(o))}},55028:(e,t,n)=>{"use strict";n.d(t,{default:()=>a.a});var r=n(36645),a=n.n(r)},62146:(e,t,n)=>{"use strict";function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(45262)},62525:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return s}});let n=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return a?new a:new r}function o(e){return a?a.bind(e):r.bind(e)}function s(){return a?a.snapshot():function(e,...t){return e(...t)}}},67357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=n(95155),a=n(12115),l=n(62146);function o(e){return{default:e&&"default"in e?e.default:e}}n(10255);let s={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},i=function(e){let t={...s,...e},n=(0,a.lazy)(()=>t.loader().then(o)),i=t.loading;function c(e){let o=i?(0,r.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,c=s?a.Suspense:a.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(c,{...s?{fallback:o}:{},children:u})}return c.displayName="LoadableComponent",c}},69506:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r=n(95155),a=n(55028),l=n(12115),o=n(91788),s=n(62525),i=n(35695),c=n(51362),u=n(24232),d=n(31886),m=n(97168),f=n(32007),h=n(52815);let p=(0,a.default)(()=>Promise.all([n.e(4654),n.e(1376),n.e(6859),n.e(8638),n.e(4695),n.e(2674),n.e(1752)]).then(n.bind(n,11752)),{loadableGenerated:{webpack:()=>[11752]},ssr:!1});function g(){let e=(0,i.useSearchParams)(),{push:t}=(0,i.useRouter)(),[n,a]=(0,l.useState)(""),{theme:g}=(0,c.D)(),y=(0,l.useRef)(null),b=e.get("log"),v=(0,l.useCallback)(async()=>{if(!b)return void t("/panel/logs");try{let e=await (0,d.qV)("/api/logs/".concat(b));a(e)}catch(e){(0,d.Kf)(e,"无法获取日志内容",[[400,"请求参数错误"],[401,"未登录"],[404,"找不到该日志"],[500,"服务器内部错误"]])}},[b,t]);return(0,l.useEffect)(()=>{y.current&&y.current.setValue(n)},[n]),(0,l.useEffect)(()=>{v()},[v]),(0,r.jsxs)(u.SubPage,{title:"日志",subTitle:null!=b?b:"",children:[(0,r.jsxs)("div",{className:"mb-3 flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["文件类型：",(null==b?void 0:b.endsWith(".log.gz"))?"gzip (已解压)":"log"]}),(0,r.jsxs)("div",{className:"[&>*]:cursor-pointer",children:[(0,r.jsx)(m.$,{variant:"ghost",size:"icon",title:"下载日志",onClick:()=>(0,f.f)(null!=b?b:""),children:(0,r.jsx)(o.A,{})}),(0,r.jsx)(m.$,{variant:"ghost",size:"icon",title:"删除日志",disabled:null==b?void 0:b.endsWith(".log"),onClick:async()=>{await (0,f.S)(null!=b?b:""),t("/panel/logs")},children:(0,r.jsx)(s.A,{})})]})]}),(0,r.jsx)(p,{height:"550px",defaultLanguage:"server-log",defaultValue:n,theme:"dark"===g?"server-log-theme-dark":"server-log-theme",options:{readOnly:!0,readOnlyMessage:{value:"日志不可编辑"},...h.FN},onMount:e=>y.current=e})]})}},79701:(e,t,n)=>{Promise.resolve().then(n.bind(n,69506))},85744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=n(17828)},91788:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{e.O(0,[2048,9641,7516,5100,5452,6671,3207,3464,193,8441,5964,7358],()=>e(e.s=79701)),_N_E=e.O()}]);