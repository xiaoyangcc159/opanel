"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5096],{14396:(e,t,a)=>{a.d(t,{h:()=>r});var o=a(12115);function r(e){let[t,a]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let t=new e;return a(t),()=>t.close()},[e]),t}},16103:(e,t,a)=>{a.d(t,{B6:()=>c,CB:()=>g,EW:()=>f,HQ:()=>l,Hy:()=>i,Q4:()=>h,_L:()=>d,lE:()=>m,wx:()=>p,zf:()=>u});var o=a(56671),r=a(31886),s=a(53999),n=a(80154);async function i(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,r.ow)("/api/players/op?uuid=".concat(e)),t&&o.oR.success((0,n.$)("players.action.op.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.op.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[404,(0,n.$)("players.action.op.error.404")]])}}async function c(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,r.ow)("/api/players/deop?uuid=".concat(e)),t&&o.oR.success((0,n.$)("players.action.deop.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.deop.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[404,(0,n.$)("players.action.deop.error.404")]])}}async function l(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,r.ow)("/api/players/kick?uuid=".concat(e,"&r=").concat(t?(0,s.q3)(t):"")),a&&o.oR.success((0,n.$)("players.action.kick.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.kick.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[403,(0,n.$)("players.action.kick.error.403")],[404,(0,n.$)("players.action.kick.error.404")]])}}async function d(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,r.ow)("/api/players/ban?uuid=".concat(e,"&r=").concat(t?(0,s.q3)(t):"")),a&&o.oR.success((0,n.$)("players.action.ban.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.ban.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[404,(0,n.$)("players.action.ban.error.404")]])}}async function u(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,r.ow)("/api/players/pardon?uuid=".concat(e)),t&&o.oR.success((0,n.$)("players.action.pardon.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.pardon.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[404,(0,n.$)("players.action.pardon.error.404")]])}}async function h(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,r.ow)("/api/players/gamemode?uuid=".concat(e,"&gm=").concat(t)),a&&o.oR.success((0,n.$)("players.action.set-gamemode.success",(0,s.Cq)(t)))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.set-gamemode.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[404,(0,n.$)("players.action.set-gamemode.error.404")]])}}async function p(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,r.nl)("/api/players?uuid=".concat(e)),t&&o.oR.success((0,n.$)("players.action.remove.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.remove.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[404,(0,n.$)("players.action.remove.error.404")],[500,(0,n.$)("common.error.500")]])}}async function m(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,r.ow)("/api/whitelist/".concat(e?"enable":"disable")),t&&o.oR.success(e?(0,n.$)("players.enable-whitelist.success"):(0,n.$)("players.disable-whitelist.success"))}catch(t){(0,r.Kf)(t,e?(0,n.$)("players.enable-whitelist.error"):(0,n.$)("players.disable-whitelist.error"),[[401,"未登录"],[500,"服务器内部错误"]])}}async function f(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,r.ow)("/api/whitelist/add?name=".concat(e,"&uuid=").concat(t)),a&&o.oR.success((0,n.$)("players.action.add-to-whitelist.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.add-to-whitelist.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[500,(0,n.$)("common.error.500")]])}}async function g(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,r.ow)("/api/whitelist/remove?name=".concat(e,"&uuid=").concat(t)),a&&o.oR.success((0,n.$)("players.action.remove-from-whitelist.success"))}catch(e){(0,r.Kf)(e,(0,n.$)("players.action.remove-from-whitelist.error"),[[400,(0,n.$)("common.error.400")],[401,(0,n.$)("common.error.401")],[500,(0,n.$)("common.error.500")]])}}},18639:(e,t,a)=>{a.d(t,{r:()=>i});var o=a(16453),r=a(56671),s=a(31886),n=a(80154);class i{init(){this.socket&&(this.socket.addEventListener("open",()=>{this.send("auth",(0,o.getCookie)("token"))}),this.subscribe("connect",()=>{this.onOpen(),this.send("ping",null)}),this.subscribe("pong",()=>{this.heartbeatTimer=setTimeout(()=>{this.send("ping",null)},29e3)}),this.subscribe("error",e=>{this.onError(e)}),this.socket.addEventListener("error",e=>{this.onError(e),r.oR.error((0,n.$)("terminal.ws.error"))}),this.socket.addEventListener("close",()=>{this.onClose()}))}subscribe(e,t){if(!this.socket)throw Error("WebSocket not initialized.");this.socket.addEventListener("message",a=>{let o=JSON.parse(a.data);o.type===e&&t(o.data)})}send(e,t){if(!this.socket)throw Error("WebSocket not initialized.");this.socket.send(JSON.stringify({type:e,data:t}))}close(){this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.socket&&(this.socket.close(),this.socket=null)}constructor(e){this.socket=null,this.heartbeatTimer=null,(0,o.hasCookie)("token")||(window.location.href="/login");let t=new URL(s.yq);t.pathname=e,this.socket=new WebSocket(t),this.init()}}},34685:(e,t,a)=>{a.d(t,{y:()=>n});var o=a(56671),r=a(18639),s=a(80154);class n extends r.r{onOpen(){console.log("Player list connected.")}onClose(){console.log("Player list disconnected.")}onError(e){console.log("Player list connection failed. ",e),o.oR.error((0,s.$)("players.ws.error"))}constructor(){super("/socket/players")}}},86801:(e,t,a)=>{a.d(t,{T:()=>g});var o=a(95155),r=a(55028),s=a(12115),n=a(51362),i=a(56671),c=a(41085),l=a(97168),d=a(31886),u=a(16103),h=a(52815),p=a(80154),m=a(6937);let f=(0,r.default)(()=>Promise.all([a.e(4654),a.e(1376),a.e(6859),a.e(8638),a.e(4695),a.e(2674),a.e(1752)]).then(a.bind(a,11752)),{loadableGenerated:{webpack:()=>[11752]},ssr:!1});function g(e){let{onDisableWhitelist:t,children:a,asChild:r}=e,[g,b]=(0,s.useState)(""),{theme:y}=(0,n.D)(),x=async()=>{try{let e=await (0,d.qV)("/api/whitelist");b(JSON.stringify(e.whitelist,void 0,2))}catch(e){(0,d.Kf)(e,"无法获取白名单",[[401,"未登录"],[500,"服务器内部错误"]])}},w=async()=>{try{await (0,d.ow)("/api/whitelist/write",JSON.parse(g)),i.oR.success("保存成功")}catch(e){(0,d.Kf)(e,"无法保存白名单",[[401,"未登录"],[500,"服务器内部错误"]])}};return(0,o.jsxs)(c.cj,{onOpenChange:e=>e&&x(),children:[(0,o.jsx)(c.CG,{asChild:r,children:a}),(0,o.jsxs)(c.h,{children:[(0,o.jsxs)(c.Fm,{children:[(0,o.jsx)(c.qp,{children:(0,p.$)("players.edit-whitelist.title")}),(0,o.jsx)(c.Qs,{children:(0,o.jsx)(m.E,{id:"players.edit-whitelist.description",args:[(0,o.jsx)("code",{children:"whitelist.json"},0)]})})]}),(0,o.jsx)("div",{className:"flex flex-col h-full",children:g&&(0,o.jsx)(f,{defaultLanguage:"json",value:g,theme:"dark"===y?"vs-dark":"vs",options:{minimap:{enabled:!1},automaticLayout:!0,tabSize:2,...h.FN},onChange:e=>b(null!=e?e:"")})}),(0,o.jsxs)(c.XW,{children:[(0,o.jsx)(l.$,{variant:"destructive",className:"cursor-pointer",onClick:async()=>{await (0,u.lE)(!1),t&&t()},children:(0,p.$)("players.disable-whitelist")}),(0,o.jsx)(c.kN,{asChild:!0,children:(0,o.jsx)(l.$,{className:"cursor-pointer",onClick:()=>w(),children:(0,p.$)("dialog.save")})})]})]})]})}},88524:(e,t,a)=>{a.d(t,{A0:()=>n,BF:()=>i,Hj:()=>c,XI:()=>s,nA:()=>d,nd:()=>l});var o=a(95155);a(12115);var r=a(53999);function s(e){let{className:t,...a}=e;return(0,o.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,o.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",t),...a})})}function n(e){let{className:t,...a}=e;return(0,o.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",t),...a})}function i(e){let{className:t,...a}=e;return(0,o.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",t),...a})}function c(e){let{className:t,...a}=e;return(0,o.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function l(e){let{className:t,...a}=e;return(0,o.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,o.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},90088:(e,t,a)=>{a.d(t,{d:()=>n});var o=a(95155);a(12115);var r=a(4884),s=a(53999);function n(e){let{className:t,...a}=e;return(0,o.jsx)(r.bL,{"data-slot":"switch",className:(0,s.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,o.jsx)(r.zi,{"data-slot":"switch-thumb",className:(0,s.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},99474:(e,t,a)=>{a.d(t,{T:()=>s});var o=a(95155);a(12115);var r=a(53999);function s(e){let{className:t,...a}=e;return(0,o.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}},99840:(e,t,a)=>{a.d(t,{Cf:()=>h,Es:()=>m,HM:()=>d,L3:()=>f,c7:()=>p,lG:()=>i,rr:()=>g,zM:()=>c});var o=a(95155);a(12115);var r=a(15452),s=a(54416),n=a(53999);function i(e){let{...t}=e;return(0,o.jsx)(r.bL,{"data-slot":"dialog",...t})}function c(e){let{...t}=e;return(0,o.jsx)(r.l9,{"data-slot":"dialog-trigger",...t})}function l(e){let{...t}=e;return(0,o.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{...t}=e;return(0,o.jsx)(r.bm,{"data-slot":"dialog-close",...t})}function u(e){let{className:t,...a}=e;return(0,o.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function h(e){let{className:t,children:a,showCloseButton:i=!0,...c}=e;return(0,o.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,o.jsx)(u,{}),(0,o.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...c,children:[a,i&&(0,o.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,o.jsx)(s.A,{}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function p(e){let{className:t,...a}=e;return(0,o.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function m(e){let{className:t,...a}=e;return(0,o.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function f(e){let{className:t,...a}=e;return(0,o.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...a})}function g(e){let{className:t,...a}=e;return(0,o.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}}}]);