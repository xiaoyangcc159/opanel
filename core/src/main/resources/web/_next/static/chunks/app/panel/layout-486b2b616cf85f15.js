(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5060],{381:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1392:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("pencil-ruler",[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},4648:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},17580:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},19299:(e,t,a)=>{"use strict";a.d(t,{CS:()=>l,se:()=>r,w3:()=>i});var s=a(12115);function n(){let e=s.createContext(void 0);return e.displayName="APIContext",e}let r=n(),l=n(),i=s.createContext(void 0);i.displayName="APIContext"},19538:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var s=a(95155),n=a(12115),r=a(35695),l=a(16453),i=a(6874),o=a.n(i),c=a(99548),d=a(98611),h=a(4648),u=a(17580),p=a(1392),m=a(19946);let k=(0,m.A)("blocks",[["path",{d:"M10 22V7a1 1 0 0 0-1-1H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a1 1 0 0 0-1-1H2",key:"1ah6g2"}],["rect",{x:"14",y:"2",width:"8",height:"8",rx:"1",key:"88lufb"}]]);var y=a(62978),A=a(23323),x=a(55548),g=a(381),f=a(81284),j=a(58071);let v=(0,m.A)("square-arrow-out-up-right",[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6",key:"y09zxi"}],["path",{d:"m21 3-9 9",key:"mpx6sq"}],["path",{d:"M15 3h6v6",key:"1q9fwt"}]]),w=(0,m.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var C=a(20193),M=a(97168),b=a(51362);let N=(0,m.A)("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),z=(0,m.A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function T(){let[e,t]=(0,n.useState)(!1),{theme:a,setTheme:r}=(0,b.D)();return((0,n.useEffect)(()=>{t(!0)},[]),e)?(0,s.jsx)(M.$,{variant:"ghost",size:"icon",className:"cursor-pointer group-data-[state=collapsed]:size-8",onClick:()=>void("dark"===a?r("light"):r("dark")),children:"dark"===a?(0,s.jsx)(N,{}):(0,s.jsx)(z,{})}):null}var q=a(53999),E=a(21509),V=a.n(E),H=a(69861),D=a(19299);let S=[{name:"仪表盘",url:"/panel/dashboard",icon:d.A},{name:"存档",url:"/panel/saves",icon:h.A},{name:"玩家",url:"/panel/players",icon:u.A}],U=[{name:"游戏规则",url:"/panel/gamerules",icon:p.A},{name:"插件",url:"/panel/plugins",icon:k},{name:"后台",url:"/panel/terminal",icon:y.A},{name:"日志",url:"/panel/logs",icon:A.A},{name:"行为准则",url:"/panel/code-of-conduct",icon:x.A,minVersion:"1.21.9"}],F=[{name:"设置",url:"/panel/settings",icon:g.A},{name:"关于",url:"/about",icon:f.A},{name:"文档",url:"https://opanel.cn/docs/quick-start.html",icon:j.A,newTab:!0}];function _(){let e=(0,r.usePathname)(),t=(0,n.useContext)(D.se);return t?(0,s.jsxs)(C.Bx,{collapsible:"icon",children:[(0,s.jsxs)(C.Gh,{className:"pl-4 flex flex-row items-center gap-0 group-data-[state=collapsed]:justify-center group-data-[state=collapsed]:pt-3 group-data-[state=collapsed]:pl-2",children:[(0,s.jsx)(H.g,{size:26}),(0,s.jsx)("h1",{className:(0,q.cn)("m-2 text-lg text-theme font-semibold group-data-[state=collapsed]:hidden",V().className),children:"OPanel"})]}),(0,s.jsxs)(C.Yv,{children:[(0,s.jsxs)(C.Cn,{children:[(0,s.jsx)(C.jj,{children:"服务器"}),(0,s.jsx)(C.rQ,{children:(0,s.jsx)(C.wZ,{children:S.map((t,a)=>(0,s.jsx)(C.FX,{children:(0,s.jsx)(C.Uj,{isActive:e.startsWith(t.url),asChild:!0,children:(0,s.jsxs)(o(),{href:t.url,className:"pl-3",children:[e.startsWith(t.url)&&(0,s.jsx)(C.ED,{className:"left-2"}),(0,s.jsx)(t.icon,{}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:t.name})]})})},a))})})]}),(0,s.jsxs)(C.Cn,{children:[(0,s.jsx)(C.jj,{children:"管理"}),(0,s.jsx)(C.rQ,{children:(0,s.jsx)(C.wZ,{children:U.map((a,n)=>(!a.minVersion||a.minVersion&&(0,c.compare)(null==t?void 0:t.version,a.minVersion)>=0)&&(0,s.jsx)(C.FX,{children:(0,s.jsx)(C.Uj,{isActive:e.startsWith(a.url),asChild:!0,children:(0,s.jsxs)(o(),{href:a.url,className:"pl-3",children:[e.startsWith(a.url)&&(0,s.jsx)(C.ED,{className:"left-2"}),(0,s.jsx)(a.icon,{}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:a.name})]})})},n))})})]}),(0,s.jsxs)(C.Cn,{children:[(0,s.jsx)(C.jj,{children:"帮助"}),(0,s.jsx)(C.rQ,{children:(0,s.jsx)(C.wZ,{children:F.map((t,a)=>(0,s.jsx)(C.FX,{children:(0,s.jsx)(C.Uj,{isActive:e.startsWith(t.url),asChild:!0,children:(0,s.jsxs)(o(),{href:t.url,target:t.newTab?"_blank":"_self",className:"pl-3",children:[e.startsWith(t.url)&&(0,s.jsx)(C.ED,{className:"left-2"}),(0,s.jsx)(t.icon,{}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:t.name}),t.newTab&&(0,s.jsx)(v,{className:"!size-3 ml-1",stroke:"var(--color-muted-foreground)"})]})})},a))})})]})]}),(0,s.jsxs)(C.CG,{className:"flex-row gap-1 justify-end",children:[(0,s.jsx)(T,{}),(0,s.jsx)(M.$,{className:"group-data-[state=collapsed]:hidden cursor-pointer",variant:"secondary",size:"icon",onClick:()=>void((0,l.deleteCookie)("token"),window.location.href="/login"),children:(0,s.jsx)(w,{})})]})]}):(0,s.jsx)(s.Fragment,{})}var L=a(31886);function X(e){let{children:t}=e,[a,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(),{push:d}=(0,r.useRouter)(),h=async()=>{try{let e=await (0,L.qV)("/api/version");2===e.version.split(".").length&&(e.version+=".0"),c(e)}catch(e){console.error("Error fetching version info:",e)}};return((0,n.useEffect)(()=>{if(i(!0),!(0,l.hasCookie)("token"))return void d("/login");h()},[d]),(0,n.useEffect)(()=>{document.body.addEventListener("keydown",e=>{e.ctrlKey&&("a"===e.key||"p"===e.key||"s"===e.key)&&e.preventDefault()})},[]),a)?(0,s.jsx)(C.GB,{className:"overflow-hidden",children:(0,s.jsxs)(D.se,{value:o,children:[(0,s.jsx)(_,{}),(0,s.jsx)(C.sF,{className:"min-w-0",children:t})]})}):(0,s.jsx)(s.Fragment,{})}},21509:e=>{e.exports={style:{fontFamily:"'minecraftAE', 'minecraftAE Fallback', unifont, notoSansSC"},className:"__className_66a250"}},23323:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]])},31886:(e,t,a)=>{"use strict";a.d(t,{$M:()=>u,Kf:()=>o,QM:()=>k,RT:()=>h,nl:()=>m,ow:()=>p,qV:()=>d,y0:()=>l,yq:()=>i,zC:()=>c});var s=a(23464),n=a(16453),r=a(56671);let l="",i=globalThis.window?"".concat("http:"===window.location.protocol?"ws":"wss","://").concat(window.location.host):"ws://localhost:3000";function o(e,t,a){if(401===e.status&&"/login"!==window.location.pathname){(0,n.deleteCookie)("token"),window.location.href="/login";return}for(let[s,n]of a)if(e.status===s)return void r.oR.error(t,{description:n});r.oR.error(t,{description:e.message})}async function c(e){return(await s.A.request({method:"get",url:l+e})).data}async function d(e){return(await s.A.request({method:"get",url:l+e,headers:{"X-Credential-Token":(0,n.getCookie)("token")}})).data}async function h(e){return(await s.A.request({method:"get",url:l+e,headers:{"X-Credential-Token":(0,n.getCookie)("token")},responseType:"blob"})).data}async function u(e,t){let a=t?JSON.stringify(t):"";return(await s.A.request({method:"post",maxBodyLength:1/0,url:l+e,headers:{"Content-Type":"text/plain"},data:a})).data}async function p(e,t){let a=t?JSON.stringify(t):"";return(await s.A.request({method:"post",maxBodyLength:1/0,url:l+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,n.getCookie)("token")},data:a})).data}async function m(e,t){let a=t?JSON.stringify(t):"";return(await s.A.request({method:"delete",maxBodyLength:1/0,url:l+e,headers:{"Content-Type":"text/plain","X-Credential-Token":(0,n.getCookie)("token")},data:a})).data}async function k(e,t,a){let r=new FormData;return r.append("file",t),(await s.A.request({method:"post",url:l+e,headers:{"Content-Type":"multipart/form-data","X-Credential-Token":(0,n.getCookie)("token")},data:r,onUploadProgress:e=>{var t;return a&&a(null!=(t=e.progress)?t:0)}})).data}},43303:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s={src:"/_next/static/media/logo.19578f32.png",height:32,width:32,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEVMaXHAd0DCdz6xbDiJUiinZCPCeELFeTrIej+waDFLKxSyazPHgUvDdTjFfka+eUPIeDmiYCyoZTC6cjrMgEXbh0V/RhpXfzmHAAAAFHRSTlMA+U+f/gs2E3H7/b7jxoWm/PlqrsYiwYUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA6SURBVHicTcvJAYAgDADBBSJJQEU57L9Unzr/gU9sp26AzTDDnqG7X74Mrc8tcii2SpGkkEdN8Vd5ATgfAYcgr34rAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},58071:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("book-text",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]])},62978:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("square-terminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]])},69861:(e,t,a)=>{"use strict";a.d(t,{m:()=>u,g:()=>h});var s=a(95155),n=a(12115),r=a(51362),l=a(97357),i=a(53999),o=a(43303);let c={src:"/_next/static/media/brand-light.9ec3f829.svg"},d={src:"/_next/static/media/brand-dark.9d45fcbd.svg"};function h(e){let{size:t=144,className:a}=e;return(0,s.jsx)("img",{src:o.default.src,alt:"logo",width:t,className:(0,i.cn)("aspect-square",a),style:{imageRendering:t>=32?"pixelated":"crisp-edges"}})}function u(e){let{className:t}=e,{theme:a}=(0,r.D)(),[o,h]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{h(!0)},[]),o)?(0,s.jsx)(l.k,{src:"light"===a?c.src:d.src,className:(0,i.cn)("[&_svg]:h-fit",t)}):(0,s.jsx)(s.Fragment,{})}},71074:(e,t,a)=>{Promise.resolve().then(a.bind(a,19538))},81284:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},98611:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]])}},e=>{e.O(0,[6399,2048,9641,5702,5100,5452,6671,3207,3464,6874,790,6431,193,8441,5964,7358],()=>e(e.s=71074)),_N_E=e.O()}]);