(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5423],{5953:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("paint-bucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]])},18910:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var r=a(95155),n=a(55028),s=a(12115),l=a(35695),i=a(51362),o=a(5953),c=a(32568),d=a(19946);let u=(0,d.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var m=a(24232),x=a(89577),f=a(52815),h=a(19299),p=a(19832),g=a(53999),k=a(31886),v=a(80154),y=a(97168);let b=(0,d.A)("file-cog",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m2.305 15.53.923-.382",key:"yfp9st"}],["path",{d:"m3.228 12.852-.924-.383",key:"bckynb"}],["path",{d:"M4.677 21.5a2 2 0 0 0 1.313.5H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v2.5",key:"1yo3oz"}],["path",{d:"m4.852 11.228-.383-.923",key:"1j88i9"}],["path",{d:"m4.852 16.772-.383.924",key:"sag1dv"}],["path",{d:"m7.148 11.228.383-.923",key:"rj39hk"}],["path",{d:"m7.53 17.696-.382-.924",key:"1uu5cs"}],["path",{d:"m8.772 12.852.923-.383",key:"13811l"}],["path",{d:"m8.772 15.148.923.383",key:"z1a5l0"}],["circle",{cx:"6",cy:"14",r:"3",key:"a1xfv6"}]]);function j(e){let{name:t,isActive:a,isSaved:n=!0,onClick:s}=e;return(0,r.jsxs)(x.yc,{className:"justify-between",isActive:a,onClick:()=>s&&s(),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b,{}),(0,r.jsx)("span",{children:t})]}),a&&!n&&(0,r.jsx)("div",{className:"rounded-full w-2 h-2 mr-2 bg-foreground"})]})}var w=a(41236),N=a(31815);let C=(0,n.default)(()=>Promise.all([a.e(4654),a.e(1376),a.e(6859),a.e(8638),a.e(4695),a.e(2674),a.e(1752)]).then(a.bind(a,11752)),{loadableGenerated:{webpack:()=>[11752]},ssr:!1});function A(){var e,t;let{push:a}=(0,l.useRouter)(),{theme:n}=(0,i.D)(),d=(0,s.useContext)(h.se),[b,A]=(0,s.useState)(null),[$,L]=(0,s.useState)("bukkit"),[P,S]=(0,s.useState)(""),[q,z]=(0,s.useState)(!0),[M,T]=(0,s.useState)(!1),E=(0,s.useCallback)(async()=>{if(d&&!(0,g.v_)(d.serverType))return void a("/panel/dashboard");try{let e=await (0,k.qV)("/api/control/bukkit-config"),t=new Map;for(let[a,r]of Object.entries(e))t.set(a,(0,g.QM)(r));A(t),L((0,f.mt)("state.bukkit-config.current-editing")),z(!0)}catch(e){(0,k.Kf)(e,(0,v.$)("bukkit-config.fetch.error"),[[400,(0,v.$)("common.error.400")],[401,(0,v.$)("common.error.401")],[500,(0,v.$)("common.error.500")],[503,(0,v.$)("bukkit-config.error.503")]])}},[a,d]),F=(0,s.useCallback)(async()=>{T(!0);try{await (0,k.ow)("/api/control/bukkit-config?target=".concat($),(0,g.q3)(P)),p.P.emit("refresh-data"),T(!1),z(!0)}catch(e){(0,k.Kf)(e,(0,v.$)("bukkit-config.save.error",$),[[400,(0,v.$)("common.error.400")],[401,(0,v.$)("common.error.401")],[500,(0,v.$)("common.error.500")],[503,(0,v.$)("bukkit-config.error.503")]])}},[$,P]),O=e=>{L(e),z(!0),(0,f.kz)("state.bukkit-config.current-editing",e)};return(0,s.useEffect)(()=>(E(),p.P.on("refresh-data",()=>E()),()=>{p.P.removeAllListeners("refresh-data")}),[E]),(0,s.useEffect)(()=>{var e;$&&b&&S(null!=(e=b.get($))?e:"")},[$,b]),(0,w.V)("s",{ctrl:!0},()=>F()),(0,r.jsx)(m.C,{title:(0,v.$)("bukkit-config.title"),icon:(0,r.jsx)(o.A,{}),outerClassName:"max-h-screen overflow-y-hidden max-lg:max-h-none max-lg:overflow-y-auto",className:"flex-1 min-h-0",children:(0,r.jsxs)(x.F6,{children:[(0,r.jsxs)(x.Zz,{className:"h-full justify-between",children:[(0,r.jsxs)(x.Ls,{children:[(0,r.jsx)(j,{name:"bukkit.yml",isActive:"bukkit"===$,isSaved:q,onClick:()=>O("bukkit")}),["Spigot","Paper","Folia"].includes(null!=(e=null==d?void 0:d.serverType)?e:"")&&(0,r.jsx)(j,{name:"spigot.yml",isActive:"spigot"===$,isSaved:q,onClick:()=>O("spigot")}),["Paper","Folia"].includes(null!=(t=null==d?void 0:d.serverType)?t:"")&&(0,r.jsx)(j,{name:"paper-global.yml",isActive:"paper"===$,isSaved:q,onClick:()=>O("paper")})]}),(0,r.jsxs)("div",{className:"flex justify-end *:cursor-pointer",children:[(0,r.jsx)(y.$,{variant:"ghost",size:"icon",onClick:()=>E(),children:(0,r.jsx)(c.A,{})}),(0,r.jsx)(y.$,{variant:"ghost",size:"icon",disabled:q,onClick:()=>F(),children:(0,r.jsx)(u,{})})]})]}),(0,r.jsxs)(x.CT,{children:[(0,r.jsx)(C,{defaultLanguage:"yaml",value:P,theme:"dark"===n?"server-log-theme-dark":"server-log-theme",options:{minimap:{enabled:!1},...f.FN},onChange:e=>{z(!1),S(null!=e?e:"")}}),(0,r.jsx)(x.At,{children:(0,r.jsx)(x.J1,{side:"right",children:M?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.y,{}),(0,r.jsx)("span",{children:(0,v.$)("bukkit-config.editor.status-bar.saving")})]}):q?(0,v.$)("bukkit-config.editor.status-bar.saved"):(0,v.$)("bukkit-config.editor.status-bar.edited")})})]})]})})}},19299:(e,t,a)=>{"use strict";a.d(t,{CS:()=>l,se:()=>s,w3:()=>i});var r=a(12115);function n(){let e=r.createContext(void 0);return e.displayName="APIContext",e}let s=n(),l=n(),i=r.createContext(void 0);i.displayName="APIContext"},19832:(e,t,a)=>{"use strict";a.d(t,{P:()=>n});var r=a(19087);let n=new(a.n(r)())},24232:(e,t,a)=>{"use strict";a.d(t,{C:()=>f});var r=a(95155),n=a(12115),s=a(13052),l=a(53999);function i(e){let{...t}=e;return(0,r.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,l.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,l.cn)("inline-flex items-center gap-1.5",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,l.cn)("text-foreground font-normal",t),...a})}function u(e){let{children:t,className:a,...n}=e;return(0,r.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,l.cn)("[&>svg]:size-3.5",a),...n,children:null!=t?t:(0,r.jsx)(s.A,{})})}var m=a(76037),x=a(20193);function f(e){let{children:t,title:a,subTitle:s,icon:f,outerClassName:h,className:p,...g}=e;return(0,n.useEffect)(()=>{document.title="OPanel - ".concat(null!=s?s:a)},[a,s]),(0,r.jsxs)("div",{className:(0,l.cn)("group px-16 max-md:px-12 max-sm:px-8 flex-1 flex flex-col gap-6 max-md:gap-2",h),children:[(0,r.jsxs)("div",{className:"pt-10 pb-5 flex flex-col gap-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(x.x2,{className:"cursor-pointer"}),(0,r.jsx)(m.w,{orientation:"vertical"}),(0,r.jsx)(i,{children:(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{children:"OPanel"}),(0,r.jsx)(u,{}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{children:a}),(0,r.jsx)(u,{})]}),(0,r.jsx)(c,{children:(0,r.jsx)(d,{children:null!=s?s:a})})]})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5",children:[f,(0,r.jsx)("h1",{className:"text-3xl font-bold",children:null!=s?s:a})]})]}),(0,r.jsx)("div",{className:(0,l.cn)(p,"pb-14"),...g,children:t})]})}},31815:(e,t,a)=>{"use strict";a.d(t,{y:()=>l});var r=a(95155),n=a(51154),s=a(53999);function l(e){let{className:t,...a}=e;return(0,r.jsx)(n.A,{role:"status","aria-label":"Loading",className:(0,s.cn)("size-4 animate-spin",t),...a})}},31886:(e,t,a)=>{"use strict";a.d(t,{IB:()=>u,Kf:()=>o,QM:()=>x,nl:()=>m,ow:()=>d,qV:()=>c,y0:()=>l,yq:()=>i});var r=a(23464),n=a(16453),s=a(56671);let l="",i=globalThis.window?"".concat("http:"===window.location.protocol?"ws":"wss","://").concat(window.location.host):"ws://localhost:3000";function o(e,t,a){if(401===e.status&&"/login"!==window.location.pathname){(0,n.deleteCookie)("token"),window.location.href="/login";return}for(let[r,n]of a)if(e.status===r)return void s.oR.error(t,{description:n});s.oR.error(t,{description:e.message})}async function c(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(await r.A.request({method:"get",url:l+e,withCredentials:t})).data}async function d(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=t?JSON.stringify(t):"";return(await r.A.request({method:"post",maxBodyLength:1/0,url:l+e,withCredentials:a,headers:{"Content-Type":"text/plain"},data:n})).data}async function u(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=t?JSON.stringify(t):"";return(await r.A.request({method:"patch",maxBodyLength:1/0,url:l+e,withCredentials:a,headers:{"Content-Type":"text/plain"},data:n})).data}async function m(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=t?JSON.stringify(t):"";return(await r.A.request({method:"delete",maxBodyLength:1/0,url:l+e,withCredentials:a,headers:{"Content-Type":"text/plain"},data:n})).data}async function x(e,t,a){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=new FormData;return s.append("file",t),(await r.A.request({method:"post",url:l+e,withCredentials:n,headers:{"Content-Type":"multipart/form-data"},data:s,onUploadProgress:e=>{var t;return a&&a(null!=(t=e.progress)?t:0)}})).data}},32568:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]])},41236:(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var r=a(12115);function n(e,t,a){let n=(0,r.useCallback)(r=>{r.key.toLowerCase()===e.toLowerCase()&&(!t.ctrl||r.ctrlKey)&&(!t.shift||r.shiftKey)&&(!t.alt||r.altKey)&&a(r)},[e,t,a]);(0,r.useEffect)(()=>(document.body.addEventListener("keydown",n),()=>document.body.removeEventListener("keydown",n)),[n])}},89577:(e,t,a)=>{"use strict";a.d(t,{At:()=>d,CT:()=>c,F6:()=>s,J1:()=>u,Ls:()=>i,Zz:()=>l,yc:()=>o});var r=a(95155),n=a(53999);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("h-full border rounded-md flex max-lg:flex-col overflow-hidden",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("aside",{className:(0,n.cn)("flex-1/4 h-fit max-h-full max-lg:max-h-none flex flex-col gap-3 p-2",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex-1 flex flex-col overflow-y-auto",t),...a})}function o(e){let{className:t,isActive:a=!1,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("h-10 rounded-sm px-3 py-1 flex items-center gap-2 text-sm cursor-pointer [&_svg]:size-4",a&&"bg-muted",t),...s})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex-3/4 border-l max-lg:border-l-0 max-lg:border-t max-lg:min-h-96 flex flex-col justify-end max-lg:flex-col-reverse",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("h-6 px-2 border-t max-lg:border-t-0 max-lg:border-b flex items-center [&>*]:text-xs [&>*]:text-muted-foreground cursor-default",t),...a})}function u(e){let{className:t,side:a="left",...s}=e;return(0,r.jsx)("span",{className:(0,n.cn)("right"===a&&"ml-auto",t),...s})}},96970:(e,t,a)=>{Promise.resolve().then(a.bind(a,18910))}},e=>{e.O(0,[9690,4390,1835,9641,5160,5702,5452,6671,3207,3464,2859,304,193,8441,5964,7358],()=>e(e.s=96970)),_N_E=e.O()}]);