(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8130],{22726:(e,a,t)=>{"use strict";t.d(a,{b:()=>j});var s=t(95155),r=t(12115),i=t(52278),n=t(42355),l=t(13052),o=t(12767),c=t(36268),d=t(11032),u=t(88524),p=t(53999),h=t(97168),x=t(74466);t(76037);let m=(0,x.F)("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function g(e){let{className:a,orientation:t,...r}=e;return(0,s.jsx)("div",{role:"group","data-slot":"button-group","data-orientation":t,className:(0,p.cn)(m({orientation:t}),a),...r})}var f=t(80154);function j(e){var a;let{columns:t,data:x,pagination:m=!1,fallbackMessage:j=(0,f.$)("table.empty"),className:v}=e,[b,y]=(0,r.useState)({pageIndex:0,pageSize:10}),$=(0,c.N4)({columns:t,data:x,getCoreRowModel:(0,d.HT)(),getPaginationRowModel:m?(0,d.kW)():void 0,onPaginationChange:y,state:{pagination:b}});return(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsx)("div",{className:(0,p.cn)(v,"border rounded-md"),children:(0,s.jsxs)(u.XI,{children:[(0,s.jsx)(u.A0,{children:$.getHeaderGroups().map(e=>(0,s.jsx)(u.Hj,{children:e.headers.map(e=>(0,s.jsx)(u.nd,{children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(u.BF,{children:(null==(a=$.getRowModel().rows)?void 0:a.length)?$.getRowModel().rows.map(e=>(0,s.jsx)(u.Hj,{children:e.getVisibleCells().map(e=>(0,s.jsx)(u.nA,{children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(u.Hj,{className:"hover:bg-transparent",children:(0,s.jsx)(u.nA,{colSpan:t.length,className:"h-24 text-center",children:j})})})]})}),m&&(0,s.jsxs)("div",{className:"flex gap-3 items-center max-md:flex-col",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center [&_button]:cursor-pointer",children:[(0,s.jsx)(h.$,{variant:"outline",size:"icon",title:(0,f.$)("table.to-first"),onClick:()=>$.firstPage(),disabled:!$.getCanPreviousPage(),children:(0,s.jsx)(i.A,{})}),(0,s.jsxs)(g,{children:[(0,s.jsxs)(h.$,{variant:"outline",onClick:()=>$.previousPage(),disabled:!$.getCanPreviousPage(),children:[(0,s.jsx)(n.A,{}),(0,f.$)("table.previous")]}),(0,s.jsxs)(h.$,{variant:"outline",onClick:()=>$.nextPage(),disabled:!$.getCanNextPage(),children:[(0,f.$)("table.next"),(0,s.jsx)(l.A,{})]})]}),(0,s.jsx)(h.$,{variant:"outline",size:"icon",title:(0,f.$)("table.to-last"),onClick:()=>$.lastPage(),disabled:!$.getCanNextPage(),children:(0,s.jsx)(o.A,{})})]}),(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:(0,f.$)("table.status",b.pageIndex+1,$.getPageCount())})]})]})}},28042:(e,a,t)=>{"use strict";t.d(a,{Ik:()=>p,MG:()=>o,Sq:()=>d,iV:()=>h});var s=t(95155);t(12115);var r=t(74466),i=t(53999),n=t(97168),l=t(89852);function o(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"input-group",role:"group",className:(0,i.cn)("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40",a),...t})}t(99474);let c=(0,r.F)("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}});function d(e){let{className:a,align:t="inline-start",...r}=e;return(0,s.jsx)("div",{role:"group","data-slot":"input-group-addon","data-align":t,className:(0,i.cn)(c({align:t}),a),onClick:e=>{var a,t;e.target.closest("button")||null==(t=e.currentTarget.parentElement)||null==(a=t.querySelector("input"))||a.focus()},...r})}let u=(0,r.F)("text-sm shadow-none flex gap-2 items-center",{variants:{size:{xs:"h-6 gap-1 px-2 rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-3.5 has-[>svg]:px-2",sm:"h-8 px-2.5 gap-1.5 rounded-md has-[>svg]:px-2.5","icon-xs":"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0","icon-sm":"size-8 p-0 has-[>svg]:p-0"}},defaultVariants:{size:"xs"}});function p(e){let{className:a,type:t="button",variant:r="ghost",size:l="xs",...o}=e;return(0,s.jsx)(n.$,{type:t,"data-size":l,variant:r,className:(0,i.cn)(u({size:l}),a),...o})}function h(e){let{className:a,...t}=e;return(0,s.jsx)(l.p,{"data-slot":"input-group-control",className:(0,i.cn)("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",a),...t})}},31795:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>el});var s=t(95155),r=t(12115),i=t(17580),n=t(32568),l=t(47924),o=t(6877),c=t(17881),d=t(42996),u=t(30064),p=t(53999);function h(e){let{className:a,...t}=e;return(0,s.jsx)(u.bL,{"data-slot":"tabs",className:(0,p.cn)("flex flex-col gap-2",a),...t})}function x(e){let{className:a,...t}=e;return(0,s.jsx)(u.B8,{"data-slot":"tabs-list",className:(0,p.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function m(e){let{className:a,...t}=e;return(0,s.jsx)(u.l9,{"data-slot":"tabs-trigger",className:(0,p.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function g(e){let{className:a,...t}=e;return(0,s.jsx)(u.UC,{"data-slot":"tabs-content",className:(0,p.cn)("flex-1 outline-none",a),...t})}var f=t(22726),j=t(31886),v=t(5196),b=t(75494),y=t(12318),$=t(97092),w=t(74126),k=t(28113),N=t(37777),C=t(97168),z=t(99840),A=t(82714),P=t(89852),O=t(80154);function _(e){let{title:a,description:t,label:i,placeholder:n,onAction:l,asChild:o,children:c}=e,d=(0,r.useRef)(null);return(0,s.jsxs)(z.lG,{children:[(0,s.jsx)(z.zM,{asChild:o,children:c}),(0,s.jsxs)(z.Cf,{children:[(0,s.jsxs)(z.c7,{children:[(0,s.jsx)(z.L3,{children:a}),t&&(0,s.jsx)(z.rr,{children:t})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)(A.J,{children:i}),(0,s.jsx)(P.p,{placeholder:n,ref:d})]}),(0,s.jsxs)(z.Es,{children:[(0,s.jsx)(z.HM,{asChild:!0,children:(0,s.jsx)(C.$,{variant:"outline",children:(0,O.$)("dialog.cancel")})}),(0,s.jsx)(z.HM,{asChild:!0,children:(0,s.jsx)(C.$,{onClick:()=>{d.current&&l&&l(d.current.value)},children:(0,O.$)("dialog.confirm")})})]})]})]})}var M=t(88145);function E(e){let{isOnline:a,className:t}=e;return(0,s.jsxs)(M.E,{variant:"outline",children:[(0,s.jsx)("div",{className:(0,p.cn)("w-2 h-2 rounded-full",a?"bg-green-600":"bg-muted-foreground",t)}),a?(0,O.$)("online-badge.online"):(0,O.$)("online-badge.offline")]})}var K=t(16103),L=t(62177),S=t(48778),R=t(71153),W=t(41085),H=t(30070),I=t(23291),V=t(91503),F=t(52815);function q(e){let{uuid:a}=e,t=(0,r.useRef)(null);return(0,r.useEffect)(()=>{t.current&&new V.A({canvas:t.current,skin:(0,F.mt)("players.skin-provider")+a,cape:(0,F.mt)("players.cape-provider")+a})},[a]),(0,s.jsx)("canvas",{ref:t})}var B=t(95784),G=t(90088),Q=t(19832);let T=R.z.object({gamemode:R.z.enum(Object.values(I.UZ)),isOp:R.z.boolean()});function D(e){var a;let{player:t,children:r,asChild:i}=e,n=(0,L.mN)({resolver:(0,S.u)(T),values:{gamemode:null!=(a=t.gamemode)?a:"adventure",isOp:t.isOp}}),l=async e=>{e.gamemode!==t.gamemode&&await (0,K.Q4)(t.uuid,e.gamemode,!1),e.isOp!==t.isOp&&(t.isOp?await (0,K.B6)(t.uuid,!1):await (0,K.Hy)(t.uuid,!1)),Q.P.emit("refresh-data")};return(0,s.jsxs)(W.cj,{children:[(0,s.jsx)(W.CG,{asChild:i,children:r}),(0,s.jsx)(W.h,{children:(0,s.jsx)(H.lV,{...n,children:(0,s.jsxs)("form",{className:"flex-1 flex flex-col",onSubmit:n.handleSubmit(l),children:[(0,s.jsxs)(W.Fm,{children:[(0,s.jsx)(W.qp,{children:(0,O.$)("players.edit.title")}),(0,s.jsx)(W.Qs,{children:(0,O.$)("players.edit.description")})]}),(0,s.jsxs)("div",{className:"flex-1 px-4 flex flex-col gap-5",children:[(0,s.jsx)(q,{uuid:t.uuid}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,s.jsx)(E,{isOnline:t.isOnline}),t.name?(0,s.jsx)("h2",{className:"inline-block text-lg font-semibold",children:t.name}):(0,s.jsxs)("span",{className:"text-muted-foreground italic",children:["<",(0,O.$)("players.unnamed"),">"]})]}),(0,s.jsx)(H.zB,{control:n.control,name:"gamemode",render:e=>{let{field:a}=e;return(0,s.jsxs)(H.eI,{children:[(0,s.jsx)(H.lR,{children:(0,O.$)("players.edit.form.gamemode.label")}),(0,s.jsx)(H.MJ,{children:(0,s.jsxs)(B.l6,{...a,onValueChange:a.onChange,children:[(0,s.jsx)(B.bq,{className:"w-full",children:(0,s.jsx)(B.yv,{})}),(0,s.jsxs)(B.gC,{children:[(0,s.jsx)(B.eb,{value:"adventure",children:(0,O.$)("common.gamemode.adventure")}),(0,s.jsx)(B.eb,{value:"survival",children:(0,O.$)("common.gamemode.survival")}),(0,s.jsx)(B.eb,{value:"creative",children:(0,O.$)("common.gamemode.creative")}),(0,s.jsx)(B.eb,{value:"spectator",children:(0,O.$)("common.gamemode.spectator")})]})]})}),(0,s.jsx)(H.C5,{})]})}}),(0,s.jsx)(H.zB,{control:n.control,name:"isOp",render:e=>{let{field:a}=e;return(0,s.jsxs)(H.eI,{className:"flex justify-between",children:[(0,s.jsx)(H.lR,{children:(0,O.$)("players.edit.form.op.label")}),(0,s.jsx)(H.MJ,{children:(0,s.jsx)(G.d,{...a,value:"",defaultChecked:t.isOp,onCheckedChange:a.onChange})}),(0,s.jsx)(H.C5,{})]})}}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(A.J,{children:(0,O.$)("players.edit.form.manage")}),(0,s.jsxs)("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 [&>*]:cursor-pointer",children:[t.name&&void 0!==t.isWhitelisted&&(t.isWhitelisted?(0,s.jsxs)(C.$,{variant:"outline",onClick:async()=>{await (0,K.CB)(t.name,t.uuid),Q.P.emit("refresh-data")},children:[(0,s.jsx)(b.A,{}),(0,O.$)("players.action.remove-from-whitelist")]}):(0,s.jsxs)(C.$,{variant:"outline",onClick:async()=>{await (0,K.EW)(t.name,t.uuid),Q.P.emit("refresh-data")},children:[(0,s.jsx)(y.A,{}),(0,O.$)("players.action.add-to-whitelist")]})),(0,s.jsx)(_,{title:(0,O.$)("players.action.kick.prompt.title"),description:(0,O.$)("players.action.kick.prompt.description"),label:(0,O.$)("players.action.kick.prompt.label"),placeholder:(0,O.$)("players.action.kick.prompt.placeholder"),onAction:async e=>{await (0,K.HQ)(t.uuid,e),Q.P.emit("refresh-data")},asChild:!0,children:(0,s.jsxs)(C.$,{variant:"outline",className:void 0===t.isWhitelisted?"col-start-1":"col-start-2",disabled:!t.isOnline,children:[(0,s.jsx)($.A,{}),(0,O.$)("players.action.kick")]})}),t.isBanned?(0,s.jsxs)(C.$,{variant:"outline",className:void 0===t.isWhitelisted?"col-start-2":"col-span-2",onClick:async()=>{await (0,K.zf)(t.uuid),Q.P.emit("refresh-data")},children:[(0,s.jsx)(k.A,{}),(0,O.$)("players.action.pardon")]}):(0,s.jsx)(_,{title:(0,O.$)("players.action.ban.prompt.title"),description:(0,O.$)("players.action.ban.prompt.description"),label:(0,O.$)("players.action.ban.prompt.label"),placeholder:(0,O.$)("players.action.ban.prompt.placeholder"),onAction:async e=>{await (0,K._L)(t.uuid,e),Q.P.emit("refresh-data")},asChild:!0,children:(0,s.jsxs)(C.$,{variant:"destructive",className:void 0===t.isWhitelisted?"col-start-2":"col-span-2",children:[(0,s.jsx)(o.A,{}),(0,O.$)("players.action.ban")]})})]})]})]}),(0,s.jsxs)(W.XW,{children:[(0,s.jsx)(W.kN,{asChild:!0,children:(0,s.jsx)(C.$,{type:"submit",className:"cursor-pointer",children:(0,O.$)("dialog.confirm")})}),(0,s.jsx)(W.kN,{asChild:!0,children:(0,s.jsx)(C.$,{variant:"outline",className:"cursor-pointer",children:(0,O.$)("dialog.cancel")})})]})]})})})]})}var J=t(99211);let U=[{accessorKey:"name",header:(0,O.$)("players.player-list.columns.name"),cell:e=>{let{row:a}=e,{name:t,uuid:r}=a.original;return(0,s.jsxs)(N.m_,{children:[(0,s.jsx)(N.k$,{children:(0,s.jsx)(D,{player:a.original,asChild:!0,children:t?(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("img",{src:(0,F.mt)("players.avatar-provider")+r,alt:t,width:17,height:17}),(0,s.jsx)("span",{className:"font-semibold",children:t})]}):(0,s.jsxs)("span",{className:"text-muted-foreground italic cursor-pointer",children:["<",(0,O.$)("players.unnamed"),">"]})})}),(0,s.jsx)(N.ZI,{children:r})]})}},{accessorKey:"isOnline",header:()=>(0,s.jsx)("div",{className:"text-center",children:(0,O.$)("players.player-list.columns.is-online")}),cell:e=>{let{row:a}=e,{isOnline:t}=a.original;return(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(E,{isOnline:t})})}},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"gamemode",header:()=>(0,s.jsx)("div",{className:"text-center",children:(0,O.$)("players.player-list.columns.gamemode")}),cell:e=>{let{row:a}=e,{gamemode:t}=a.original;return t?(0,s.jsx)("div",{className:"text-center",children:(0,p.Cq)(t)}):(0,s.jsx)(s.Fragment,{})}},{accessorKey:"isWhitelisted",header:()=>(0,s.jsx)("div",{className:"text-center",children:(0,O.$)("players.player-list.columns.is-whitelisted")}),cell:e=>{let{row:a,column:t}=e;return(0,r.useEffect)(()=>{t.toggleVisibility(void 0!==a.original.isWhitelisted)},[a,t]),(0,s.jsx)("div",{className:"flex justify-center",children:a.original.isWhitelisted?(0,s.jsx)(v.A,{size:18,color:"var(--color-muted-foreground)"}):(0,s.jsx)(s.Fragment,{})})}},{accessorKey:"isOp",header:()=>(0,s.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"flex justify-center",children:a.original.isOp?(0,s.jsx)(v.A,{size:18,color:"var(--color-muted-foreground)"}):(0,s.jsx)(s.Fragment,{})})}},{header:" ",cell:e=>{let{row:a}=e,{name:t,uuid:r,isOnline:i,isWhitelisted:n}=a.original;return(0,s.jsxs)("div",{className:"flex justify-end [&>*]:h-4 [&>*]:cursor-pointer [&>*]:hover:!bg-transparent",children:[void 0!==n&&(n?(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:(0,O.$)("players.action.remove-from-whitelist"),onClick:async()=>{await (0,K.CB)(t,r),Q.P.emit("refresh-data")},children:(0,s.jsx)(b.A,{})}):(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:(0,O.$)("players.action.add-to-whitelist"),onClick:async()=>{await (0,K.EW)(t,r),Q.P.emit("refresh-data")},children:(0,s.jsx)(y.A,{})})),i&&(0,s.jsx)(_,{title:(0,O.$)("players.action.kick.prompt.title"),description:(0,O.$)("players.action.kick.prompt.description"),label:(0,O.$)("players.action.kick.prompt.label"),placeholder:(0,O.$)("players.action.kick.prompt.placeholder"),onAction:async e=>{await (0,K.HQ)(r,e),Q.P.emit("refresh-data")},asChild:!0,children:(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:(0,O.$)("players.action.kick"),children:(0,s.jsx)($.A,{})})}),(0,s.jsx)(_,{title:(0,O.$)("players.action.ban.prompt.title"),description:(0,O.$)("players.action.ban.prompt.description"),label:(0,O.$)("players.action.ban.prompt.label"),placeholder:(0,O.$)("players.action.ban.prompt.placeholder"),onAction:async e=>{await (0,K._L)(r,e),Q.P.emit("refresh-data")},asChild:!0,children:(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:(0,O.$)("players.action.ban"),children:(0,s.jsx)(o.A,{className:"stroke-red-400"})})}),(0,s.jsx)(J.F,{title:(0,O.$)("players.action.remove.alert.title",t),description:i?(0,O.$)("players.action.remove.alert.description2"):(0,O.$)("players.action.remove.alert.description1"),onAction:async()=>{i&&(await (0,K.HQ)(r,(0,O.$)("players.action.remove.kick-reason"),!1),await (0,p.yy)(100)),await (0,K.wx)(r),Q.P.emit("refresh-data")},asChild:!0,children:(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:(0,O.$)("players.action.remove"),children:(0,s.jsx)(w.A,{className:"stroke-red-400"})})})]})}}],Z=[{accessorKey:"name",header:(0,O.$)("players.banned-list.columns.name"),cell:e=>{let{row:a}=e,{name:t,uuid:r}=a.original;return(0,s.jsxs)(N.m_,{children:[(0,s.jsx)(N.k$,{children:(0,s.jsx)(D,{player:a.original,asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("img",{src:(0,F.mt)("players.avatar-provider")+r,alt:t,width:17,height:17}),(0,s.jsx)("span",{className:"font-semibold",children:t})]})})}),(0,s.jsx)(N.ZI,{children:r})]})}},{accessorKey:"banReason",header:(0,O.$)("players.banned-list.columns.ban-reason"),cell:e=>{let{row:a}=e,{banReason:t}=a.original;return t&&(0,s.jsx)("span",{children:(0,p.QM)(t)})}},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"isOp",header:()=>(0,s.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"flex justify-center",children:a.original.isOp?(0,s.jsx)(v.A,{size:18,color:"var(--color-muted-foreground)"}):(0,s.jsx)(s.Fragment,{})})}},{header:" ",cell:e=>{let{row:a}=e;return(0,s.jsx)(C.$,{variant:"ghost",size:"icon",className:"float-right h-4 cursor-pointer hover:!bg-transparent",title:(0,O.$)("players.action.pardon"),onClick:async()=>{await (0,K.zf)(a.original.uuid),Q.P.emit("refresh-data")},children:(0,s.jsx)(k.A,{className:"stroke-green-600"})})}}];var X=t(24232),Y=t(86801),ee=t(28042),ea=t(84616),et=t(56671),es=t(88524);function er(e){let{children:a,asChild:t}=e,[i,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),u=async()=>{try{let e=await (0,j.qV)("/api/banned-ips");o(e.bannedIps)}catch(e){(0,j.Kf)(e,(0,O.$)("players.banned-ips.fetch.error"),[[400,(0,O.$)("common.error.400")],[401,(0,O.$)("common.error.401")]])}},h=async e=>{if(""===e||!(0,p.NU)(e))return void et.oR.error((0,O.$)("players.banned-ips.add.error"),{description:(0,O.$)("players.banned-ips.add.error.400")});if(l.includes(e))return void et.oR.warning((0,O.$)("players.banned-ips.add.exist"));try{await (0,j.ow)("/api/banned-ips/add?ip=".concat(e)),d(""),Q.P.emit("refresh-data"),et.oR.success((0,O.$)("players.banned-ips.add.success"))}catch(e){(0,j.Kf)(e,(0,O.$)("players.banned-ips.add.error"),[[400,(0,O.$)("players.banned-ips.add.error.400")],[401,(0,O.$)("common.error.401")]])}},x=async e=>{try{await (0,j.ow)("/api/banned-ips/remove?ip=".concat(e)),Q.P.emit("refresh-data"),et.oR.success((0,O.$)("players.banned-ips.pardon.success"))}catch(e){(0,j.Kf)(e,(0,O.$)("players.banned-ips.pardon.error"),[[400,(0,O.$)("players.banned-ips.pardon.error.400")],[401,(0,O.$)("common.error.401")]])}};return(0,r.useEffect)(()=>{Q.P.on("refresh-data",()=>{u()})},[]),(0,r.useEffect)(()=>{i?u():d("")},[i]),(0,s.jsxs)(z.lG,{open:i,onOpenChange:n,children:[(0,s.jsx)(z.zM,{asChild:t,children:a}),(0,s.jsxs)(z.Cf,{children:[(0,s.jsxs)(z.c7,{children:[(0,s.jsx)(z.L3,{children:(0,O.$)("players.banned-ips.title")}),(0,s.jsx)(z.rr,{children:(0,O.$)("players.banned-ips.description")})]}),(0,s.jsxs)("div",{className:"border rounded-md",children:[(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto",children:(0,s.jsx)(es.XI,{children:(0,s.jsx)(es.BF,{children:l.map((e,a)=>(0,s.jsxs)(es.Hj,{children:[(0,s.jsx)(es.nA,{children:e}),(0,s.jsx)(es.nA,{children:(0,s.jsx)(C.$,{variant:"ghost",size:"icon",className:"float-right h-4 cursor-pointer hover:!bg-transparent",title:(0,O.$)("players.banned-ips.pardon"),onClick:()=>x(e),children:(0,s.jsx)(k.A,{className:"stroke-green-600"})})})]},a))})})}),(0,s.jsxs)("div",{className:(0,p.cn)("flex gap-2 p-2",l.length>0&&"border-t"),children:[(0,s.jsx)(P.p,{value:c,placeholder:(0,O.$)("players.banned-ips.input.placeholder"),className:"h-8",onInput:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&c.length>0&&h(c)}),(0,s.jsx)(C.$,{variant:"ghost",size:"icon-sm",className:"cursor-pointer",disabled:0===c.length,onClick:()=>h(c),children:(0,s.jsx)(ea.A,{})})]})]}),(0,s.jsx)(z.Es,{children:(0,s.jsx)(z.HM,{asChild:!0,children:(0,s.jsx)(C.$,{variant:"outline",children:(0,O.$)("dialog.close")})})})]})]})}var ei=t(34685),en=t(14396);function el(){let[e,a]=(0,r.useState)([]),[t,u]=(0,r.useState)([]),[p,v]=(0,r.useState)(0),[b,y]=(0,r.useState)(!1),[$,w]=(0,r.useState)((0,F.mt)("state.players.tab")),[k,N]=(0,r.useState)(""),z=(0,r.useMemo)(()=>e.sort((e,a)=>e.name.localeCompare(a.name)),[e]),A=(0,r.useMemo)(()=>z.filter(e=>{let{isBanned:a}=e;return!a}),[z]),P=(0,r.useMemo)(()=>z.filter(e=>{let{isBanned:a}=e;return a}),[z]),_=(0,en.h)(ei.y),M=async()=>{try{let e=await (0,j.qV)("/api/players");v(e.maxPlayerCount),y(e.whitelist)}catch(e){(0,j.Kf)(e,(0,O.$)("players.error"),[[400,(0,O.$)("common.error.400")],[401,(0,O.$)("common.error.401")]])}};return(0,r.useEffect)(()=>{M(),Q.P.on("refresh-data",()=>M())},[]),(0,r.useEffect)(()=>{_&&(_.subscribe("init",e=>{a(e.filter(e=>{let{name:a}=e;return void 0!==a})),u(e.filter(e=>{let{name:a}=e;return void 0===a}))}),_.subscribe("join",e=>{a(a=>{let t=a.findIndex(a=>a.uuid===e.uuid);return t>-1?a.map((a,s)=>s===t?e:a):[...a,e]})}),_.subscribe("leave",e=>{a(a=>a.map(a=>a.uuid===e.uuid?e:a))}),_.subscribe("gamemode-change",e=>{a(a=>a.map(a=>a.uuid===e.uuid?e:a))}),Q.P.on("refresh-data",()=>_.send("fetch",null)))},[_]),(0,r.useEffect)(()=>{document.body.addEventListener("keydown",e=>{e.ctrlKey&&"ArrowRight"===e.key?w("banned-list"):e.ctrlKey&&"ArrowLeft"===e.key&&w("player-list")})},[]),(0,s.jsxs)(X.C,{title:(0,O.$)("players.title"),subTitle:"player-list"===$?(0,O.$)("players.player-list.title"):(0,O.$)("players.banned-list.title"),icon:(0,s.jsx)(i.A,{}),className:"flex flex-col gap-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,O.$)("players.hint")}),(0,s.jsxs)(h,{value:$,onValueChange:e=>{w(e),(0,F.kz)("state.players.tab",e)},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center max-lg:flex-col-reverse max-lg:items-start max-lg:gap-2",children:[(0,s.jsxs)(x,{className:"*:cursor-pointer",children:[(0,s.jsx)(m,{value:"player-list",children:"".concat((0,O.$)("players.player-list.title")," (").concat(e.filter(e=>{let{isOnline:a}=e;return a}).length," / ").concat(p,")")}),(0,s.jsx)(m,{value:"banned-list",children:"".concat((0,O.$)("players.banned-list.title")," (").concat(e.filter(e=>{let{isBanned:a}=e;return a}).length,")")})]}),(0,s.jsxs)("div",{className:"flex gap-2 max-sm:flex-col max-sm:items-start *:cursor-pointer",children:[(0,s.jsx)(C.$,{variant:"ghost",title:(0,O.$)("players.action.refresh"),onClick:()=>Q.P.emit("refresh-data"),children:(0,s.jsx)(n.A,{})}),(0,s.jsxs)(ee.MG,{children:[(0,s.jsx)(ee.Sq,{children:(0,s.jsx)(l.A,{})}),(0,s.jsx)(ee.iV,{value:k,placeholder:(0,O.$)("players.search.placeholder"),onChange:e=>N(e.target.value)})]}),(0,s.jsx)(er,{asChild:!0,children:(0,s.jsxs)(C.$,{variant:"outline",children:[(0,s.jsx)(o.A,{}),(0,O.$)("players.banned-ips")]})}),b?(0,s.jsx)(Y.T,{onDisableWhitelist:()=>y(!1),asChild:!0,children:(0,s.jsxs)(C.$,{variant:"outline",children:[(0,s.jsx)(c.A,{}),(0,O.$)("players.edit-whitelist")]})}):(0,s.jsxs)(C.$,{variant:"outline",onClick:async()=>{await (0,K.lE)(!0),await M(),y(!0)},children:[(0,s.jsx)(d.A,{}),(0,O.$)("players.enable-whitelist")]})]})]}),(0,s.jsx)(g,{value:"player-list",children:(0,s.jsx)(f.b,{columns:U,data:[...A.filter(e=>{let{name:a,isOnline:t}=e;return a.toLowerCase().includes(k.toLowerCase())&&t}),...A.filter(e=>{let{name:a,isOnline:t,isOp:s}=e;return a.toLowerCase().includes(k.toLowerCase())&&!t&&s}),...A.filter(e=>{let{name:a,isOnline:t,isOp:s}=e;return a.toLowerCase().includes(k.toLowerCase())&&!t&&!s}),...t],pagination:!0,fallbackMessage:(0,O.$)("players.empty")})}),(0,s.jsx)(g,{value:"banned-list",children:(0,s.jsx)(f.b,{columns:Z,data:P.filter(e=>{let{name:a}=e;return a.toLowerCase().includes(k.toLowerCase())}),pagination:!0,fallbackMessage:(0,O.$)("players.empty")})})]})]})}},53571:(e,a,t)=>{Promise.resolve().then(t.bind(t,31795))},95784:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>h,gC:()=>p,l6:()=>c,yv:()=>d});var s=t(95155);t(12115);var r=t(14582),i=t(66474),n=t(5196),l=t(47863),o=t(53999);function c(e){let{...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"select",...a})}function d(e){let{...a}=e;return(0,s.jsx)(r.WT,{"data-slot":"select-value",...a})}function u(e){let{className:a,size:t="default",children:n,...l}=e;return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...l,children:[n,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"size-4 opacity-50"})})]})}function p(e){let{className:a,children:t,position:i="popper",...n}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(m,{})]})})}function h(e){let{className:a,children:t,...i}=e;return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:t})]})}function x(e){let{className:a,...t}=e;return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(l.A,{className:"size-4"})})}function m(e){let{className:a,...t}=e;return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(i.A,{className:"size-4"})})}}},e=>{e.O(0,[9690,4390,1210,3498,9641,5702,5100,5452,6671,3207,3464,371,5299,9733,3830,154,193,4305,5096,8441,5964,7358],()=>e(e.s=53571)),_N_E=e.O()}]);