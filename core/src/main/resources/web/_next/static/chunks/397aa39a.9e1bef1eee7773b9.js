"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5729],{37396:(e,t,r)=>{var n,i,s,o,a,l,c,u,h=r(3564),m=r(74072),f=r(27105),p=r(37132),d=r(16141),g=r(60499),y=r(43446),v=r(13682),b=r(95265);function S(e,t){if(e.length<t.length)return!1;for(var r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0}function x(e,t){var r=e.length-t.length;return r>0?e.lastIndexOf(t)===r:0===r&&e===t}function A(e){return S(e,"(?i)")?RegExp(e.substring(4),"i"):new RegExp(e)}function M(e,t){if(e===t)return!0;if(null==e||null==t||typeof e!=typeof t||"object"!=typeof e||Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!M(e[r],t[r]))return!1}else{var r,n,i=[];for(n in e)i.push(n);i.sort();var s=[];for(n in t)s.push(n);if(s.sort(),!M(i,s))return!1;for(r=0;r<i.length;r++)if(!M(e[i[r]],t[i[r]]))return!1}return!0}function w(e){return"number"==typeof e}function P(e){return"boolean"==typeof e}!function(e){e[e.Undefined=0]="Undefined",e[e.EnumValueMismatch=1]="EnumValueMismatch",e[e.Deprecated=2]="Deprecated",e[e.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=258]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",e[e.InvalidUnicode=260]="InvalidUnicode",e[e.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",e[e.InvalidCharacter=262]="InvalidCharacter",e[e.PropertyExpected=513]="PropertyExpected",e[e.CommaExpected=514]="CommaExpected",e[e.ColonExpected=515]="ColonExpected",e[e.ValueExpected=516]="ValueExpected",e[e.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",e[e.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",e[e.TrailingComma=519]="TrailingComma",e[e.DuplicateKey=520]="DuplicateKey",e[e.CommentNotPermitted=521]="CommentNotPermitted",e[e.SchemaResolveError=768]="SchemaResolveError"}(n||(n={})),(i||(i={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[d.nw.Markdown,d.nw.PlainText],commitCharactersSupport:!0}}}};var k=(e,t,...r)=>0===r.length?t:t.replaceAll(/{(\d+)}/g,(e,[t])=>t in r?String(r[t]):e),T=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O={"color-hex":{errorMessage:k("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:k("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:k("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:k("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:k("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},V=function(){function e(e,t,r){void 0===r&&(r=0),this.offset=t,this.length=r,this.parent=e}return Object.defineProperty(e.prototype,"children",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},e}();function C(e){return P(e)?e?{}:{not:{}}:e}!function(e){T(function(t,r){var n=e.call(this,t,r)||this;return n.type="null",n.value=null,n},e)}(V),function(e){T(function(t,r,n){var i=e.call(this,t,n)||this;return i.type="boolean",i.value=r,i},e)}(V),function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="array",n.items=[],n}T(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.items},enumerable:!1,configurable:!0})}(V),function(e){T(function(t,r){var n=e.call(this,t,r)||this;return n.type="number",n.isInteger=!0,n.value=NaN,n},e)}(V),function(e){T(function(t,r,n){var i=e.call(this,t,r,n)||this;return i.type="string",i.value="",i},e)}(V),function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.type="property",i.colonOffset=-1,i.keyNode=n,i}T(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!1,configurable:!0})}(V),function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="object",n.properties=[],n}T(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties},enumerable:!1,configurable:!0})}(V),function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(s||(s={}));var E=function(){function e(e,t){void 0===e&&(e=-1),this.focusOffset=e,this.exclude=t,this.schemas=[]}return e.prototype.add=function(e){this.schemas.push(e)},e.prototype.merge=function(e){Array.prototype.push.apply(this.schemas,e.schemas)},e.prototype.include=function(e){var t,r,n;return(-1===this.focusOffset||(t=e,r=this.focusOffset,void 0===n&&(n=!1),r>=t.offset&&r<t.offset+t.length||n&&r===t.offset+t.length))&&e!==this.exclude},e.prototype.newSub=function(){return new e(-1,this.exclude)},e}(),j=function(){function e(){}return Object.defineProperty(e.prototype,"schemas",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.add=function(e){},e.prototype.merge=function(e){},e.prototype.include=function(e){return!0},e.prototype.newSub=function(){return this},e.instance=new e,e}(),I=function(){function e(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}return e.prototype.hasProblems=function(){return!!this.problems.length},e.prototype.mergeAll=function(e){for(var t=0;t<e.length;t++){var r=e[t];this.merge(r)}},e.prototype.merge=function(e){this.problems=this.problems.concat(e.problems)},e.prototype.mergeEnumValues=function(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(var t=0,r=this.problems;t<r.length;t++){var i=r[t];i.code===n.EnumValueMismatch&&(i.message=k("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map(function(e){return JSON.stringify(e)}).join(", ")))}}},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++},e.prototype.compare=function(e){var t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();function $(e){return f.yQ(e)}function F(e,t,r,i){if(e&&i.include(e)){switch(e.type){case"object":!function(e,t,r,n){for(var i=Object.create(null),s=[],o=0,a=e.properties;o<a.length;o++){var l=a[o],c=l.keyNode.value;i[c]=l.valueNode,s.push(c)}if(Array.isArray(t.required))for(var u=0,h=t.required;u<h.length;u++){var m=h[u];if(!i[m]){var f=e.parent&&"property"===e.parent.type&&e.parent.keyNode,p=f?{offset:f.offset,length:f.length}:{offset:e.offset,length:1};r.problems.push({location:p,message:k("MissingRequiredPropWarning",'Missing property "{0}".',m)})}}var d=function(e){for(var t=s.indexOf(e);t>=0;)s.splice(t,1),t=s.indexOf(e)};if(t.properties)for(var g=0,y=Object.keys(t.properties);g<y.length;g++){var m=y[g];d(m);var v=t.properties[m],b=i[m];if(b)if(P(v))if(v)r.propertiesMatches++,r.propertiesValueMatches++;else{var l=b.parent;r.problems.push({location:{offset:l.keyNode.offset,length:l.keyNode.length},message:t.errorMessage||k("DisallowedExtraPropWarning","Property {0} is not allowed.",m)})}else{var S=new I;F(b,v,S,n),r.mergePropertyMatch(S)}}if(t.patternProperties)for(var x=0,M=Object.keys(t.patternProperties);x<M.length;x++)for(var T=M[x],O=A(T),V=0,E=s.slice(0);V<E.length;V++){var m=E[V];if(O.test(m)){d(m);var b=i[m];if(b){var v=t.patternProperties[T];if(P(v))if(v)r.propertiesMatches++,r.propertiesValueMatches++;else{var l=b.parent;r.problems.push({location:{offset:l.keyNode.offset,length:l.keyNode.length},message:t.errorMessage||k("DisallowedExtraPropWarning","Property {0} is not allowed.",m)})}else{var S=new I;F(b,v,S,n),r.mergePropertyMatch(S)}}}}if("object"==typeof t.additionalProperties)for(var $=0;$<s.length;$++){var m=s[$],b=i[m];if(b){var S=new I;F(b,t.additionalProperties,S,n),r.mergePropertyMatch(S)}}else if(!1===t.additionalProperties&&s.length>0)for(var N=0;N<s.length;N++){var m=s[N],b=i[m];if(b){var l=b.parent;r.problems.push({location:{offset:l.keyNode.offset,length:l.keyNode.length},message:t.errorMessage||k("DisallowedExtraPropWarning","Property {0} is not allowed.",m)})}}if(w(t.maxProperties)&&e.properties.length>t.maxProperties&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties)}),w(t.minProperties)&&e.properties.length<t.minProperties&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties)}),t.dependencies)for(var D=0,R=Object.keys(t.dependencies);D<R.length;D++){var c=R[D];if(i[c]){var W=t.dependencies[c];if(Array.isArray(W))for(var L=0;L<W.length;L++){var _=W[L];i[_]?r.propertiesValueMatches++:r.problems.push({location:{offset:e.offset,length:e.length},message:k("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",_,c)})}else{var v=C(W);if(v){var S=new I;F(e,v,S,n),r.mergePropertyMatch(S)}}}}var U=C(t.propertyNames);if(U)for(var q=0,B=e.properties;q<B.length;q++){var c=B[q].keyNode;c&&F(c,U,r,j.instance)}}(e,t,r,i);break;case"array":!function(e,t,r,n){if(Array.isArray(t.items)){for(var i=t.items,s=0;s<i.length;s++){var o=C(i[s]),a=new I,l=e.items[s];l?(F(l,o,a,n),r.mergePropertyMatch(a)):e.items.length>=i.length&&r.propertiesValueMatches++}if(e.items.length>i.length)if("object"==typeof t.additionalItems)for(var c=i.length;c<e.items.length;c++){var a=new I;F(e.items[c],t.additionalItems,a,n),r.mergePropertyMatch(a)}else!1===t.additionalItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",i.length)})}else{var u=C(t.items);if(u)for(var h=0,m=e.items;h<m.length;h++){var l=m[h],a=new I;F(l,u,a,n),r.mergePropertyMatch(a)}}var f=C(t.contains);if(f&&(e.items.some(function(e){var t=new I;return F(e,f,t,j.instance),!t.hasProblems()})||r.problems.push({location:{offset:e.offset,length:e.length},message:t.errorMessage||k("requiredItemMissingWarning","Array does not contain required item.")})),w(t.minItems)&&e.items.length<t.minItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems)}),w(t.maxItems)&&e.items.length>t.maxItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems)}),!0===t.uniqueItems){var p=$(e);p.some(function(e,t){return t!==p.lastIndexOf(e)})&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("uniqueItemsWarning","Array has duplicate items.")})}}(e,t,r,i);break;case"string":var s=e,o=t,a=r;if(w(o.minLength)&&s.value.length<o.minLength&&a.problems.push({location:{offset:s.offset,length:s.length},message:k("minLengthWarning","String is shorter than the minimum length of {0}.",o.minLength)}),w(o.maxLength)&&s.value.length>o.maxLength&&a.problems.push({location:{offset:s.offset,length:s.length},message:k("maxLengthWarning","String is longer than the maximum length of {0}.",o.maxLength)}),"string"==typeof o.pattern&&(A(o.pattern).test(s.value)||a.problems.push({location:{offset:s.offset,length:s.length},message:o.patternErrorMessage||o.errorMessage||k("patternWarning",'String does not match the pattern of "{0}".',o.pattern)})),o.format)switch(o.format){case"uri":case"uri-reference":var l=void 0;if(s.value){var c=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(s.value);c?c[2]||"uri"!==o.format||(l=k("uriSchemeMissing","URI with a scheme is expected.")):l=k("uriMissing","URI is expected.")}else l=k("uriEmpty","URI expected.");l&&a.problems.push({location:{offset:s.offset,length:s.length},message:o.patternErrorMessage||o.errorMessage||k("uriFormatWarning","String is not a URI: {0}",l)});break;case"color-hex":case"date-time":case"date":case"time":case"email":var u=O[o.format];s.value&&u.pattern.exec(s.value)||a.problems.push({location:{offset:s.offset,length:s.length},message:o.patternErrorMessage||o.errorMessage||u.errorMessage})}break;case"number":!function(e,t,r,n){var i=e.value;function s(e){var t,r=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(e.toString());return r&&{value:Number(r[1]+(r[2]||"")),multiplier:((null==(t=r[2])?void 0:t.length)||0)-(parseInt(r[3])||0)}}if(w(t.multipleOf)){var o=-1;if(Number.isInteger(t.multipleOf))o=i%t.multipleOf;else{var a=s(t.multipleOf),l=s(i);if(a&&l){var c=Math.pow(10,Math.abs(l.multiplier-a.multiplier));l.multiplier<a.multiplier?l.value*=c:a.value*=c,o=l.value%a.value}}0!==o&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf)})}function u(e,t){return w(t)?t:P(t)&&t?e:void 0}function h(e,t){if(!P(t)||!t)return e}var m=u(t.minimum,t.exclusiveMinimum);w(m)&&i<=m&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",m)});var f=u(t.maximum,t.exclusiveMaximum);w(f)&&i>=f&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",f)});var p=h(t.minimum,t.exclusiveMinimum);w(p)&&i<p&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("minimumWarning","Value is below the minimum of {0}.",p)});var d=h(t.maximum,t.exclusiveMaximum);w(d)&&i>d&&r.problems.push({location:{offset:e.offset,length:e.length},message:k("maximumWarning","Value is above the maximum of {0}.",d)})}(e,t,r,0);break;case"property":return F(e.valueNode,t,r,i)}(function(){function s(t){return e.type===t||"integer"===t&&"number"===e.type&&e.isInteger}if(Array.isArray(t.type)?t.type.some(s)||r.problems.push({location:{offset:e.offset,length:e.length},message:t.errorMessage||k("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", "))}):t.type&&!s(t.type)&&r.problems.push({location:{offset:e.offset,length:e.length},message:t.errorMessage||k("typeMismatchWarning",'Incorrect type. Expected "{0}".',t.type)}),Array.isArray(t.allOf))for(var o,a,l,c,u,h=0,m=t.allOf;h<m.length;h++)F(e,C(m[h]),r,i);var f=C(t.not);if(f){var p=new I,g=i.newSub();F(e,f,p,g),p.hasProblems()||r.problems.push({location:{offset:e.offset,length:e.length},message:k("notSchemaWarning","Matches a schema that is not allowed.")});for(var y=0,v=g.schemas;y<v.length;y++){var b=v[y];b.inverted=!b.inverted,i.add(b)}}var S=function(t,n){for(var s=[],o=void 0,a=0;a<t.length;a++){var l=C(t[a]),c=new I,u=i.newSub();if(F(e,l,c,u),c.hasProblems()||s.push(l),o)if(n||c.hasProblems()||o.validationResult.hasProblems()){var h=c.compare(o.validationResult);h>0?o={schema:l,validationResult:c,matchingSchemas:u}:0===h&&(o.matchingSchemas.merge(u),o.validationResult.mergeEnumValues(c))}else o.matchingSchemas.merge(u),o.validationResult.propertiesMatches+=c.propertiesMatches,o.validationResult.propertiesValueMatches+=c.propertiesValueMatches;else o={schema:l,validationResult:c,matchingSchemas:u}}return s.length>1&&n&&r.problems.push({location:{offset:e.offset,length:1},message:k("oneOfWarning","Matches multiple schemas when only one must validate.")}),o&&(r.merge(o.validationResult),r.propertiesMatches+=o.validationResult.propertiesMatches,r.propertiesValueMatches+=o.validationResult.propertiesValueMatches,i.merge(o.matchingSchemas)),s.length};Array.isArray(t.anyOf)&&S(t.anyOf,!1),Array.isArray(t.oneOf)&&S(t.oneOf,!0);var x=function(t){var n=new I,s=i.newSub();F(e,C(t),n,s),r.merge(n),r.propertiesMatches+=n.propertiesMatches,r.propertiesValueMatches+=n.propertiesValueMatches,i.merge(s)},A=C(t.if);if(A&&(o=C(t.then),a=C(t.else),l=C(A),c=new I,F(e,l,c,u=i.newSub()),i.merge(u),c.hasProblems()?a&&x(a):o&&x(o)),Array.isArray(t.enum)){for(var w=$(e),P=!1,T=0,O=t.enum;T<O.length;T++)if(M(w,O[T])){P=!0;break}r.enumValues=t.enum,r.enumValueMatch=P,P||r.problems.push({location:{offset:e.offset,length:e.length},code:n.EnumValueMismatch,message:t.errorMessage||k("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map(function(e){return JSON.stringify(e)}).join(", "))})}if(void 0!==t.const){var w=$(e);M(w,t.const)?r.enumValueMatch=!0:(r.problems.push({location:{offset:e.offset,length:e.length},code:n.EnumValueMismatch,message:t.errorMessage||k("constWarning","Value must be {0}.",JSON.stringify(t.const))}),r.enumValueMatch=!1),r.enumValues=[t.const]}t.deprecationMessage&&e.parent&&r.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:d.h_.Warning,message:t.deprecationMessage,code:n.Deprecated})})(),i.add({node:e,schema:t})}}!function(){function e(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=[]),this.root=e,this.syntaxErrors=t,this.comments=r}e.prototype.getNodeFromOffset=function(e,t){if(void 0===t&&(t=!1),this.root)return f.SM(this.root,e,t)},e.prototype.visit=function(e){if(this.root){var t=function(r){var n=e(r),i=r.children;if(Array.isArray(i))for(var s=0;s<i.length&&n;s++)n=t(i[s]);return n};t(this.root)}},e.prototype.validate=function(e,t,r){if(void 0===r&&(r=d.h_.Warning),this.root&&t){var n=new I;return F(this.root,t,n,j.instance),n.problems.map(function(t){var n,i=d.Q6.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length));return d.oQ.create(i,t.message,null!=(n=t.severity)?n:r,t.code)})}},e.prototype.getMatchingSchemas=function(e,t,r){void 0===t&&(t=-1);var n=new E(t,r);return this.root&&e&&F(this.root,e,new I,n),n.schemas}}();var N=function(){function e(e,t){this.globWrappers=[];try{for(var r=0;r<e.length;r++){var n=e[r],i="!"!==n[0];i||(n=n.substring(1)),n.length>0&&("/"===n[0]&&(n=n.substring(1)),this.globWrappers.push({regexp:function(e,t){if("string"!=typeof e)throw TypeError("Expected a string");for(var r,n=String(e),i="",s=!!t&&!!t.extended,o=!!t&&!!t.globstar,a=!1,l=t&&"string"==typeof t.flags?t.flags:"",c=0,u=n.length;c<u;c++)switch(r=n[c]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":i+="\\"+r;break;case"?":if(s){i+=".";break}case"[":case"]":if(s){i+=r;break}case"{":if(s){a=!0,i+="(";break}case"}":if(s){a=!1,i+=")";break}case",":if(a){i+="|";break}i+="\\"+r;break;case"*":for(var h=n[c-1],m=1;"*"===n[c+1];)m++,c++;var f=n[c+1];o?m>1&&("/"===h||void 0===h||"{"===h||","===h)&&("/"===f||void 0===f||","===f||"}"===f)?("/"===f?c++:"/"===h&&i.endsWith("\\/")&&(i=i.substr(0,i.length-2)),i+="((?:[^/]*(?:/|$))*)"):i+="([^/]*)":i+=".*";break;default:i+=r}return l&&~l.indexOf("g")||(i="^"+i+"$"),new RegExp(i,l)}("**/"+n,{extended:!0,globstar:!0}),include:i}))}this.uris=t}catch(e){this.globWrappers.length=0,this.uris=[]}}return e.prototype.matchesPattern=function(e){for(var t=!1,r=0,n=this.globWrappers;r<n.length;r++){var i=n[r],s=i.regexp,o=i.include;s.test(e)&&(t=o)}return t},e.prototype.getURIs=function(){return this.uris},e}(),D=function(){function e(e,t,r){this.service=e,this.url=t,this.dependencies={},r&&(this.unresolvedSchema=this.service.promise.resolve(new R(r)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(function(t){return e.service.resolveSchemaContent(t,e.url,e.dependencies)})),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies={}},e}(),R=function(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t},W=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){var t=this.getSectionRecursive(e,this.schema);if(t)return C(t)},e.prototype.getSectionRecursive=function(e,t){if(!t||"boolean"==typeof t||0===e.length)return t;var r=e.shift();if(t.properties&&(t.properties[r],1))return this.getSectionRecursive(e,t.properties[r]);if(t.patternProperties)for(var n=0,i=Object.keys(t.patternProperties);n<i.length;n++){var s=i[n];if(A(s).test(r))return this.getSectionRecursive(e,t.patternProperties[s])}else if("object"==typeof t.additionalProperties)return this.getSectionRecursive(e,t.additionalProperties);else if(r.match("[0-9]+")){if(Array.isArray(t.items)){var o=parseInt(r,10);if(!isNaN(o)&&t.items[o])return this.getSectionRecursive(e,t.items[o])}else if(t.items)return this.getSectionRecursive(e,t.items)}},e}(),L=function(){function e(e,t,r){this.contextService=t,this.requestService=e,this.promiseConstructor=r||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}return e.prototype.getRegisteredSchemaIds=function(e){return Object.keys(this.registeredSchemasIds).filter(function(t){var r=p.r.parse(t).scheme;return"schemaservice"!==r&&(!e||e(r))})},Object.defineProperty(e.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){var t=this;this.cachedSchemaForResource=void 0;for(var r=!1,n=[e=U(e)],i=Object.keys(this.schemasById).map(function(e){return t.schemasById[e]});n.length;)for(var s=n.pop(),o=0;o<i.length;o++){var a=i[o];a&&(a.url===s||a.dependencies[s])&&(a.url!==s&&n.push(a.url),a.clearSchema(),i[o]=void 0,r=!0)}return r},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var r in t){var n=U(r);this.contributionSchemas[n]=this.addSchemaHandle(n,t[r])}}if(Array.isArray(e.schemaAssociations))for(var i=e.schemaAssociations,s=0;s<i.length;s++){var o=i[s],a=o.uris.map(U),l=this.addFilePatternAssociation(o.pattern,a);this.contributionAssociations.push(l)}},e.prototype.addSchemaHandle=function(e,t){var r=new D(this,e,t);return this.schemasById[e]=r,r},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.addFilePatternAssociation=function(e,t){var r=new N(e,t);return this.filePatternAssociations.push(r),r},e.prototype.registerExternalSchema=function(e,t,r){var n=U(e);return this.registeredSchemasIds[n]=!0,this.cachedSchemaForResource=void 0,t&&this.addFilePatternAssociation(t,[e]),r?this.addSchemaHandle(n,r):this.getOrAddSchemaHandle(n)},e.prototype.clearExternalSchemas=function(){for(var e in this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0,this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(var t=0,r=this.contributionAssociations;t<r.length;t++){var n=r[t];this.filePatternAssociations.push(n)}},e.prototype.getResolvedSchema=function(e){var t=U(e),r=this.schemasById[t];return r?r.getResolvedSchema():this.promise.resolve(void 0)},e.prototype.loadSchema=function(e){if(!this.requestService){var t=k("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",q(e));return this.promise.resolve(new R({},[t]))}return this.requestService(e).then(function(t){if(!t)return new R({},[k("json.schema.nocontent","Unable to load schema from '{0}': No content.",q(e))]);var r=[];return new R(f.qg(t,r),r.length?[k("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",q(e),r[0].offset)]:[])},function(t){var r=t.toString(),n=t.toString().split("Error: ");return n.length>1&&(r=n[1]),x(r,".")&&(r=r.substr(0,r.length-1)),new R({},[k("json.schema.nocontent","Unable to load schema from '{0}': {1}.",q(e),r)])})},e.prototype.resolveSchemaContent=function(e,t,r){var n=this,i=e.errors.slice(0),s=e.schema;if(s.$schema){var o=U(s.$schema);if("http://json-schema.org/draft-03/schema"===o)return this.promise.resolve(new W({},[k("json.schema.draft03.notsupported","Draft-03 schemas are not supported.")]));"https://json-schema.org/draft/2019-09/schema"===o&&i.push(k("json.schema.draft201909.notsupported","Draft 2019-09 schemas are not yet fully supported."))}var a=this.contextService,l=function(e,t){if(!t)return e;var r=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some(function(e){return!(r=r[e=e.replace(/~1/g,"/").replace(/~0/g,"~")])}),r},c=function(e,t,r,n){var s=n?decodeURIComponent(n):void 0,o=l(t,s);if(o)for(var a in o)o.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=o[a]);else i.push(k("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",s,r))},u=function(e,t,r,s,o){a&&!/^[A-Za-z][A-Za-z0-9+\-.+]*:\/\/.*/.test(t)&&(t=a.resolveRelativePath(t,s)),t=U(t);var l=n.getOrAddSchemaHandle(t);return l.getUnresolvedSchema().then(function(n){if(o[t]=!0,n.errors.length){var s=r?t+"#"+r:t;i.push(k("json.schema.problemloadingref","Problems loading reference '{0}': {1}",s,n.errors[0]))}return c(e,n.schema,t,r),h(e,n.schema,t,l.dependencies)})},h=function(e,t,r,i){if(!e||"object"!=typeof e)return Promise.resolve(null);for(var s=[e],o=[],a=[],l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++){var n=e[r];"object"==typeof n&&s.push(n)}},h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++){var n=e[r];if("object"==typeof n)for(var i in n){var o=n[i];"object"==typeof o&&s.push(o)}}},m=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++){var n=e[r];if(Array.isArray(n))for(var i=0;i<n.length;i++){var o=n[i];"object"==typeof o&&s.push(o)}}};s.length;){var f=s.pop();o.indexOf(f)>=0||(o.push(f),function(e){for(var n=[];e.$ref;){var s=e.$ref,o=s.split("#",2);if(delete e.$ref,o[0].length>0)return void a.push(u(e,o[0],o[1],r,i));-1===n.indexOf(s)&&(c(e,t,r,o[1]),n.push(s))}l(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),h(e.definitions,e.properties,e.patternProperties,e.dependencies),m(e.anyOf,e.allOf,e.oneOf,e.items)}(f))}return n.promise.all(a)};return h(s,s,t,r).then(function(e){return new W(s,i)})},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var r=t.root.properties.filter(function(e){return"$schema"===e.keyNode.value&&e.valueNode&&"string"===e.valueNode.type});if(r.length>0){var n=r[0].valueNode;if(n&&"string"===n.type){var i=$(n);if(i&&S(i,".")&&this.contextService&&(i=this.contextService.resolveRelativePath(i,e)),i){var s=U(i);return this.getOrAddSchemaHandle(s).getResolvedSchema()}}}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===e)return this.cachedSchemaForResource.resolvedSchema;for(var o=Object.create(null),a=[],l=function(e){try{return p.r.parse(e).with({fragment:null,query:null}).toString()}catch(t){return e}}(e),c=0,u=this.filePatternAssociations;c<u.length;c++){var h=u[c];if(h.matchesPattern(l))for(var m=0,f=h.getURIs();m<f.length;m++){var d=f[m];o[d]||(a.push(d),o[d]=!0)}}var g=a.length>0?this.createCombinedSchema(e,a).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource:e,resolvedSchema:g},g},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var r="schemaservice://combinedSchema/"+encodeURIComponent(e),n={allOf:t.map(function(e){return{$ref:e}})};return this.addSchemaHandle(r,n)},e.prototype.getMatchingSchemas=function(e,t,r){if(r){var n=r.id||"schemaservice://untitled/matchingSchemas/"+_++;return this.resolveSchemaContent(new R(r),n,{}).then(function(e){return t.getMatchingSchemas(e.schema).filter(function(e){return!e.inverted})})}return this.getSchemaForResource(e.uri,t).then(function(e){return e?t.getMatchingSchemas(e.schema).filter(function(e){return!e.inverted}):[]})},e}(),_=0;function U(e){try{return p.r.parse(e).toString()}catch(t){return e}}function q(e){try{var t=p.r.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}function B(e){try{return RegExp(e,"u")}catch(t){return new RegExp(e)}}function Q(e){return"number"==typeof e}function K(e){return void 0!==e}function Y(e){return"boolean"==typeof e}function H(e){return"string"==typeof e}function J(e){let t=e.type&&e.closestTitle;return e.title?e.title:e.$id?G(e.$id):e.$ref||e._$ref?G(e.$ref||e._$ref):Array.isArray(e.type)?e.type.join(" | "):t?e.type.concat("(",e.closestTitle,")"):e.type||e.closestTitle}function G(e){let t=e.match(/^(?:.*\/)?(.*?)(?:\.schema\.json)?$/),r=!!t&&t[1];return r||(r="typeNotFound",console.error(`$ref (${e}) not parsed properly`)),r}function z(e,t){let r=p.r.parse(t),n=y.basename(r.fsPath);return(y.extname(r.fsPath)||(n+=".json"),Object.getOwnPropertyDescriptor(e,"name"))?Object.getOwnPropertyDescriptor(e,"name").value+` (${n})`:e.title?e.description?e.title+" - "+e.description+` (${n})`:e.title+` (${n})`:n}function X(e){return!!(e.anyOf||e.allOf||e.oneOf)}var Z=function(){function e(e,t){this.jsonSchemaService=e,this.promise=t,this.validationEnabled=!0}return e.prototype.configure=function(e){e&&(this.validationEnabled=!1!==e.validate,this.commentSeverity=e.allowComments?void 0:d.h_.Error)},e.prototype.doValidation=function(e,t,r,i){var s=this;if(!this.validationEnabled)return this.promise.resolve([]);var o=[],a={},l=function(e){var t=e.range.start.line+" "+e.range.start.character+" "+e.message;a[t]||(a[t]=!0,o.push(e))},c=function(i){var a=(null==r?void 0:r.trailingCommas)?et(r.trailingCommas):d.h_.Error,c=(null==r?void 0:r.comments)?et(r.comments):s.commentSeverity,u=(null==r?void 0:r.schemaValidation)?et(r.schemaValidation):d.h_.Warning,h=(null==r?void 0:r.schemaRequest)?et(r.schemaRequest):d.h_.Warning;if(i){if(i.errors.length&&t.root&&h){var m=t.root,f="object"===m.type?m.properties[0]:void 0;if(f&&"$schema"===f.keyNode.value){var p=f.valueNode||f,g=d.Q6.create(e.positionAt(p.offset),e.positionAt(p.offset+p.length));l(d.oQ.create(g,i.errors[0],h,n.SchemaResolveError))}else{var g=d.Q6.create(e.positionAt(m.offset),e.positionAt(m.offset+1));l(d.oQ.create(g,i.errors[0],h,n.SchemaResolveError))}}else if(u){var y=t.validate(e,i.schema,u);y&&y.forEach(l)}(function e(t){if(t&&"object"==typeof t){if(P(t.allowComments))return t.allowComments;if(t.allOf)for(var r=0,n=t.allOf;r<n.length;r++){var i=e(n[r]);if(P(i))return i}}})(i.schema)&&(c=void 0),function e(t){if(t&&"object"==typeof t){if(P(t.allowTrailingCommas))return t.allowTrailingCommas;if(P(t.allowsTrailingCommas))return t.allowsTrailingCommas;if(t.allOf)for(var r=0,n=t.allOf;r<n.length;r++){var i=e(n[r]);if(P(i))return i}}}(i.schema)&&(a=void 0)}for(var v=0,b=t.syntaxErrors;v<b.length;v++){var S=b[v];if(S.code===n.TrailingComma){if("number"!=typeof a)continue;S.severity=a}l(S)}if("number"==typeof c){var x=k("InvalidCommentToken","Comments are not permitted in JSON.");t.comments.forEach(function(e){l(d.oQ.create(e,x,c,n.CommentNotPermitted))})}return o};if(i){var u=i.id||"schemaservice://untitled/"+ee++;return this.jsonSchemaService.resolveSchemaContent(new R(i),u,{}).then(function(e){return c(e)})}return this.jsonSchemaService.getSchemaForResource(e.uri,t).then(function(e){return c(e)})},e}(),ee=0;function et(e){switch(e){case"error":return d.h_.Error;case"warning":return d.h_.Warning}}function er(e){return e<48?0:e<=57?e-48:(e<97&&(e+=32),e>=97&&e<=102)?e-97+10:0}var en=function(){function e(e){this.schemaService=e}return e.prototype.findDocumentSymbols=function(e,t,r){var n=this;void 0===r&&(r={resultLimit:Number.MAX_VALUE});var i=t.root;if(!i)return[];var s=r.resultLimit||Number.MAX_VALUE,o=e.uri;if(("vscode://defaultsettings/keybindings.json"===o||x(o.toLowerCase(),"/user/keybindings.json"))&&"array"===i.type){for(var a=[],l=0,c=i.items;l<c.length;l++){var u=c[l];if("object"===u.type)for(var h=0,m=u.properties;h<m.length;h++){var f=m[h];if("key"===f.keyNode.value&&f.valueNode){var p=d.aZ.create(e.uri,ei(e,u));if(a.push({name:$(f.valueNode),kind:d.v0.Function,location:p}),--s<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),a}}}return a}for(var g=[{node:i,containerName:""}],y=0,v=!1,b=[],S=function(t,r){"array"===t.type?t.items.forEach(function(e){e&&g.push({node:e,containerName:r})}):"object"===t.type&&t.properties.forEach(function(t){var i=t.valueNode;if(i)if(s>0){s--;var o=d.aZ.create(e.uri,ei(e,t)),a=r?r+"."+t.keyNode.value:t.keyNode.value;b.push({name:n.getKeyLabel(t),kind:n.getSymbolKind(i.type),location:o,containerName:r}),g.push({node:i,containerName:a})}else v=!0})};y<g.length;){var A=g[y++];S(A.node,A.containerName)}return v&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),b},e.prototype.findDocumentSymbols2=function(e,t,r){var n=this;void 0===r&&(r={resultLimit:Number.MAX_VALUE});var i=t.root;if(!i)return[];var s=r.resultLimit||Number.MAX_VALUE,o=e.uri;if(("vscode://defaultsettings/keybindings.json"===o||x(o.toLowerCase(),"/user/keybindings.json"))&&"array"===i.type){for(var a=[],l=0,c=i.items;l<c.length;l++){var u=c[l];if("object"===u.type)for(var h=0,m=u.properties;h<m.length;h++){var f=m[h];if("key"===f.keyNode.value&&f.valueNode){var p=ei(e,u),g=ei(e,f.keyNode);if(a.push({name:$(f.valueNode),kind:d.v0.Function,range:p,selectionRange:g}),--s<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),a}}}return a}for(var y=[],v=[{node:i,result:y}],b=0,S=!1,A=function(t,r){"array"===t.type?t.items.forEach(function(t,i){if(t)if(s>0){s--;var o=ei(e,t),a={name:String(i),kind:n.getSymbolKind(t.type),range:o,selectionRange:o,children:[]};r.push(a),v.push({result:a.children,node:t})}else S=!0}):"object"===t.type&&t.properties.forEach(function(t){var i=t.valueNode;if(i)if(s>0){s--;var o=ei(e,t),a=ei(e,t.keyNode),l=[],c={name:n.getKeyLabel(t),kind:n.getSymbolKind(i.type),range:o,selectionRange:a,children:l,detail:n.getDetail(i)};r.push(c),v.push({result:l,node:i})}else S=!0})};b<v.length;){var M=v[b++];A(M.node,M.result)}return S&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),y},e.prototype.getSymbolKind=function(e){switch(e){case"object":return d.v0.Module;case"string":return d.v0.String;case"number":return d.v0.Number;case"array":return d.v0.Array;case"boolean":return d.v0.Boolean;default:return d.v0.Variable}},e.prototype.getKeyLabel=function(e){var t=e.keyNode.value;return(t&&(t=t.replace(/[\n]/g,"â†µ")),t&&t.trim())?t:'"'+t+'"'},e.prototype.getDetail=function(e){if(e){if("boolean"===e.type||"number"===e.type||"null"===e.type||"string"===e.type)return String(e.value);else if("array"===e.type)return e.children.length?void 0:"[]";else if("object"===e.type)return e.children.length?void 0:"{}"}},e.prototype.findDocumentColors=function(e,t,r){return this.schemaService.getSchemaForResource(e.uri,t).then(function(n){var i=[];if(n)for(var s=r&&"number"==typeof r.resultLimit?r.resultLimit:Number.MAX_VALUE,o=t.getMatchingSchemas(n.schema),a={},l=0;l<o.length;l++){var c=o[l];if(!c.inverted&&c.schema&&("color"===c.schema.format||"color-hex"===c.schema.format)&&c.node&&"string"===c.node.type){var u=String(c.node.offset);if(!a[u]){var h=function(e){if("#"===e[0])switch(e.length){case 4:return{red:17*er(e.charCodeAt(1))/255,green:17*er(e.charCodeAt(2))/255,blue:17*er(e.charCodeAt(3))/255,alpha:1};case 5:return{red:17*er(e.charCodeAt(1))/255,green:17*er(e.charCodeAt(2))/255,blue:17*er(e.charCodeAt(3))/255,alpha:17*er(e.charCodeAt(4))/255};case 7:return{red:(16*er(e.charCodeAt(1))+er(e.charCodeAt(2)))/255,green:(16*er(e.charCodeAt(3))+er(e.charCodeAt(4)))/255,blue:(16*er(e.charCodeAt(5))+er(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*er(e.charCodeAt(1))+er(e.charCodeAt(2)))/255,green:(16*er(e.charCodeAt(3))+er(e.charCodeAt(4)))/255,blue:(16*er(e.charCodeAt(5))+er(e.charCodeAt(6)))/255,alpha:(16*er(e.charCodeAt(7))+er(e.charCodeAt(8)))/255}}}($(c.node));if(h){var m=ei(e,c.node);i.push({color:h,range:m})}if(a[u]=!0,--s<=0){r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(e.uri);break}}}}return i})},e.prototype.getColorPresentations=function(e,t,r,n){var i,s=[],o=Math.round(255*r.red),a=Math.round(255*r.green),l=Math.round(255*r.blue);function c(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}return s.push({label:i=1===r.alpha?"#"+c(o)+c(a)+c(l):"#"+c(o)+c(a)+c(l)+c(Math.round(255*r.alpha)),textEdit:d.mF.replace(n,JSON.stringify(i))}),s},e}();function ei(e,t){return d.Q6.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}function es(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function eo(e,t){for(let r of t.documents)if(r.internalDocument&&r.internalDocument.range[0]<=e&&r.internalDocument.range[2]>=e)return r;return 1===t.documents.length?t.documents[0]:null}function ea(e){let t=["mapping","scalar","sequence"];return e?e.filter(e=>{if("string"==typeof e){let r=e.split(" "),n=r[1]&&r[1].toLowerCase()||"scalar";return"map"!==n&&-1!==t.indexOf(n)}return!1}):[]}function el(e,t){if(!t||!e||t.length!==e.length)return!1;for(let r=e.length-1;r>=0;r--)if(e[r]!==t[r])return!1;return!0}var ec="Property {0} is not allowed.",eu={"color-hex":{errorMessage:k("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:k("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:k("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:k("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:k("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},ipv4:{errorMessage:k("ipv4FormatWarning","String does not match IPv4 format."),pattern:/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/},ipv6:{errorMessage:k("ipv6FormatWarning","String does not match IPv6 format."),pattern:/^([0-9a-f]|:){1,4}(:([0-9a-f]{0,4})*){1,7}$/i}},eh="YAML",em="yaml-schema: ";!function(e){e.missingRequiredPropWarning="missingRequiredPropWarning",e.typeMismatchWarning="typeMismatchWarning",e.constWarning="constWarning"}(o||(o={}));var ef={[o.missingRequiredPropWarning]:'Missing property "{0}".',[o.typeMismatchWarning]:'Incorrect type. Expected "{0}".',[o.constWarning]:"Value must be {0}."},ep=class{constructor(e,t,r,n){this.offset=r,this.length=n,this.parent=e,this.internalNode=t}getNodeFromOffsetEndInclusive(e){let t=[],r=n=>{if(e>=n.offset&&e<=n.offset+n.length){let i=n.children;for(let n=0;n<i.length&&i[n].offset<=e;n++){let e=r(i[n]);e&&t.push(e)}return n}return null},n=r(this),i=Number.MAX_VALUE,s=null;for(let r of t){let t=r.length+r.offset-e+(e-r.offset);t<i&&(s=r,i=t)}return s||n}get children(){return[]}toString(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")}},ed=class extends ep{constructor(e,t,r,n){super(e,t,r,n),this.type="null",this.value=null}},eg=class extends ep{constructor(e,t,r,n,i,s){super(e,t,i,s),this.type="boolean",this.value=r,this.source=n}},ey=class extends ep{constructor(e,t,r,n){super(e,t,r,n),this.type="array",this.items=[]}get children(){return this.items}},ev=class extends ep{constructor(e,t,r,n){super(e,t,r,n),this.type="number",this.isInteger=!0,this.value=NaN}},eb=class extends ep{constructor(e,t,r,n){super(e,t,r,n),this.type="string",this.value=""}},eS=class extends ep{constructor(e,t,r,n){super(e,t,r,n),this.type="property",this.colonOffset=-1}get children(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]}},ex=class extends ep{constructor(e,t,r,n){super(e,t,r,n),this.type="object",this.properties=[]}get children(){return this.properties}};function eA(e){if(void 0!==e)return Y(e)?e?{}:{not:{}}:("object"!=typeof e&&(console.warn(`Wrong schema: ${JSON.stringify(e)}, it MUST be an Object or Boolean`),e={type:e}),e)}!function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(a||(a={}));var eM=class e{constructor(e=-1,t=null){this.focusOffset=e,this.exclude=t,this.schemas=[]}add(e){this.schemas.push(e)}merge(e){this.schemas.push(...e.schemas)}include(e){return(-1===this.focusOffset||eT(e,this.focusOffset))&&e!==this.exclude}newSub(){return new e(-1,this.exclude)}},ew=class{constructor(){}get schemas(){return[]}add(e){}merge(e){}include(e){return!0}newSub(){return this}};ew.instance=new ew;var eP=class{constructor(e){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,e?this.enumValues=[]:this.enumValues=null}hasProblems(){return!!this.problems.length}mergeAll(e){for(let t of e)this.merge(t)}merge(e){this.problems=this.problems.concat(e.problems)}mergeEnumValues(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues)for(let t of(this.enumValues=this.enumValues.concat(e.enumValues),this.problems))t.code===n.EnumValueMismatch&&(t.message=k("enumWarning","Value is not accepted. Valid values: {0}.",[...new Set(this.enumValues)].map(e=>JSON.stringify(e)).join(", ")))}mergeWarningGeneric(e,t){var r,n,i;if(null==(r=this.problems)?void 0:r.length)for(let r of t)for(let t of this.problems.filter(e=>e.problemType===r)){let s=null==(n=e.problems)?void 0:n.find(e=>e.problemType===r&&t.location.offset===e.location.offset&&(r!==o.missingRequiredPropWarning||el(e.problemArgs,t.problemArgs)));s&&((null==(i=s.problemArgs)?void 0:i.length)&&(s.problemArgs.filter(e=>!t.problemArgs.includes(e)).forEach(e=>t.problemArgs.push(e)),t.message=ej(t.problemType,t.problemArgs)),this.mergeSources(s,t))}}mergePropertyMatch(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&this.primaryValueMatches++}mergeSources(e,t){let r=e.source.replace(em,"");t.source.includes(r)||(t.source=t.source+" | "+r),t.schemaUri.includes(e.schemaUri[0])||(t.schemaUri=t.schemaUri.concat(e.schemaUri))}compareGeneric(e){let t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesMatches-e.propertiesMatches}compareKubernetes(e){let t=this.hasProblems();return this.propertiesMatches!==e.propertiesMatches?this.propertiesMatches-e.propertiesMatches:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:t!==e.hasProblems()?t?-1:1:this.propertiesMatches-e.propertiesMatches}};function ek(e){switch(e.type){case"array":return e.children.map(ek);case"object":{let t=Object.create(null);for(let r=0,n=e.children;r<n.length;r++){let e=n[r],i=e.children[1];i&&(t[e.children[0].value]=ek(i))}return t}case"null":case"string":case"number":return e.value;case"boolean":return e.source;default:return}}function eT(e,t,r=!1){return t>=e.offset&&t<=e.offset+e.length||r&&t===e.offset+e.length}var eO=class{constructor(e,t=[],r=[]){this.root=e,this.syntaxErrors=t,this.comments=r}getNodeFromOffset(e,t=!1){if(this.root)return function e(t,r,n){if(void 0===n&&(n=!1),eT(t,r,n)){let i=t.children;if(Array.isArray(i))for(let t=0;t<i.length&&i[t].offset<=r;t++){let s=e(i[t],r,n);if(s)return s}return t}}(this.root,e,t)}getNodeFromOffsetEndInclusive(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)}visit(e){if(this.root){let t=r=>{let n=e(r),i=r.children;if(Array.isArray(i))for(let e=0;e<i.length&&n;e++)n=t(i[e]);return n};t(this.root)}}validate(e,t){if(this.root&&t){let r=new eP(this.isKubernetes);return eV(this.root,t,t,r,ew.instance,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties,uri:this.uri}),r.problems.map(t=>{let r=d.Q6.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length)),i=d.oQ.create(r,t.message,t.severity,t.code?t.code:n.Undefined,t.source);return i.data={schemaUri:t.schemaUri,...t.data},i})}return null}getMatchingSchemas(e,t=-1,r=null,n){let i=new eM(t,r);return this.root&&e&&eV(this.root,e,e,new eP(this.isKubernetes),i,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties,uri:this.uri,callFromAutoComplete:n}),i.schemas}};function eV(e,t,r,i,s,a){let{isKubernetes:l,callFromAutoComplete:c}=a;if(e&&"object"==typeof t){switch(!t.url&&(t.url=r.url),t.closestTitle=t.title||r.closestTitle,e.type){case"object":!function(e,t,i,s){var c;let u=Object.create(null),h=[],m=[...e.properties];for(;m.length>0;){let e=m.pop(),t=e.keyNode.value;if("<<"===t&&e.valueNode)switch(e.valueNode.type){case"object":m.push(...e.valueNode.properties);break;case"array":e.valueNode.items.forEach(e=>{e&&Symbol.iterator in Object(e.properties)&&m.push(...e.properties)})}else u[t]=e.valueNode,h.push(t)}if(Array.isArray(t.required)){for(let n of t.required)if(void 0===u[n]){let s=e.parent&&"property"===e.parent.type&&e.parent.keyNode,a=s?{offset:s.offset,length:s.length}:{offset:e.offset,length:1};i.problems.push({location:a,severity:d.h_.Warning,message:ej(o.missingRequiredPropWarning,[n]),source:eC(t,r),schemaUri:eE(t,r),problemArgs:[n],problemType:o.missingRequiredPropWarning})}}let f=e=>{let t=h.indexOf(e);for(;t>=0;)h.splice(t,1),t=h.indexOf(e)};if(t.properties)for(let e of Object.keys(t.properties)){f(e);let n=t.properties[e],o=u[e];if(o)if(Y(n))if(n)i.propertiesMatches++,i.propertiesValueMatches++;else{let n=o.parent;i.problems.push({location:{offset:n.keyNode.offset,length:n.keyNode.length},severity:d.h_.Warning,message:t.errorMessage||k("DisallowedExtraPropWarning",ec,e),source:eC(t,r),schemaUri:eE(t,r)})}else{n.url=null!=(c=t.url)?c:r.url;let e=new eP(l);eV(o,n,t,e,s,a),i.mergePropertyMatch(e),i.mergeEnumValues(e)}}if(t.patternProperties)for(let e of Object.keys(t.patternProperties)){let n=B(e);for(let o of h.slice(0))if(n.test(o)){f(o);let n=u[o];if(n){let c=t.patternProperties[e];if(Y(c))if(c)i.propertiesMatches++,i.propertiesValueMatches++;else{let e=n.parent;i.problems.push({location:{offset:e.keyNode.offset,length:e.keyNode.length},severity:d.h_.Warning,message:t.errorMessage||k("DisallowedExtraPropWarning",ec,o),source:eC(t,r),schemaUri:eE(t,r)})}else{let e=new eP(l);eV(n,c,t,e,s,a),i.mergePropertyMatch(e),i.mergeEnumValues(e)}}}}if("object"==typeof t.additionalProperties)for(let e of h){let r=u[e];if(r){let e=new eP(l);eV(r,t.additionalProperties,t,e,s,a),i.mergePropertyMatch(e),i.mergeEnumValues(e)}}else if((!1===t.additionalProperties||"object"===t.type&&void 0===t.additionalProperties&&!0===a.disableAdditionalProperties)&&h.length>0){let e=t.properties&&Object.entries(t.properties).filter(([e,t])=>!u[e]&&(!t||"object"!=typeof t||!t.doNotSuggest&&!t.deprecationMessage)).map(([e])=>e);for(let s of h){let o=u[s];if(o){let a=null;"property"!==o.type?"object"===(a=o.parent).type&&(a=a.properties[0]):a=o;let l={location:{offset:a.keyNode.offset,length:a.keyNode.length},severity:d.h_.Warning,code:n.PropertyExpected,message:t.errorMessage||k("DisallowedExtraPropWarning",ec,s),source:eC(t,r),schemaUri:eE(t,r)};(null==e?void 0:e.length)&&(l.data={properties:e}),i.problems.push(l)}}}if(Q(t.maxProperties)&&e.properties.length>t.maxProperties&&i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties),source:eC(t,r),schemaUri:eE(t,r)}),Q(t.minProperties)&&e.properties.length<t.minProperties&&i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties),source:eC(t,r),schemaUri:eE(t,r)}),t.dependencies){for(let n of Object.keys(t.dependencies))if(u[n]){let o=t.dependencies[n];if(Array.isArray(o))for(let s of o)u[s]?i.propertiesValueMatches++:i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",s,n),source:eC(t,r),schemaUri:eE(t,r)});else{let r=eA(o);if(r){let n=new eP(l);eV(e,r,t,n,s,a),i.mergePropertyMatch(n),i.mergeEnumValues(n)}}}}let p=eA(t.propertyNames);if(p)for(let r of e.properties){let e=r.keyNode;e&&eV(e,p,t,i,ew.instance,a)}}(e,t,i,s);break;case"array":!function(e,t,n,i){if(Array.isArray(t.items)){let s=t.items;for(let r=0;r<s.length;r++){let o=eA(s[r]),c=new eP(l),u=e.items[r];u?(eV(u,o,t,c,i,a),n.mergePropertyMatch(c),n.mergeEnumValues(c)):e.items.length>=s.length&&n.propertiesValueMatches++}if(e.items.length>s.length)if("object"==typeof t.additionalItems)for(let r=s.length;r<e.items.length;r++){let s=new eP(l);eV(e.items[r],t.additionalItems,t,s,i,a),n.mergePropertyMatch(s),n.mergeEnumValues(s)}else!1===t.additionalItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",s.length),source:eC(t,r),schemaUri:eE(t,r)})}else{let r=eA(t.items);if(r){let s=new eP(l);e.items.forEach(e=>{if(r.oneOf&&1===r.oneOf.length){let o={...eA(r.oneOf[0])};o.title=t.title,o.closestTitle=t.closestTitle,eV(e,o,t,s,i,a),n.mergePropertyMatch(s),n.mergeEnumValues(s)}else eV(e,r,t,s,i,a),n.mergePropertyMatch(s),n.mergeEnumValues(s)})}}let s=eA(t.contains);if(s&&(e.items.some(e=>{let r=new eP(l);return eV(e,s,t,r,ew.instance,a),!r.hasProblems()})||n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:t.errorMessage||k("requiredItemMissingWarning","Array does not contain required item."),source:eC(t,r),schemaUri:eE(t,r)})),Q(t.minItems)&&e.items.length<t.minItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems),source:eC(t,r),schemaUri:eE(t,r)}),Q(t.maxItems)&&e.items.length>t.maxItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems),source:eC(t,r),schemaUri:eE(t,r)}),!0===t.uniqueItems){let i=ek(e);i.some((e,t)=>t!==i.lastIndexOf(e))&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("uniqueItemsWarning","Array has duplicate items."),source:eC(t,r),schemaUri:eE(t,r)})}}(e,t,i,s);break;case"string":var u=e,h=t,m=i;if(Q(h.minLength)&&u.value.length<h.minLength&&m.problems.push({location:{offset:u.offset,length:u.length},severity:d.h_.Warning,message:k("minLengthWarning","String is shorter than the minimum length of {0}.",h.minLength),source:eC(h,r),schemaUri:eE(h,r)}),Q(h.maxLength)&&u.value.length>h.maxLength&&m.problems.push({location:{offset:u.offset,length:u.length},severity:d.h_.Warning,message:k("maxLengthWarning","String is longer than the maximum length of {0}.",h.maxLength),source:eC(h,r),schemaUri:eE(h,r)}),H(h.pattern)&&(B(h.pattern).test(u.value)||m.problems.push({location:{offset:u.offset,length:u.length},severity:d.h_.Warning,message:h.patternErrorMessage||h.errorMessage||k("patternWarning",'String does not match the pattern of "{0}".',h.pattern),source:eC(h,r),schemaUri:eE(h,r)})),h.format)switch(h.format){case"uri":case"uri-reference":{let e;if(u.value)try{p.r.parse(u.value).scheme||"uri"!==h.format||(e=k("uriSchemeMissing","URI with a scheme is expected."))}catch(t){e=t.message}else e=k("uriEmpty","URI expected.");e&&m.problems.push({location:{offset:u.offset,length:u.length},severity:d.h_.Warning,message:h.patternErrorMessage||h.errorMessage||k("uriFormatWarning","String is not a URI: {0}",e),source:eC(h,r),schemaUri:eE(h,r)})}break;case"color-hex":case"date-time":case"date":case"time":case"email":case"ipv4":case"ipv6":{let e=eu[h.format];u.value&&e.pattern.test(u.value)||m.problems.push({location:{offset:u.offset,length:u.length},severity:d.h_.Warning,message:h.patternErrorMessage||h.errorMessage||e.errorMessage,source:eC(h,r),schemaUri:eE(h,r)})}}break;case"number":!function(e,t,n){let i=e.value;function s(e,t){return Q(t)?t:Y(t)&&t?e:void 0}function o(e,t){if(!Y(t)||!t)return e}Q(t.multipleOf)&&0!==function(e,t){let r=Math.max((e.toString().split(".")[1]||"").length,(t.toString().split(".")[1]||"").length);return parseInt(e.toFixed(r).replace(".",""))%parseInt(t.toFixed(r).replace(".",""))/Math.pow(10,r)}(i,t.multipleOf)&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf),source:eC(t,r),schemaUri:eE(t,r)});let a=s(t.minimum,t.exclusiveMinimum);Q(a)&&i<=a&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",a),source:eC(t,r),schemaUri:eE(t,r)});let l=s(t.maximum,t.exclusiveMaximum);Q(l)&&i>=l&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",l),source:eC(t,r),schemaUri:eE(t,r)});let c=o(t.minimum,t.exclusiveMinimum);Q(c)&&i<c&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("minimumWarning","Value is below the minimum of {0}.",c),source:eC(t,r),schemaUri:eE(t,r)});let u=o(t.maximum,t.exclusiveMaximum);Q(u)&&i>u&&n.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("maximumWarning","Value is above the maximum of {0}.",u),source:eC(t,r),schemaUri:eE(t,r)})}(e,t,i);break;case"property":return eV(e.valueNode,t,t,i,s,a)}(function(){function u(t){return e.type===t||"integer"===t&&"number"===e.type&&e.isInteger}if(Array.isArray(t.type))t.type.some(u)||i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:t.errorMessage||k("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", ")),source:eC(t,r),schemaUri:eE(t,r)});else if(t.type&&!u(t.type)){let n="object"===t.type?J(t):t.type;i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:t.errorMessage||ej(o.typeMismatchWarning,[n]),source:eC(t,r),schemaUri:eE(t,r),problemType:o.typeMismatchWarning,problemArgs:[n]})}if(Array.isArray(t.allOf))for(let r of t.allOf)eV(e,eA(r),t,i,s,a);let h=eA(t.not);if(h){let n=new eP(l),o=s.newSub();for(let l of(eV(e,h,t,n,o,a),n.hasProblems()||i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("notSchemaWarning","Matches a schema that is not allowed."),source:eC(t,r),schemaUri:eE(t,r)}),o.schemas))l.inverted=!l.inverted,s.add(l)}let m=(n,u)=>{var h;let m=[],f=[],p=[],g=null;for(let r of n){let n={...eA(r)},i=new eP(l),h=s.newSub();eV(e,n,t,i,h,a),(!i.hasProblems()||c)&&(m.push(n),f.push(n),0===i.propertiesMatches&&p.push(n),n.format&&f.pop()),g=g?l?function(e,t,r,n){let i=e.compareKubernetes(t.validationResult);return i>0?t={schema:r,validationResult:e,matchingSchemas:n}:0===i&&(t.matchingSchemas.merge(n),t.validationResult.mergeEnumValues(e)),t}(i,g,n,h):function(e,t,r,n,i,s){if(t||r.hasProblems()||n.validationResult.hasProblems()){var a,l,c;let u=r.compareGeneric(n.validationResult);u>0||0===u&&t&&"object"===n.schema.type&&"null"!==e.type&&e.type!==n.schema.type?n={schema:i,validationResult:r,matchingSchemas:s}:(0===u||(null===e.value||"null"===e.type)&&0===e.length)&&(a=n,l=s,c=r,a.matchingSchemas.merge(l),a.validationResult.mergeEnumValues(c),a.validationResult.mergeWarningGeneric(c,[o.missingRequiredPropWarning,o.typeMismatchWarning,o.constWarning]))}else n.matchingSchemas.merge(s),n.validationResult.propertiesMatches+=r.propertiesMatches,n.validationResult.propertiesValueMatches+=r.propertiesValueMatches;return n}(e,u,i,g,n,h):{schema:n,validationResult:i,matchingSchemas:h}}return f.length>1&&(f.length>1||0===p.length)&&u&&i.problems.push({location:{offset:e.offset,length:1},severity:d.h_.Warning,message:k("oneOfWarning","Matches multiple schemas when only one must validate."),source:eC(t,r),schemaUri:eE(t,r)}),null!==g&&(i.merge(g.validationResult),i.propertiesMatches+=g.validationResult.propertiesMatches,i.propertiesValueMatches+=g.validationResult.propertiesValueMatches,i.enumValueMatch=i.enumValueMatch||g.validationResult.enumValueMatch,(null==(h=g.validationResult.enumValues)?void 0:h.length)&&(i.enumValues=(i.enumValues||[]).concat(g.validationResult.enumValues)),s.merge(g.matchingSchemas)),m.length};Array.isArray(t.anyOf)&&m(t.anyOf,!1),Array.isArray(t.oneOf)&&m(t.oneOf,!0);let f=(t,r)=>{let n=new eP(l),o=s.newSub();eV(e,eA(t),r,n,o,a),i.merge(n),i.propertiesMatches+=n.propertiesMatches,i.propertiesValueMatches+=n.propertiesValueMatches,s.merge(o)},p=eA(t.if);if(p&&((r,n,i,o)=>{let c=eA(r),u=new eP(l),h=s.newSub();eV(e,c,n,u,h,a),s.merge(h);let{filePatternAssociation:m}=c;m&&(new eJ(m).matchesPattern(a.uri)||u.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,message:k("ifFilePatternAssociation",`filePatternAssociation '${m}' does not match with doc uri '${a.uri}'.`),source:eC(t,n),schemaUri:eE(t,n)})),u.hasProblems()?o&&f(o,n):i&&f(i,n)})(p,t,eA(t.then),eA(t.else)),Array.isArray(t.enum)){let s=ek(e),o=!1;for(let r of t.enum)if(s===r||eI(c,e,s,r)){o=!0;break}i.enumValues=t.enum,i.enumValueMatch=o,o||i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,code:n.EnumValueMismatch,message:t.errorMessage||k("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map(e=>JSON.stringify(e)).join(", ")),source:eC(t,r),schemaUri:eE(t,r),data:{values:t.enum}})}if(K(t.const)){let s=ek(e);(function e(t,r){let n,i;if(t===r)return!0;if(null==t||null==r||typeof t!=typeof r||"object"!=typeof t||Array.isArray(t)!==Array.isArray(r))return!1;if(Array.isArray(t)){if(t.length!==r.length)return!1;for(n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1}else{let s=[];for(i in t)s.push(i);s.sort();let o=[];for(i in r)o.push(i);if(o.sort(),!e(s,o))return!1;for(n=0;n<s.length;n++)if(!e(t[s[n]],r[s[n]]))return!1}return!0})(s,t.const)||eI(c,e,s,t.const)?i.enumValueMatch=!0:(i.problems.push({location:{offset:e.offset,length:e.length},severity:d.h_.Warning,code:n.EnumValueMismatch,problemType:o.constWarning,message:t.errorMessage||ej(o.constWarning,[JSON.stringify(t.const)]),source:eC(t,r),schemaUri:eE(t,r),problemArgs:[JSON.stringify(t.const)],data:{values:[t.const]}}),i.enumValueMatch=!1),i.enumValues=[t.const]}t.deprecationMessage&&e.parent&&i.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:d.h_.Warning,message:t.deprecationMessage,source:eC(t,r),schemaUri:eE(t,r)})})(),s.add({node:e,schema:t})}}function eC(e,t){var r;if(e){let n;if(e.title)n=e.title;else if(e.closestTitle)n=e.closestTitle;else if(t.closestTitle)n=t.closestTitle;else{let i=null!=(r=e.url)?r:t.url;if(i){let e=p.r.parse(i);"file"===e.scheme&&(n=e.fsPath),n=e.toString()}}if(n)return`${em}${n}`}return eh}function eE(e,t){var r;let n=null!=(r=e.url)?r:t.url;return n?[n]:[]}function ej(e,t){return k(e,ef[e],t.join(" | "))}function eI(e,t,r,n){return!!e&&(null===r&&0===t.length||H(r)&&H(n)&&n.startsWith(r))}var e$=0,eF=new Set;function eN(e){return[e[0],e[1]-e[0]]}function eD(e,t){let r=t.linePos(e[0]),n=t.linePos(e[1]),i=[e[0],e[1]-e[0]];return r.line!==n.line&&(t.lineStarts.length!==n.line||1===n.col)&&i[1]--,i}function eR(e){return void 0!==e.start}var eW=class e extends eO{constructor(e){super(null,[]),this.lineCounter=e}clone(){let t=new e(this.lineCounter);return t.isKubernetes=this.isKubernetes,t.disableAdditionalProperties=this.disableAdditionalProperties,t.uri=this.uri,t.currentDocIndex=this.currentDocIndex,t._lineComments=this.lineComments.slice(),t.internalDocument=this._internalDocument.clone(),t}collectLineComments(){this._lineComments=[],this._internalDocument.commentBefore&&this._internalDocument.commentBefore.split("\n").forEach(e=>this._lineComments.push(`#${e}`)),(0,g.YR)(this.internalDocument,(e,t)=>{(null==t?void 0:t.commentBefore)&&(null==t?void 0:t.commentBefore.split("\n")).forEach(e=>this._lineComments.push(`#${e}`)),(null==t?void 0:t.comment)&&this._lineComments.push(`#${t.comment}`)}),this._internalDocument.comment&&this._lineComments.push(`#${this._internalDocument.comment}`)}updateFromInternalDocument(){this.root=function e(t,r,n,i){if(t||(e$=0),!r)return null;if((0,g.jh)(r)){let c;var s=r,o=t,a=n,l=i;c=s.flow&&!s.range?function(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(let n of e.items)(0,g.tO)(n)&&((0,g.Ll)(n.key)&&n.key.range&&n.key.range[0]<=t&&(t=n.key.range[0]),(0,g.Ll)(n.value)&&n.value.range&&n.value.range[2]>=r&&(r=n.value.range[2]));return[t,r,r]}(s):s.range;let u=new ex(o,s,...eD(c,l));for(let t of s.items)(0,g.tO)(t)&&u.properties.push(e(u,t,a,l));return u}if((0,g.tO)(r))return function(t,r,n,i){let s=t.key,o=t.value,a=s.range[0],l=s.range[1],c=s.range[2];o&&(l=o.range[1],c=o.range[2]);let u=new eS(r,t,...eD([a,l,c],i));if((0,g.Vj)(s)){let e=new eb(r,s,...eN(s.range));e.value=s.source,u.keyNode=e}else u.keyNode=e(u,s,n,i);return u.valueNode=e(u,o,n,i),u}(r,t,n,i);if((0,g.oP)(r)){var c=r,u=t,h=n,m=i;let s=new ey(u,c,...eN(c.range));for(let t of c.items)if((0,g.Ll)(t)){let r=e(s,t,h,m);r&&s.children.push(r)}return s}if((0,g.jn)(r)){var f=r,p=t;if(null===f.value)return new ed(p,f,...eN(f.range));switch(typeof f.value){case"string":{let e=new eb(p,f,...eN(f.range));return e.value=f.value,e}case"boolean":return new eg(p,f,f.value,f.source,...eN(f.range));case"number":{let e=new ev(p,f,...eN(f.range));return e.value=f.value,e.isInteger=Number.isInteger(e.value),e}default:{let e=new eb(p,f,...eN(f.range));return e.value=f.source,e}}}if(!(!(0,g.Vj)(r)||eF.has(r))&&e$<1e3){eF.add(r);let s=function(t,r,n,i){e$++;let s=t.resolve(n);if(s)return e(r,s,n,i);{let e=new eb(r,t,...eN(t.range));return e.value=t.source,e}}(r,t,n,i);return eF.delete(r),s}}(null,this._internalDocument.contents,this._internalDocument,this.lineCounter)}set internalDocument(e){this._internalDocument=e,this.updateFromInternalDocument()}get internalDocument(){return this._internalDocument}get lineComments(){return this._lineComments||this.collectLineComments(),this._lineComments}set lineComments(e){this._lineComments=e}get errors(){return this.internalDocument.errors.map(eU)}get warnings(){return this.internalDocument.warnings.map(eU)}getNodeFromPosition(e,t,r){let n,i=t.getPosition(e),s=t.getLineContent(i.line);if(0===s.trim().length)return[this.findClosestNode(e,t,r),!0];let o=s.substring(i.character).match(/^([ ]+)\n?$/),a=!!o,l=null==o?void 0:o[1].length;return(0,g.YR)(this.internalDocument,(t,r)=>{if(!r)return;let i=r.range;if(i){if(!(i[0]<=e&&i[1]>=e||a&&e+l===i[2]&&(0,g.jn)(r)&&null===r.value))return g.YR.SKIP;n=r}}),[n,!1]}findClosestNode(e,t,r){let n,i=this.internalDocument.range[2],s=this.internalDocument.range[0];(0,g.YR)(this.internalDocument,(t,r)=>{if(!r)return;let o=r.range;if(!o)return;let a=o[1]-e;s<=o[0]&&a<=0&&Math.abs(a)<=i&&(i=Math.abs(a),s=o[0],n=r)});let o=t.getPosition(e),a=function(e,t){if(e.length<t)return 0;for(let r=0;r<t;r++){let t=e.charCodeAt(r);if(32!==t&&9!==t)return r}return t}(t.getLineContent(o.line),o.character);return(0,g.jn)(n)&&null===n.value||a===o.character&&(n=this.getProperParentByIndentation(a,n,t,"",r)),n}getProperParentByIndentation(e,t,r,n,i,s){if(!t)return this.internalDocument.contents;if(i=i||2,(0,g.Ll)(t)&&t.range){let o=r.getPosition(t.range[0]),a=r.getLineContent(o.line);if((n=""===n?a.trim():n).startsWith("-")&&e===i&&n===a.trim()&&(o.character+=e),o.character>e&&o.character>0){let o=this.getParent(t);if(o)return this.getProperParentByIndentation(e,o,r,n,i,s)}else if(o.character<e){let e=this.getParent(t);if((0,g.tO)(e)&&(0,g.Ll)(e.value))return e.value;if((0,g.tO)(s)&&(0,g.Ll)(s.value))return s.value}}else if((0,g.tO)(t)){s=t;let o=this.getParent(t);return this.getProperParentByIndentation(e,o,r,n,i,s)}return t}getParent(e){let t;var r=this.internalDocument;return((0,g.YR)(r,(r,n,i)=>{if(n===e)return t=i[i.length-1],g.YR.BREAK}),(0,g.wz)(t))?void 0:t}},eL=class{constructor(e,t){this.documents=e,this.tokens=t,this.errors=[],this.warnings=[]}},e_=new class{constructor(){this.cache=new Map}getYamlDocument(e,t,r=!1){return this.ensureCache(e,null!=t?t:eK,r),this.cache.get(e.uri).document}clear(){this.cache.clear()}ensureCache(e,t,r){let n=e.uri;this.cache.has(n)||this.cache.set(n,{version:-1,document:new eL([],[]),parserOptions:eK});let i=this.cache.get(n);if(i.version!==e.version||t.customTags&&!el(i.parserOptions.customTags,t.customTags)){let n=e.getText();r&&!/\S/.test(n)&&(n=`{${n}}`),i.document=function(e,t=eK,r){var n;let i={strict:!1,customTags:function(e){let t=[];for(let r of ea(e)){let e=r.split(" "),n=e[0],i=e[1]&&e[1].toLowerCase()||"scalar";t.push(new eq(n,i))}return t.push(new eB),t}(t.customTags),version:null!=(n=t.yamlVersion)?n:eK.yamlVersion,keepSourceTokens:!0},s=new g.Dk(i),o=new g.HN,a=!1;if(r){let t=new eQ(r),n=t.getPosition(e.length);a=0===t.getLineContent(n.line).trim().length}let l=Array.from((a?new g.iX:new g.iX(o.addNewLine)).parse(e));return new eL(Array.from(s.compose(l,!0,e.length),e=>(function(e,t){let r=new eW(t);return r.internalDocument=e,r})(e,o)),l)}(n,t,e),i.version=e.version,i.parserOptions=t}}};function eU(e){return{message:e.message,location:{start:e.pos[0],end:e.pos[1],toLineEnd:!0},severity:1,code:n.Undefined}}var eq=class{constructor(e,t){this.tag=e,this.type=t}get collection(){return"mapping"===this.type?"map":"sequence"===this.type?"seq":void 0}resolve(e){if((0,g.jh)(e)&&"mapping"===this.type||(0,g.oP)(e)&&"sequence"===this.type||"string"==typeof e&&"scalar"===this.type)return e}},eB=class{constructor(){this.tag="!include",this.type="scalar"}resolve(e,t){if(e&&e.length>0&&e.trim())return e;t("!include without value")}},eQ=class{constructor(e){this.doc=e}getLineCount(){return this.doc.lineCount}getLineLength(e){let t=this.doc.getLineOffsets();return e>=t.length?this.doc.getText().length:e<0?0:(e+1<t.length?t[e+1]:this.doc.getText().length)-t[e]}getLineContent(e){let t=this.doc.getLineOffsets();if(e>=t.length)return this.doc.getText();if(e<0)return"";let r=e+1<t.length?t[e+1]:this.doc.getText().length;return this.doc.getText().substring(t[e],r)}getLineCharCode(e,t){return this.doc.getText(d.Q6.create(e-1,t,e-1,t+1)).charCodeAt(0)}getText(e){return this.doc.getText(e)}getPosition(e){return this.doc.positionAt(e)}},eK={customTags:[],yamlVersion:"1.2"};function eY(e){let t=e.match(/^#\s+yaml-language-server\s*:/g);return null!==t&&1===t.length}var eH=new class{compile(){return()=>!0}}().compile(void 0);!function(e){e[e.delete=0]="delete",e[e.add=1]="add",e[e.deleteAll=2]="deleteAll"}(l||(l={}));var eJ=class{constructor(e){try{this.patternRegExp=RegExp(e.replace(/[-\\{}+?|^$.,[\]()#\s]/g,"\\$&").replace(/[*]/g,".*")+"$")}catch(e){this.patternRegExp=null}this.schemas=[]}addSchema(e){this.schemas.push(e)}matchesPattern(e){return this.patternRegExp&&this.patternRegExp.test(e)}getSchemas(){return this.schemas}},eG=class extends L{constructor(e,t,r){super(e,t,r),this.schemaUriToNameAndDescription=new Map,this.customSchemaProvider=void 0,this.requestService=e,this.schemaPriorityMapping=new Map}registerCustomSchemaProvider(e){this.customSchemaProvider=e}getAllSchemas(){let e=[],t=new Set;for(let r of this.filePatternAssociations){let n=r.uris[0];if(t.has(n))continue;t.add(n);let i={uri:n,fromStore:!1,usedForCurrentFile:!1};if(this.schemaUriToNameAndDescription.has(n)){let{name:e,description:t,versions:r}=this.schemaUriToNameAndDescription.get(n);i.name=e,i.description=t,i.fromStore=!0,i.versions=r}e.push(i)}return e}async resolveSchemaContent(e,t,r){let n=e.errors.slice(0),i=e.schema,s=this.contextService;if(!eH(i)){let r=[];for(let e of eH.errors)r.push(`${e.instancePath} : ${e.message}`);n.push(`Schema '${z(e.schema,t)}' is not valid:
${r.join("\n")}`)}let o=(e,t,r,i)=>{let s=((e,t)=>{if(!t)return e;let r=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some(e=>!(r=r[e])),r})(t,i);if(s)for(let t in s)Object.prototype.hasOwnProperty.call(s,t)&&!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=s[t]);else n.push(k("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",i,r))},a=(e,t,r,i,a)=>{s&&!/^\w+:\/\/.*/.test(t)&&(t=s.resolveRelativePath(t,i)),t=this.normalizeId(t);let c=this.getOrAddSchemaHandle(t);return c.getUnresolvedSchema().then(i=>{if(a[t]=!0,i.errors.length){let e=r?t+"#"+r:t;n.push(k("json.schema.problemloadingref","Problems loading reference '{0}': {1}",e,i.errors[0]))}return o(e,i.schema,t,r),e.url=t,l(e,i.schema,t,c.dependencies)})},l=async(e,t,r,n)=>{if(!e||"object"!=typeof e)return null;let s=[e],l=new Set,c=[],u=e=>{let i=new Set;for(;e.$ref;){let s=decodeURIComponent(e.$ref),l=s.split("#",2);if(e._$ref=e.$ref,delete e.$ref,l[0].length>0)return void c.push(a(e,l[0],l[1],r,n));i.has(s)||(o(e,t,r,l[1]),i.add(s))}((...e)=>{for(let t of e)"object"==typeof t&&s.push(t)})(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),((...e)=>{for(let t of e)if("object"==typeof t)for(let e in t){let r=t[e];"object"==typeof r&&s.push(r)}})(e.definitions,e.properties,e.patternProperties,e.dependencies),((...e)=>{for(let t of e)if(Array.isArray(t))for(let e of t)"object"==typeof e&&s.push(e)})(e.anyOf,e.allOf,e.oneOf,e.items,e.schemaSequence)};if(r.indexOf("#")>0){let e=r.split("#",2);if(e[0].length>0&&e[1].length>0){let t={};for(let s in await a(t,e[0],e[1],r,n),i)"required"!==s&&Object.prototype.hasOwnProperty.call(i,s)&&!Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=i[s]);i=t}}for(;s.length;){let e=s.pop();l.has(e)||(l.add(e),u(e))}return Promise.all(c)};return await l(i,i,t,r),new W(i,n)}getSchemaForResource(e,t){let r=r=>{let n=super.createCombinedSchema(e,r);return n.getResolvedSchema().then(e=>(e.schema&&"object"==typeof e.schema&&(e.schema.url=n.url),e.schema&&e.schema.schemaSequence&&e.schema.schemaSequence[t.currentDocIndex])?new W(e.schema.schemaSequence[t.currentDocIndex]):e)},n=()=>{let t=Object.create(null),n=[];for(let r of this.filePatternAssociations)if(r.matchesPattern(e))for(let e of r.getURIs())t[e]||(n.push(e),t[e]=!0);return n.length>0?r(this.highestPrioritySchemas(n)):Promise.resolve(null)},i=(()=>{let r=function(e){if(e instanceof eW){let t=e.lineComments.find(e=>eY(e));if(void 0!=t){let e=t.match(/\$schema=\S+/g);if(null!==e&&e.length>=1)return e.length>=2&&console.log("Several $schema attributes have been found on the yaml-language-server modeline. The first one will be picked."),e[0].substring(8)}}}(t);if(void 0!==r){if(!r.startsWith("file:")&&!r.startsWith("http")){let t="";if(r.indexOf("#")>0){let e=r.split("#",2);r=e[0],t=e[1]}if(y.isAbsolute(r))r=p.r.file(r).toString();else{let t=p.r.parse(e);r=p.r.file(y.resolve(y.parse(t.fsPath).dir,r)).toString()}t.length>0&&(r+="#"+t)}return r}})();return i?r([i]):this.customSchemaProvider?this.customSchemaProvider(e).then(e=>Array.isArray(e)?0===e.length?n():Promise.all(e.map(e=>this.resolveCustomSchema(e,t))).then(e=>({errors:[],schema:{allOf:e.map(e=>e.schema)}}),()=>n()):e?this.resolveCustomSchema(e,t):n()).then(e=>e,()=>n()):n()}addSchemaPriority(e,t){let r=this.schemaPriorityMapping.get(e);r?(r=r.add(t),this.schemaPriorityMapping.set(e,r)):this.schemaPriorityMapping.set(e,new Set().add(t))}highestPrioritySchemas(e){let t=0,r=new Map;return e.forEach(e=>{(this.schemaPriorityMapping.get(e)||[0]).forEach(n=>{n>t&&(t=n);let i=r.get(n);i?(i=i.concat(e),r.set(n,i)):r.set(n,[e])})}),r.get(t)||[]}async resolveCustomSchema(e,t){let r=await this.loadSchema(e),n=await this.resolveSchemaContent(r,e,[]);return(n.schema&&"object"==typeof n.schema&&(n.schema.url=e),n.schema&&n.schema.schemaSequence&&n.schema.schemaSequence[t.currentDocIndex])?new W(n.schema.schemaSequence[t.currentDocIndex],n.errors):n}async saveSchema(e,t){let r=this.normalizeId(e);return this.getOrAddSchemaHandle(r,t),this.schemaPriorityMapping.set(r,new Set().add(u.Settings)),Promise.resolve(void 0)}async deleteSchemas(e){return e.schemas.forEach(e=>{this.deleteSchema(e)}),Promise.resolve(void 0)}async deleteSchema(e){let t=this.normalizeId(e);return this.schemasById[t]&&delete this.schemasById[t],this.schemaPriorityMapping.delete(t),Promise.resolve(void 0)}async addContent(e){let t=await this.getResolvedSchema(e.schema);if(t){let r=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof r&&(r[e.key]=e.content),await this.saveSchema(e.schema,t.schema)}}async deleteContent(e){let t=await this.getResolvedSchema(e.schema);if(t){let r=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof r&&delete r[e.key],await this.saveSchema(e.schema,t.schema)}}resolveJSONSchemaToSection(e,t){let r=t.split("/"),n=e;for(let e of r)""!==e&&(this.resolveNext(n,e),n=n[e]);return n}resolveNext(e,t){if(Array.isArray(e)&&isNaN(t))throw Error("Expected a number after the array object");if("object"==typeof e&&"string"!=typeof t)throw Error("Expected a string after the object")}normalizeId(e){try{return p.r.parse(e).toString()}catch(t){return e}}getOrAddSchemaHandle(e,t){return super.getOrAddSchemaHandle(e,t)}loadSchema(e){let t=this.requestService;return super.loadSchema(e).then(r=>{if(r.errors&&void 0===r.schema)return t(e).then(t=>{if(!t)return new R({},[k("json.schema.nocontent","Unable to load schema from '{0}': No content. {1}",ez(e),r.errors)]);try{let e=(0,g.qg)(t);return new R(e,[])}catch(t){return new R({},[k("json.schema.invalidFormat","Unable to parse content from '{0}': {1}.",ez(e),t)])}},e=>{let t=e.toString(),r=e.toString().split("Error: ");return r.length>1&&(t=r[1]),new R({},[t])});if(r.uri=e,this.schemaUriToNameAndDescription.has(e)){let{name:t,description:n,versions:i}=this.schemaUriToNameAndDescription.get(e);r.schema.title=null!=t?t:r.schema.title,r.schema.description=null!=n?n:r.schema.description,r.schema.versions=null!=i?i:r.schema.versions}return r})}registerExternalSchema(e,t,r,n,i,s){return(n||i)&&this.schemaUriToNameAndDescription.set(e,{name:n,description:i,versions:s}),super.registerExternalSchema(e,t,r)}clearExternalSchemas(){super.clearExternalSchemas()}setSchemaContributions(e){super.setSchemaContributions(e)}getRegisteredSchemaIds(e){return super.getRegisteredSchemaIds(e)}getResolvedSchema(e){return super.getResolvedSchema(e)}onResourceChange(e){return super.onResourceChange(e)}};function ez(e){try{let t=p.r.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}var eX=class{constructor(e,t){this.telemetry=t,this.jsonDocumentSymbols=new en(e),this.jsonDocumentSymbols.getKeyLabel=e=>{let t=e.keyNode.internalNode;return(0,g.jh)(t)?"{}":(0,g.oP)(t)?"[]":t.source}}findDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){var r;let n=[];try{let r=e_.getYamlDocument(e);if(!r||0===r.documents.length)return null;for(let i of r.documents)i.root&&(n=n.concat(this.jsonDocumentSymbols.findDocumentSymbols(e,i,t)))}catch(e){null==(r=this.telemetry)||r.sendError("yaml.documentSymbols.error",e)}return n}findHierarchicalDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){var r;let n=[];try{let r=e_.getYamlDocument(e);if(!r||0===r.documents.length)return null;for(let i of r.documents)i.root&&(n=n.concat(this.jsonDocumentSymbols.findDocumentSymbols2(e,i,t)))}catch(e){null==(r=this.telemetry)||r.sendError("yaml.hierarchicalDocumentSymbols.error",e)}return n}};function eZ(e,t){for(let r of e)r.isKubernetes=t}var e0=class{constructor(e,t){this.telemetry=t,this.shouldHover=!0,this.schemaService=e}configure(e){e&&(this.shouldHover=e.hover,this.indentation=e.indentation)}doHover(e,t,r=!1){var n;try{if(!this.shouldHover||!e)return Promise.resolve(void 0);let n=e_.getYamlDocument(e),i=e.offsetAt(t),s=eo(i,n);if(null===s)return Promise.resolve(void 0);eZ(n.documents,r);let o=n.documents.indexOf(s);return s.currentDocIndex=o,this.getHover(e,t,s)}catch(e){null==(n=this.telemetry)||n.sendError("yaml.hover.error",e)}}getHover(e,t,r){let n=e.offsetAt(t),i=r.getNodeFromOffset(n);if(!i||("object"===i.type||"array"===i.type)&&n>i.offset+1&&n<i.offset+i.length-1)return Promise.resolve(null);let s=i;if("string"===i.type){let e=i.parent;if(e&&"property"===e.type&&e.keyNode===i&&!(i=e.valueNode))return Promise.resolve(null)}let o=d.Q6.create(e.positionAt(s.offset),e.positionAt(s.offset+s.length)),a=e=>e.replace(/\s\|\|\s*$/,"");return this.schemaService.getSchemaForResource(e.uri,r).then(e=>{if(e&&i&&!e.errors.length){let n,s,l=r.getMatchingSchemas(e.schema,i.offset),c=[],u=[],h=[];l.every(e=>((e.node===i||"property"===i.type&&i.valueNode===e.node)&&!e.inverted&&e.schema&&(n=n||e.schema.title||e.schema.closestTitle,s=s||e.schema.markdownDescription||this.toMarkdown(e.schema.description),e.schema.enum&&(c=e.schema.markdownEnumDescriptions?e.schema.markdownEnumDescriptions:e.schema.enumDescriptions?e.schema.enumDescriptions.map(this.toMarkdown,this):[],e.schema.enum.forEach((e,t)=>{"string"!=typeof e&&(e=JSON.stringify(e)),h.some(t=>t.value===e)||h.push({value:e,description:c[t]})})),e.schema.anyOf&&function(e,t,r){let n=0;for(let i of t)e===i.node&&i.schema!==r&&r.anyOf.forEach(e=>{i.schema.title===e.title&&i.schema.description===e.description&&i.schema.properties===e.properties&&n++});return n===r.anyOf.length}(i,l,e.schema)&&(n="",s=e.schema.description?e.schema.description+"\n":"",e.schema.anyOf.forEach((t,r)=>{n+=t.title||e.schema.closestTitle||"",s+=t.markdownDescription||this.toMarkdown(t.description)||"",r!==e.schema.anyOf.length-1&&(n+=" || ",s+=" || ")}),n=a(n),s=a(s)),e.schema.examples&&e.schema.examples.forEach(e=>{u.push((0,g.As)(e,null,2))})),!0));let m="";n&&(m="#### "+this.toMarkdown(n)),s&&(m=e1(m)+s),0!==h.length&&(m=e1(m)+"Allowed Values:\n\n",h.forEach(e=>{e.description?m+=`* \`${e2(e.value)}\`: ${e.description}
`:m+=`* \`${e2(e.value)}\`
`})),0!==u.length&&u.forEach(e=>{m=e1(m)+"Example:\n\n"+`\`\`\`yaml
${e}\`\`\`
`}),m.length>0&&e.schema.url&&(m=e1(m)+`Source: [${function(e){let t="JSON Schema",r=e.url;if(r){let e=p.r.parse(r);t=y.basename(e.fsPath)}else e.title&&(t=e.title);return t}(e.schema)}](${e.schema.url})`);var t=m;return{contents:{kind:d.nw.Markdown,value:t},range:o}}return null})}toMarkdown(e){if(e){let t=e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3");if(t=t.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&"),void 0!==this.indentation){let e=RegExp(` {${this.indentation.length}}`,"g");t=t.replace(e,"&emsp;")}return t}}};function e1(e){return 0===e.length?e:(e.endsWith("\n")||(e+="\n"),e+"\n")}function e2(e){return -1!==e.indexOf("`")?"`` "+e+" ``":e}var e9=class{validate(e,t){let r=[],n=new Set,i=new Set,s=new Map;for(let o of((0,g.YR)(t.internalDocument,(e,r,o)=>{(0,g.Ll)(r)&&(((0,g.P3)(r)||(0,g.jn)(r))&&r.anchor&&(n.add(r),s.set(r,o[o.length-1])),(0,g.Vj)(r)&&i.add(r.resolve(t.internalDocument)))}),n))if(!i.has(o)){let t=this.getAnchorNode(s.get(o),o);if(t){let n=d.Q6.create(e.positionAt(t.offset),e.positionAt(t.offset+t.source.length)),i=d.oQ.create(n,`Unused anchor "${t.source}"`,d.h_.Hint,0);i.tags=[d.uX.Unnecessary],r.push(i)}}return r}getAnchorNode(e,t){if(e&&e.srcToken){let r=e.srcToken;if(eR(r))return e5(r);if(g.DB.isCollection(r))for(let e of r.items){if(t.srcToken!==e.value)continue;let r=e5(e);if(r)return r}}}};function e5(e){for(let t of e.start)if("anchor"===t.type)return t;if(e.sep&&Array.isArray(e.sep)){for(let t of e.sep)if("anchor"===t.type)return t}}var e3=class{constructor(e){this.forbidMapping="forbid"===e.flowMapping,this.forbidSequence="forbid"===e.flowSequence}validate(e,t){let r=[];return(0,g.YR)(t.internalDocument,(t,n)=>{var i,s;this.forbidMapping&&(0,g.jh)(n)&&(null==(i=n.srcToken)?void 0:i.type)==="flow-collection"&&r.push(d.oQ.create(this.getRangeOf(e,n.srcToken),"Flow style mapping is forbidden",d.h_.Error,"flowMap")),this.forbidSequence&&(0,g.oP)(n)&&(null==(s=n.srcToken)?void 0:s.type)==="flow-collection"&&r.push(d.oQ.create(this.getRangeOf(e,n.srcToken),"Flow style sequence is forbidden",d.h_.Error,"flowSeq"))}),r}getRangeOf(e,t){return d.Q6.create(e.positionAt(t.start.offset),e.positionAt(t.end.pop().offset))}},e6=class{validate(e,t){let r=[];return(0,g.YR)(t.internalDocument,(t,n)=>{if((0,g.jh)(n)){for(let t=1;t<n.items.length;t++)if(function(e,t){let r=String(t.key);return String(e.key).localeCompare(r)}(n.items[t-1],n.items[t])>0){let i=function(e,t){var r,n,i,s,o,a,l,c,u,h,m;let f=null!=(a=null!=(i=null==(r=null==t?void 0:t.srcToken.start[0])?void 0:r.offset)?i:null==(n=null==t?void 0:t.srcToken)?void 0:n.key.offset)?a:null==(o=null==(s=null==t?void 0:t.srcToken)?void 0:s.sep[0])?void 0:o.offset,p=(null==(l=null==t?void 0:t.srcToken)?void 0:l.value.offset)||(null==(u=null==(c=null==t?void 0:t.srcToken)?void 0:c.sep[0])?void 0:u.offset)||(null==(h=null==t?void 0:t.srcToken)?void 0:h.key.offset)||(null==(m=null==t?void 0:t.srcToken.start[t.srcToken.start.length-1])?void 0:m.offset);return d.Q6.create(e.positionAt(f),e.positionAt(p))}(e,n.items[t-1]);r.push(d.oQ.create(i,`Wrong ordering of key "${n.items[t-1].key}" in mapping`,d.h_.Error,"mapKeyOrder"))}}}),r}},e4=(e,t)=>{let r=t.positionAt(e.location.start),n={start:r,end:e.location.toLineEnd?d.yX.create(r.line,new eQ(t).getLineLength(r.line)):t.positionAt(e.location.end)};return d.oQ.create(n,e.message,e.severity,e.code,eh)},e8=class{constructor(e,t){this.telemetry=t,this.validators=[],this.MATCHES_MULTIPLE="Matches multiple schemas when only one must validate.",this.validationEnabled=!0,this.jsonValidation=new Z(e,Promise)}configure(e){this.validators=[],e&&(this.validationEnabled=e.validate,this.customTags=e.customTags,this.disableAdditionalProperties=e.disableAdditionalProperties,this.yamlVersion=e.yamlVersion,("forbid"===e.flowMapping||"forbid"===e.flowSequence)&&this.validators.push(new e3(e)),e.keyOrdering&&this.validators.push(new e6)),this.validators.push(new e9)}async doValidation(e,t=!1){var r;let n;if(!this.validationEnabled)return Promise.resolve([]);let i=[];try{let r=e_.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0),n=0;for(let s of r.documents){s.isKubernetes=t,s.currentDocIndex=n,s.disableAdditionalProperties=this.disableAdditionalProperties,s.uri=e.uri;let r=await this.jsonValidation.doValidation(e,s);s.errors.length>0&&i.push(...s.errors),s.warnings.length>0&&i.push(...s.warnings),i.push(...r),i.push(...this.runAdditionalValidators(e,s)),n++}}catch(e){null==(r=this.telemetry)||r.sendError("yaml.validation.error",e)}let s=new Set,o=[];for(let r of i){if(t&&r.message===this.MATCHES_MULTIPLE)continue;if(Object.prototype.hasOwnProperty.call(r,"location")&&(r=e4(r,e)),r.source||(r.source=eh),n&&n.message===r.message&&n.range.end.line===r.range.start.line&&Math.abs(n.range.end.character-r.range.end.character)>=1){n.range.end=r.range.end;continue}n=r;let i=r.range.start.line+" "+r.range.start.character+" "+r.message;s.has(i)||(o.push(r),s.add(i))}return o}runAdditionalValidators(e,t){let r=[];for(let n of this.validators)r.push(...n.validate(e,t));return r}},e7=class{constructor(){this.formatterEnabled=!0}configure(e){e&&(this.formatterEnabled=e.format)}async format(e,t={}){if(!this.formatterEnabled)return[];try{let r=e.getText(),n={parser:"yaml",plugins:[v],tabWidth:t.tabWidth||t.tabSize,singleQuote:t.singleQuote,bracketSpacing:t.bracketSpacing,proseWrap:"always"===t.proseWrap?"always":"never"===t.proseWrap?"never":"preserve",printWidth:t.printWidth},i=await (0,b.GP)(r,n);return[d.mF.replace(d.Q6.create(d.yX.create(0,0),e.positionAt(r.length)),i)]}catch(e){return[]}}},te=class{constructor(e){this.telemetry=e}findLinks(e){var t;try{let t=e_.getYamlDocument(e),r=[];for(let n of t.documents)r.push(function(e,t){var r=[];return t.visit(function(n){var i;if("property"===n.type&&"$ref"===n.keyNode.value&&(null==(i=n.valueNode)?void 0:i.type)==="string"){var s=function(e,t){var r,n=(r=t,"#"===r?[]:"#"!==r[0]||"/"!==r[1]?null:r.substring(2).split(/\//).map(es));return n?function e(t,r){if(!r)return null;if(0===t.length)return r;var n=t.shift();if(r&&"object"===r.type){var i=r.properties.find(function(e){return e.keyNode.value===n});return i?e(t,i.valueNode):null}if(r&&"array"===r.type&&n.match(/^(0|[1-9][0-9]*)$/)){var s=Number.parseInt(n),o=r.items[s];return o?e(t,o):null}return null}(n,e.root):null}(t,n.valueNode.value);if(s){var o,a,l=e.positionAt(s.offset);r.push({target:e.uri+"#"+(l.line+1)+","+(l.character+1),range:(o=e,a=n.valueNode,d.Q6.create(o.positionAt(a.offset+1),o.positionAt(a.offset+a.length-1)))})}}return!0}),Promise.resolve(r)}(e,n));return Promise.all(r).then(e=>[].concat(...e))}catch(e){null==(t=this.telemetry)||t.sendError("yaml.documentLink.error",e)}}};function tt(e,t){if(!e)return;let r=[],n=e_.getYamlDocument(e);for(let t of n.documents)n.documents.length>1&&r.push(tr(e,t.root)),t.visit(t=>{var n;if("object"===t.type&&(null==(n=t.parent)?void 0:n.type)==="array"&&r.push(tr(e,t)),"property"===t.type&&t.valueNode)switch(t.valueNode.type){case"array":case"object":r.push(tr(e,t));break;case"string":{let n=e.positionAt(t.offset),i=e.positionAt(t.valueNode.offset+t.valueNode.length);n.line!==i.line&&r.push(tr(e,t))}}return!0});let i=t&&t.rangeLimit;return"number"!=typeof i||r.length<=i?r:(t&&t.onRangeLimitExceeded&&t.onRangeLimitExceeded(e.uri),r.slice(0,t.rangeLimit))}function tr(e,t){let r=e.positionAt(t.offset),n=e.positionAt(t.offset+t.length),i=e.getText(d.Q6.create(r,n)),s=i.length-i.trimRight().length;return s>0&&(n=e.positionAt(t.offset+t.length-s)),d.LM.create(r.line,n.line,r.character,n.character)}(c||(c={})).JUMP_TO_SCHEMA="jumpToSchema";var tn=class{constructor(e){this.indentation=e}write(e){if("flow-collection"!==e.internalNode.srcToken.type)return null;let t=e.internalNode.srcToken,r="flow-map-start"===t.start.type?"block-map":"block-seq",n=e.parent.type,i={type:r,offset:t.offset,indent:t.indent,items:[]};for(let e of t.items)g.DB.visit(e,({key:e,sep:t,value:s})=>{if("block-map"===r){let r=[{type:"space",indent:0,offset:e.offset,source:this.indentation}];"property"===n&&r.unshift({type:"newline",indent:0,offset:e.offset,source:"\n"}),i.items.push({start:r,key:e,sep:t,value:s})}else"block-seq"===r&&i.items.push({start:[{type:"newline",indent:0,offset:s.offset,source:"\n"},{type:"space",indent:0,offset:s.offset,source:this.indentation},{type:"seq-item-ind",indent:0,offset:s.offset,source:"-"},{type:"space",indent:0,offset:s.offset,source:" "}],value:s});if("flow-collection"===s.type)return g.YR.SKIP});return g.DB.stringify(i)}},ti=structuredClone,ts=class{constructor(e){this.clientCapabilities=e,this.indentation="  "}configure(e){this.indentation=e.indentation}getCodeAction(e,t){if(!t.context.diagnostics)return;let r=[];return r.push(...this.getConvertToBooleanActions(t.context.diagnostics,e)),r.push(...this.getJumpToSchemaActions(t.context.diagnostics)),r.push(...this.getTabToSpaceConverting(t.context.diagnostics,e)),r.push(...this.getUnusedAnchorsDelete(t.context.diagnostics,e)),r.push(...this.getConvertToBlockStyleActions(t.context.diagnostics,e)),r.push(...this.getKeyOrderActions(t.context.diagnostics,e)),r.push(...this.getQuickFixForPropertyOrValueMismatch(t.context.diagnostics,e)),r}getJumpToSchemaActions(e){var t,r,n,i,s;if(!(null!=(i=null==(n=null==(r=null==(t=this.clientCapabilities)?void 0:t.window)?void 0:r.showDocument)?void 0:n.support)&&i))return[];let o=new Map;for(let t of e)for(let e of(null==(s=t.data)?void 0:s.schemaUri)||[])e&&(o.has(e)||o.set(e,[]),o.get(e).push(t));let a=[];for(let e of o.keys()){let t=d.gY.create(`Jump to schema location (${y.basename(e)})`,d.uB.create("JumpToSchema",c.JUMP_TO_SCHEMA,e));t.diagnostics=o.get(e),a.push(t)}return a}getTabToSpaceConverting(e,t){let r=[],n=new eQ(t),i=[];for(let s of e)if("Using tabs can lead to unpredictable results"===s.message){if(i.includes(s.range.start.line))continue;let e=n.getLineContent(s.range.start.line),o=0,a="";for(let t=s.range.start.character;t<=s.range.end.character&&"	"===e.charAt(t);t++)o++,a+=this.indentation;i.push(s.range.start.line);let l=s.range;o!==s.range.end.character-s.range.start.character&&(l=d.Q6.create(s.range.start,d.yX.create(s.range.end.line,s.range.start.character+o))),r.push(d.gY.create("Convert Tab to Spaces",ta(t.uri,[d.mF.replace(l,a)]),d.gB.QuickFix))}if(0!==r.length){let e=[];for(let t=0;t<=n.getLineCount();t++){let r=n.getLineContent(t),i=0,s="";for(let n=0;n<r.length;n++){let o=r.charAt(n);if(" "!==o&&"	"!==o){0!==i&&(e.push(d.mF.replace(d.Q6.create(t,n-i,t,n),s)),i=0,s="");break}if(" "===o&&0!==i){e.push(d.mF.replace(d.Q6.create(t,n-i,t,n),s)),i=0,s="";continue}"	"===o&&(s+=this.indentation,i++)}0!==i&&e.push(d.mF.replace(d.Q6.create(t,0,t,n.getLineLength(t)),s))}e.length>0&&r.push(d.gY.create("Convert all Tabs to Spaces",ta(t.uri,e),d.gB.QuickFix))}return r}getUnusedAnchorsDelete(e,t){let r=[],n=new eQ(t);for(let i of e)if(i.message.startsWith("Unused anchor")&&i.source===eh){let e=d.Q6.create(i.range.start,i.range.end),s=n.getText(e),o=function(e,t){t++;for(let r=t;r<e.length;r++){let n=e.charAt(r);if(" "===n||"	"===n)t++;else break}return t}(n.getLineContent(e.end.line),e.end.character);e.end.character=o;let a=d.gY.create(`Delete unused anchor: ${s}`,ta(t.uri,[d.mF.del(e)]),d.gB.QuickFix);a.diagnostics=[i],r.push(a)}return r}getConvertToBooleanActions(e,t){let r=[];for(let n of e)if('Incorrect type. Expected "boolean".'===n.message){let e=t.getText(n.range).toLocaleLowerCase();if('"true"'===e||'"false"'===e||"'true'"===e||"'false'"===e){let i=e.includes("true")?"true":"false";r.push(d.gY.create("Convert to boolean",ta(t.uri,[d.mF.replace(n.range,i)]),d.gB.QuickFix))}}return r}getConvertToBlockStyleActions(e,t){let r=[];for(let n of e)if("flowMap"===n.code||"flowSeq"===n.code){let e=to(t,n);if((0,g.jh)(e.internalNode)||(0,g.oP)(e.internalNode)){let i=(0,g.jh)(e.internalNode)?"map":"sequence",s=new tn(this.indentation);r.push(d.gY.create(`Convert to block style ${i}`,ta(t.uri,[d.mF.replace(n.range,s.write(e))]),d.gB.QuickFix))}}return r}getKeyOrderActions(e,t){var r,n,i,s,o,a,l,c,u,h,m,f,p,y;let v=[];for(let b of e)if((null==b?void 0:b.code)==="mapKeyOrder"){let e=to(t,b);for(;e&&"object"!==e.type;)e=e.parent;if(e&&(0,g.jh)(e.internalNode)){let b=ti(e.internalNode);if(("block-map"===b.srcToken.type||"flow-collection"===b.srcToken.type)&&("block-map"===e.internalNode.srcToken.type||"flow-collection"===e.internalNode.srcToken.type)){b.srcToken.items.sort((e,t)=>e.key&&t.key&&g.DB.isScalar(e.key)&&g.DB.isScalar(t.key)?e.key.source.localeCompare(t.key.source):!e.key&&t.key?-1:e.key&&!t.key?1:e.key||t.key?void 0:0);for(let t=0;t<b.srcToken.items.length;t++){let d=b.srcToken.items[t],v=e.internalNode.srcToken.items[t];if(d.start=v.start,(null==(r=d.value)?void 0:r.type)==="alias"||(null==(n=d.value)?void 0:n.type)==="scalar"||(null==(i=d.value)?void 0:i.type)==="single-quoted-scalar"||(null==(s=d.value)?void 0:s.type)==="double-quoted-scalar"){let e=null!=(l=null==(a=null==(o=d.value)?void 0:o.end)?void 0:a.findIndex(e=>"newline"===e.type))?l:-1,t=null;(null==(c=v.value)?void 0:c.type)==="block-scalar"?t=null==(h=null==(u=v.value)?void 0:u.props)?void 0:h.find(e=>"newline"===e.type):g.DB.isScalar(v.value)&&(t=null==(f=null==(m=v.value)?void 0:m.end)?void 0:f.find(e=>"newline"===e.type)),t&&e<0&&(d.value.end=null!=(p=d.value.end)?p:[],d.value.end.push(t)),!t&&e>-1&&d.value.end.splice(e,1)}else(null==(y=d.value)?void 0:y.type)==="block-scalar"&&(d.value.props.find(e=>"newline"===e.type)||d.value.props.push({type:"newline",indent:0,offset:d.value.offset,source:"\n"}))}}let S=d.Q6.create(t.positionAt(e.offset),t.positionAt(e.offset+e.length));v.push(d.gY.create("Fix key order for this map",ta(t.uri,[d.mF.replace(S,g.DB.stringify(b.srcToken))]),d.gB.QuickFix))}}return v}getPossibleQuickFixValues(e){if("object"==typeof e.data){if(e.code===n.EnumValueMismatch&&"values"in e.data&&Array.isArray(e.data.values))return e.data.values;else if(e.code===n.PropertyExpected&&"properties"in e.data&&Array.isArray(e.data.properties))return e.data.properties}}getQuickFixForPropertyOrValueMismatch(e,t){let r=[];for(let n of e){let e=this.getPossibleQuickFixValues(n);if(null==e?void 0:e.length)for(let i of e)r.push(d.gY.create(i,ta(t.uri,[d.mF.replace(n.range,i)]),d.gB.QuickFix))}return r}};function to(e,t){let r=e_.getYamlDocument(e),n=e.offsetAt(t.range.start);return eo(n,r).getNodeFromOffset(n)}function ta(e,t){let r={};return r[e]=t,{changes:r}}function tl(e,t){let{position:r}=t,n=new eQ(e);if("\n"===t.ch){let e=n.getLineContent(r.line-1);if(e.trimRight().endsWith(":")){let i=n.getLineContent(r.line),s=i.substring(r.character,i.length),o=-1!==e.indexOf(" - ");if(0===s.trimRight().length){let n=r.character-(e.length-e.trimLeft().length);if(n===t.options.tabSize&&!o)return;let s=[];return i.length>0&&s.push(d.mF.del(d.Q6.create(r,d.yX.create(r.line,i.length-1)))),s.push(d.mF.insert(r," ".repeat(t.options.tabSize+(o?2-n:0)))),s}if(o)return[d.mF.insert(r," ".repeat(t.options.tabSize))]}if(e.trimRight().endsWith("|"))return[d.mF.insert(r," ".repeat(t.options.tabSize))];if(e.includes(" - ")&&!e.includes(": "))return[d.mF.insert(r,"- ")];if(e.includes(" - ")&&e.includes(": "))return[d.mF.insert(r,"  ")]}}function tc(e,t){e.allOf&&tu(e.allOf,t),e.anyOf&&tu(e.anyOf,t),e.oneOf&&tu(e.oneOf,t)}function tu(e,t){for(let r of e)Y(r)||!r.url||t.has(r.url)||t.set(r.url,r)}var th=class{constructor(e,t){this.schemaService=e,this.telemetry=t}async getCodeLens(e){var t;let r=[];try{let t=e_.getYamlDocument(e),n=new Map;for(let r of t.documents){let t=await this.schemaService.getSchemaForResource(e.uri,r);(null==t?void 0:t.schema)&&(n=new Map([...function(e){let t=new Map;return e&&(e.url?e.url.startsWith("schemaservice://combinedSchema/")?tc(e,t):t.set(e.url,e):tc(e,t)),t}(null==t?void 0:t.schema),...n]))}for(let e of n){let t=d.O4.create(d.Q6.create(0,0,0,0));t.command={title:z(e[1],e[0]),command:c.JUMP_TO_SCHEMA,arguments:[e[0]]},r.push(t)}}catch(e){null==(t=this.telemetry)||t.sendError("yaml.codeLens.error",e)}return r}resolveCodeLens(e){return e}},tm=class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}},tf=/[\\]+"/g,tp=d.Io.Class,td=class{constructor(e,t={},r,n){this.schemaService=e,this.clientCapabilities=t,this.yamlDocument=r,this.telemetry=n,this.completionEnabled=!0,this.arrayPrefixIndentation="",this.isNumberExp=/^\d+$/}configure(e,t){var r;e&&(this.completionEnabled=e.completion),this.customTags=e.customTags,this.yamlVersion=e.yamlVersion,this.isSingleQuote=(null==(r=null==t?void 0:t.yamlFormatterSettings)?void 0:r.singleQuote)||!1,this.configuredIndentation=e.indentation,this.disableDefaultProperties=e.disableDefaultProperties,this.parentSkeletonSelectedFirst=e.parentSkeletonSelectedFirst}async doComplete(e,t,r=!1,n=!0){var i;let s=d.$e.create([],!1);if(!this.completionEnabled)return s;let o=this.yamlDocument.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0),a=new eQ(e);if(this.configuredIndentation)this.indentation=this.configuredIndentation;else{let e=function(e,t,r){let n=Math.min(e.getLineCount(),1e4),i=0,s=0,o="",a=0,l=[0,0,0,0,0,0,0,0,0],c=new tm;for(let t=1;t<=n;t++){let n=e.getLineLength(t),u=e.getLineContent(t),h=n<=65536,m=!1,f=0,p=0,d=0;for(let r=0;r<n;r++){let n=h?u.charCodeAt(r):e.getLineCharCode(t,r);if(9===n)d++;else if(32===n)p++;else{m=!0,f=r;break}}if(!m||(d>0?i++:p>1&&s++,!function(e,t,r,n,i){let s;for(s=0,i.spacesDiff=0,i.looksLikeAlignment=!1;s<t&&s<n&&e.charCodeAt(s)===r.charCodeAt(s);s++);let o=0,a=0;for(let r=s;r<t;r++)32===e.charCodeAt(r)?o++:a++;let l=0,c=0;for(let e=s;e<n;e++)32===r.charCodeAt(e)?l++:c++;if(o>0&&a>0||l>0&&c>0)return;let u=Math.abs(a-c),h=Math.abs(o-l);if(0===u){i.spacesDiff=h,h>0&&0<=l-1&&l-1<e.length&&l<r.length&&32!==r.charCodeAt(l)&&32===e.charCodeAt(l-1)&&44===e.charCodeAt(e.length-1)&&(i.looksLikeAlignment=!0);return}h%u==0&&(i.spacesDiff=h/u)}(o,a,u,f,c),c.looksLikeAlignment&&!(r&&2===c.spacesDiff)))continue;let g=c.spacesDiff;g<=8&&l[g]++,o=u,a=f}let u=r;i!==s&&(u=i<s);let h=2;if(u){let e=u?0:.1*n;[2,4,6,8,3,5,7].forEach(t=>{let r=l[t];r>e&&(e=r,h=t)}),4===h&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(h=2)}return{insertSpaces:u,tabSize:h}}(a,2,!0);this.indentation=e.insertSpaces?" ".repeat(e.tabSize):"	"}for(let t of(eZ(o.documents,r),o.documents))t.uri=e.uri;let l=e.offsetAt(t),c=e.getText();if(":"===c.charAt(l-1))return Promise.resolve(s);let u=eo(l,o);if(null===u)return Promise.resolve(s);let[h,m]=(u=u.clone()).getNodeFromPosition(l,a,this.indentation.length),f=this.getCurrentWord(e,l),p=a.getLineContent(t.line),y=p.substring(t.character),v=/^[ ]+\n?$/.test(y);this.arrayPrefixIndentation="";let b=null;if(v){b=d.Q6.create(t,d.yX.create(t.line,p.length));let e=0===p.trim().length,r=p.match(/^\s*(-)\s*$/);if(h&&(0,g.jn)(h)&&!e&&!r){let e=p.substring(0,t.character),r=e.match(/^[\s-]*([^:]+)?$/)||e.match(/:[ \t]((?!:[ \t]).*)$/);(null==r?void 0:r[1])&&(b=d.Q6.create(d.yX.create(t.line,t.character-r[1].length),d.yX.create(t.line,p.length)))}}else if(h&&(0,g.jn)(h)&&"null"===h.value){let t=e.positionAt(h.range[0]);t.character+=1;let r=e.positionAt(h.range[2]);r.character+=1,b=d.Q6.create(t,r)}else if(h&&(0,g.jn)(h)&&h.value){let t=e.positionAt(h.range[0]);b=d.Q6.create(t,e.positionAt(h.range[1]))}else if(h&&(0,g.jn)(h)&&null===h.value&&"-"===f)b=d.Q6.create(t,t),this.arrayPrefixIndentation=" ";else{let r=l-f.length;r>0&&'"'===c[r-1]&&r--,b=d.Q6.create(e.positionAt(r),t)}let S={},x={add:(e,t)=>{let r=!!e.parent,n=e.label;if(!n)return void console.warn(`Ignoring CompletionItem without label: ${JSON.stringify(e)}`);if(H(n)||(n=String(n)),(n=n.replace(/[\n]/g,"â†µ")).length>60){let e=n.substr(0,57).trim()+"...";S[e]||(n=e)}if("regular expression"===e.label.toLowerCase()){let t=e.documentation.value.split(":");n=t.length>0?`${this.getQuote()}\\${JSON.parse(t[1])}${this.getQuote()}`:e.label,e.insertText=n,e.textEdit=d.mF.replace(b,n)}else{let t=e.insertText.replace(/\${[0-9]+[:|](.*)}/g,(e,t)=>t).replace(/\$([0-9]+)/g,""),n=t.split(":"),i=n.length>1?n[1].trim():t;i&&/^(['\\"\\])$/.test(i)&&(i=`${this.getQuote()}\\${i}${this.getQuote()}`,e.insertText=t=n.length>1?n[0]+": "+i:i),e.insertText.endsWith("$1")&&!r&&(e.insertText=e.insertText.substr(0,e.insertText.length-2)),b&&b.start.line===b.end.line&&(e.textEdit=d.mF.replace(b,e.insertText))}if(e.label=n,r)return void function(e){var t;if((null==(t=S[e.label])?void 0:t.label)==="__")return;let r=e.parent.schema,n=J(r),i=r.markdownDescription||r.description,o=s.items.find(e=>{var t;return(null==(t=e.parent)?void 0:t.schema)===r&&e.kind===tp});o&&o.parent.insertTexts.includes(e.insertText)||(o?o.parent.insertTexts.push(e.insertText):((o={...e,label:n,documentation:i,sortText:"_"+n,kind:tp}).label=o.label||e.label,o.parent.insertTexts=[e.insertText],s.items.push(o)))}(e);this.arrayPrefixIndentation&&this.updateCompletionText(e,this.arrayPrefixIndentation+e.insertText);let i=S[n],o=(null==i?void 0:i.label)!=="__"&&(null==i?void 0:i.insertText)!==e.insertText;if(i){if(o){let r=this.mergeSimpleInsertTexts(n,i.insertText,e.insertText,t);r?this.updateCompletionText(i,r):(S[n]=e,s.items.push(e))}}else S[n]=e,s.items.push(e);i&&!i.documentation&&e.documentation&&(i.documentation=e.documentation)},error:e=>{var t;null==(t=this.telemetry)||t.sendError("yaml.completion.error",e)},log:e=>{console.log(e)},getNumberOfProposals:()=>s.items.length,result:s,proposed:S};this.customTags&&this.customTags.length>0&&this.getCustomTagValueCompletions(x),p.endsWith("\n")&&(p=p.substr(0,p.length-1));try{let r=await this.schemaService.getSchemaForResource(e.uri,u);if((!r||r.errors.length)&&0===t.line&&0===t.character&&!eY(p)){let e={kind:d.Io.Text,label:"Inline schema",insertText:"# yaml-language-server: $schema=",insertTextFormat:d.q8.PlainText};s.items.push(e)}if(eY(p)||function(e,t){let r=!1;for(let n of e){if("document"===n.type)!function e(t,r,n){let i=n(r,t);if("symbol"==typeof i)return i;for(let s of["key","value"]){let o=r[s];if(o&&"items"in o){for(let r=0;r<o.items.length;++r){let i=e(Object.freeze(t.concat([[s,r]])),o.items[r],n);if("number"==typeof i)r=i-1;else{if(i===g.YR.BREAK)return g.YR.BREAK;i===g.YR.REMOVE&&(o.items.splice(r,1),r-=1)}}"function"==typeof i&&"key"===s&&(i=i(r,t))}}let s=r.sep;if(s)for(let r=0;r<s.length;++r){let i=e(Object.freeze(t),s[r],n);if("number"==typeof i)r=i-1;else{if(i===g.YR.BREAK)return g.YR.BREAK;i===g.YR.REMOVE&&(s.items.splice(r,1),r-=1)}}return"function"==typeof i?i(r,t):i}([],n,e=>{var i;if(eR(e)&&(null==(i=e.value)?void 0:i.type)==="comment"){if(n.offset<=t&&e.value.source.length+e.value.offset>=t)return r=!0,g.YR.BREAK}else if("comment"===e.type&&e.offset<=t&&e.offset+e.source.length>=t)return r=!0,g.YR.BREAK});else if("comment"===n.type&&n.offset<=t&&n.source.length+n.offset>=t)return!0;if(r)break}return r}(o.tokens,l)){let e=p.indexOf("$schema=");return -1!==e&&e+8<=t.character&&this.schemaService.getAllSchemas().forEach(e=>{var t;let r={kind:d.Io.Constant,label:null!=(t=e.name)?t:e.uri,detail:e.description,insertText:e.uri,insertTextFormat:d.q8.PlainText,insertTextMode:d.I5.asIs};s.items.push(r)}),s}if(!r||r.errors.length)return s;let i=null;if(!h)if(!u.internalDocument.contents||(0,g.jn)(u.internalDocument.contents)){let e=u.internalDocument.createNode({});e.range=[l,l+1,l+1],u.internalDocument.contents=e,u.updateFromInternalDocument(),h=e}else h=u.findClosestNode(l,a),m=!0;let y=h;if(h)if(0===p.length)h=u.internalDocument.contents;else{let r=u.getParent(h);if(r){if((0,g.jn)(h)){if(h.value){if((0,g.tO)(r)){if(r.value===h){if(p.trim().length>0&&0>p.indexOf(":")){let e=this.createTempObjNode(f,h,u),t=u.getParent(r);if((0,g.oP)(u.internalDocument.contents)){let t=function(e,t){for(let[r,n]of e.items.entries())if(t===n)return r}(u.internalDocument.contents,r);"number"==typeof t&&(u.internalDocument.set(t,e),u.updateFromInternalDocument())}else t&&((0,g.jh)(t)||(0,g.oP)(t))?t.set(r.key,e):u.internalDocument.set(r.key,e),u.updateFromInternalDocument();i=e.items[0],h=e}else if(0===p.trim().length){let e=u.getParent(r);e&&(h=e)}}else if(r.key===h){let e=u.getParent(r);i=r,e&&(h=e)}}else if((0,g.oP)(r))if(p.trim().length>0){let e=this.createTempObjNode(f,h,u);r.delete(h),r.add(e),u.updateFromInternalDocument(),h=e}else h=r}else if(null===h.value){if((0,g.tO)(r)){if(r.key===h)h=r;else if((0,g.Ll)(r.key)&&r.key.range){let n=u.getParent(r);if(m&&n&&(0,g.jh)(n)&&function(e){if(e.items.length>1)return!1;let t=e.items[0];return(0,g.jn)(t.key)&&(0,g.jn)(t.value)&&""===t.key.value&&!t.value.value}(n))h=n;else{let s=e.positionAt(r.key.range[0]);if(t.character>s.character&&t.line!==s.line){let e=this.createTempObjNode(f,h,u);n&&((0,g.jh)(n)||(0,g.oP)(n))?n.set(r.key,e):u.internalDocument.set(r.key,e),u.updateFromInternalDocument(),i=e.items[0],h=e}else s.character===t.character&&n&&(h=n)}}}else if((0,g.oP)(r))if("-"!==p.charAt(t.character-1)){let e=this.createTempObjNode(f,h,u);r.delete(h),r.add(e),u.updateFromInternalDocument(),h=e}else if("-"===p.charAt(t.character-1)){let e=this.createTempObjNode("",h,u);r.delete(h),r.add(e),u.updateFromInternalDocument(),h=e}else h=r}}else if((0,g.jh)(h)&&!m&&0===p.trim().length&&(0,g.oP)(r)){let e=a.getLineContent(t.line+1);(a.getLineCount()===t.line+1||0===e.trim().length)&&(h=r)}}else if((0,g.jn)(h)){let e=this.createTempObjNode(f,h,u);u.internalDocument.contents=e,u.updateFromInternalDocument(),i=e.items[0],h=e}else if((0,g.jh)(h))for(let e of h.items)(0,g.Ll)(e.value)&&e.value.range&&e.value.range[0]===l+1&&(h=e.value);else if((0,g.oP)(h)&&"-"!==p.charAt(t.character-1)){let e=this.createTempObjNode(f,h,u);for(let t of(e.items=[],u.updateFromInternalDocument(),h.items))(0,g.jh)(t)&&t.items.forEach(t=>{e.items.push(t)});h=e}}if(h&&(0,g.jh)(h)){for(let e of h.items)(!i||i!==e)&&(0,g.jn)(e.key)&&(S[e.key.value+""]=d.EB.create("__"));this.addPropertyCompletions(r,u,h,y,"",x,a,b,n),!r&&f.length>0&&'"'!==c.charAt(l-f.length-1)&&x.add({kind:d.Io.Property,label:f,insertText:this.getInsertTextForProperty(f,null,""),insertTextFormat:d.q8.Snippet})}this.getValueCompletions(r,u,h,l,e,x,{},n)}catch(e){null==(i=this.telemetry)||i.sendError("yaml.completion.error",e)}this.finalizeParentCompletion(s);let A=s.items.filter((e,t,r)=>t===r.findIndex(t=>t.label===e.label&&t.insertText===e.insertText&&t.kind===e.kind));return(null==A?void 0:A.length)>0&&(s.items=A),s}updateCompletionText(e,t){e.insertText=t,e.textEdit&&(e.textEdit.newText=t)}mergeSimpleInsertTexts(e,t,r,n){let i=e=>e.includes("\n"),s=e=>{let t=e.indexOf("\n");return t>0&&0===e.substring(t,e.length).trim().length};if(i(t)||i(r))return n&&s(t)&&!s(r)&&!r.startsWith("\n")?r:void 0;let o=this.getValuesFromInsertText(t),a=this.getValuesFromInsertText(r),l=Array.prototype.concat(o,a);return l.length?1===l.length?`${e}: \${1:${l[0]}}`:`${e}: \${1|${l.join(",")}|}`:void 0}getValuesFromInsertText(e){let t=e.substring(e.indexOf(":")+1).trim();if(!t)return[];let r=t.match(/^\${1[|:]([^|]*)+\|?}$/);return r?r[1].split(","):[t]}finalizeParentCompletion(e){e.items.forEach(e=>{if(this.isParentCompletionItem(e)){var t;let r,n=e.parent.indent||"",i=(t=e.parent.insertTexts,r=0,t.map(e=>{let t=e.match(/\$([0-9]+)|\${[0-9]+:/g);if(!t)return e;let n=t.map(e=>+e.replace(/\${([0-9]+)[:|]/g,"$1").replace("$","")).reduce((e,t)=>t>e?t:e,0),i=e.replace(/\$([0-9]+)/g,(e,t)=>"$"+(+t+r)).replace(/\${([0-9]+)[:|]/g,(e,t)=>"${"+(+t+r)+":");return r+=n,i})).join(`
${n}`);i.endsWith("$1")&&(i=i.substring(0,i.length-2)),e.insertText=this.arrayPrefixIndentation+i,e.textEdit&&(e.textEdit.newText=e.insertText);let s=i.replace(/\${[0-9]+[:|](.*)}/g,(e,t)=>t).replace(/\$([0-9]+)/g,""),o=e.documentation?[e.documentation,"","----",""]:[];e.documentation={kind:d.nw.Markdown,value:[...o,"```yaml",n+s,"```"].join("\n")},delete e.parent}})}createTempObjNode(e,t,r){let n={};n[e]=null;let i=r.internalDocument.createNode(n);return i.range=t.range,i.items[0].key.range=t.range,i.items[0].value.range=t.range,i}addPropertyCompletions(e,t,r,n,i,s,o,a,l){var c,u,h,m;let f=t.getMatchingSchemas(e.schema,-1,null,l),p=o.getText(a),y=o.getLineContent(a.start.line),v=0===y.trim().length,b=-1!==y.indexOf(":"),S=0===y.trimLeft().indexOf("-"),x=t.getParent(r),A=f.find(e=>e.node.internalNode===n&&e.schema.properties),M=f.filter(e=>e.schema.oneOf).map(e=>e.schema.oneOf)[0],w=!1;for(let e of((null==M?void 0:M.length)<f.length&&(null==M||M.forEach((e,t)=>{var r,n;(null==(r=f[t])?void 0:r.schema.oneOf)||(null==(n=f[t])?void 0:n.schema.properties)!==e.properties||(w=!0)})),f)){if((e.node.internalNode===r&&!A||e.node.internalNode===n&&!b||(null==(c=e.node.parent)?void 0:c.internalNode)===n&&!b)&&!e.inverted){this.collectDefaultSnippets(e.schema,i,s,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:S});let t=e.schema.properties;if(t){let l=e.schema.maxProperties;if(void 0===l||void 0===r.items||r.items.length<l||r.items.length===l&&!v){for(let l in t)if(Object.prototype.hasOwnProperty.call(t,l)){let c=t[l];if("object"==typeof c&&!c.deprecationMessage&&!c.doNotSuggest){let t,m="";if(x&&(0,g.oP)(x)&&r.items.length<=1&&!v){let e=o.getText(),t=e.lastIndexOf("-",r.range[0]-1);if(t>=0){let n=a.end.character-a.start.character;m=" "+e.slice(t+1,r.range[1]-n)}}m+=this.arrayPrefixIndentation,"array"===c.type&&(t=r.items.find(e=>(0,g.jn)(e.key)&&e.key.range&&e.key.value===l&&(0,g.jn)(e.value)&&!e.value.value&&o.getPosition(e.key.range[2]).line===a.end.line-1))&&t&&(Array.isArray(c.items)?this.addSchemaValueCompletions(c.items[0],i,s,{},"property"):"object"==typeof c.items&&"object"===c.items.type&&this.addArrayItemValueCompletion(c.items,i,s));let f=l;l.startsWith(p)&&b||(f=this.getInsertTextForProperty(l,c,i,m+this.indentation));let y=(0,g.jn)(n)&&null===n.value||(0,g.jh)(n)&&0===n.items.length,S=(null==(u=e.schema.required)?void 0:u.length)>0;this.parentSkeletonSelectedFirst&&y&&S||s.add({kind:d.Io.Property,label:l,insertText:f,insertTextFormat:d.q8.Snippet,documentation:this.fromMarkup(c.markdownDescription)||c.description||""},w),(null==(h=e.schema.required)?void 0:h.includes(l))&&s.add({label:l,insertText:this.getInsertTextForProperty(l,c,i,m+this.indentation),insertTextFormat:d.q8.Snippet,documentation:this.fromMarkup(c.markdownDescription)||c.description||"",parent:{schema:e.schema,indent:m}})}}}}if(x&&(0,g.oP)(x)&&"object"!==(m=e.schema).type&&!X(m)&&this.addSchemaValueCompletions(e.schema,i,s,{},"property",Array.isArray(x.items)),e.schema.propertyNames&&e.schema.additionalProperties&&"object"===e.schema.type){let t=eA(e.schema.propertyNames);if(!t.deprecationMessage&&!t.doNotSuggest){let e=t.title||"property";s.add({kind:d.Io.Property,label:e,insertText:`\${1:${e}}: `,insertTextFormat:d.q8.Snippet,documentation:this.fromMarkup(t.markdownDescription)||t.description||""})}}}x&&e.node.internalNode===x&&e.schema.defaultSnippets&&(1===r.items.length?this.collectDefaultSnippets(e.schema,i,s,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!0},1):this.collectDefaultSnippets(e.schema,i,s,{newLineFirst:!1,indentFirstObject:!0,shouldIndentWithTab:!1},1))}}getValueCompletions(e,t,r,n,i,s,o,a){let l=null;if(r&&(0,g.jn)(r)&&(r=t.getParent(r)),!r)return void this.addSchemaValueCompletions(e.schema,"",s,o,"value");if((0,g.tO)(r)){let e=r.value;if(e&&e.range&&n>e.range[0]+e.range[2])return;l=(0,g.jn)(r.key)?r.key.value+"":null,r=t.getParent(r)}if(r&&(null!==l||(0,g.oP)(r))){for(let c of t.getMatchingSchemas(e.schema,-1,null,a))if(c.node.internalNode===r&&!c.inverted&&c.schema){if(c.schema.items&&(this.collectDefaultSnippets(c.schema,"",s,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!1}),(0,g.oP)(r)&&r.items))if(Array.isArray(c.schema.items)){let e=this.findItemAtOffset(r,i,n);e<c.schema.items.length&&this.addSchemaValueCompletions(c.schema.items[e],"",s,o,"value")}else"object"==typeof c.schema.items&&("object"===c.schema.items.type||X(c.schema.items))?this.addSchemaValueCompletions(c.schema.items,"",s,o,"value",!0):this.addSchemaValueCompletions(c.schema.items,"",s,o,"value");if(c.schema.properties){let e=c.schema.properties[l];e&&this.addSchemaValueCompletions(e,"",s,o,"value")}c.schema.additionalProperties&&this.addSchemaValueCompletions(c.schema.additionalProperties,"",s,o,"value")}o.boolean&&(this.addBooleanValueCompletion(!0,"",s),this.addBooleanValueCompletion(!1,"",s)),o.null&&this.addNullValueCompletion("",s)}}addArrayItemValueCompletion(e,t,r,n){let i=J(e),s=`- ${this.getInsertTextForObject(e,t).insertText.trimLeft()}`,o=e.description?" ("+e.description+")":"",a=this.getDocumentationWithMarkdownText(`Create an item of an array${i?" type `"+i+"`":""}${o}`,s);r.add({kind:this.getSuggestionKind(e.type),label:"- (array item) "+(i||n),documentation:a,insertText:s,insertTextFormat:d.q8.Snippet})}getInsertTextForProperty(e,t,r,n=this.indentation){let i,s=this.getInsertTextForValue(e,"","string"),o=s+":",a=0;if(t){let e=Array.isArray(t.type)?t.type[0]:t.type;if(!e&&(t.properties?e="object":t.items?e="array":t.anyOf&&(e="anyOf")),Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){let e=t.defaultSnippets[0].body;K(e)&&((i=this.getInsertTextForSnippetValue(e,"",{newLineFirst:!0,indentFirstObject:!1,shouldIndentWithTab:!1},[],1)).startsWith(" ")||i.startsWith("\n")||(i=" "+i))}a+=t.defaultSnippets.length}if(t.enum&&(i||1!==t.enum.length||(i=" "+this.getInsertTextForGuessedValue(t.enum[0],"",e)),a+=t.enum.length),t.const&&(i||(i=this.getInsertTextForGuessedValue(t.const,"",e),i=" "+(i=this.evaluateTab1Symbol(i))),a++),K(t.default)&&(i||(i=" "+this.getInsertTextForGuessedValue(t.default,"",e)),a++),Array.isArray(t.examples)&&t.examples.length&&(i||(i=" "+this.getInsertTextForGuessedValue(t.examples[0],"",e)),a+=t.examples.length),t.properties)return`${o}
${this.getInsertTextForObject(t,r,n).insertText}`;if(t.items)return`${o}
${n}- ${this.getInsertTextForArray(t.items,r,1,n).insertText}`;if(0===a)switch(e){case"boolean":case"string":case"anyOf":i=" $1";break;case"object":i=`
${n}`;break;case"array":i=`
${n}- `;break;case"number":case"integer":i=" ${1:0}";break;case"null":i=" ${1:null}";break;default:return s}}return(!i||a>1)&&(i=" $1"),o+i+r}getInsertTextForObject(e,t,r=this.indentation,n=1){let i="";return e.properties?(Object.keys(e.properties).forEach(s=>{let o=e.properties[s],a=Array.isArray(o.type)?o.type[0]:o.type;if(!a&&(o.anyOf&&(a="anyOf"),o.properties&&(a="object"),o.items&&(a="array")),e.required&&e.required.indexOf(s)>-1)switch(a){case"boolean":case"string":case"number":case"integer":case"anyOf":{let e=o.default||o.const;e?("string"===a&&(e=this.convertToStringValue(e)),i+=`${r}${s}: \${${n++}:${e}}
`):i+=`${r}${s}: $${n++}
`;break}case"array":{let e=this.getInsertTextForArray(o.items,t,n++,r),a=e.insertText.split("\n"),l=e.insertText;if(a.length>1){for(let e=1;e<a.length;e++){let t=a[e];a[e]=`  ${t}`}l=a.join("\n")}n=e.insertIndex,i+=`${r}${s}:
${r}${this.indentation}- ${l}
`}break;case"object":{let e=this.getInsertTextForObject(o,t,`${r}${this.indentation}`,n++);n=e.insertIndex,i+=`${r}${s}:
${e.insertText}
`}}else if(!this.disableDefaultProperties&&void 0!==o.default)switch(a){case"boolean":case"number":case"integer":i+=`${r}${"null"===s?this.getInsertTextForValue(s,"","string"):s}: \${${n++}:${o.default}}
`;break;case"string":i+=`${r}${s}: \${${n++}:${this.convertToStringValue(o.default)}}
`}}),0===i.trim().length&&(i=`${r}$${n++}
`),{insertText:i=i.trimRight()+t,insertIndex:n}):{insertText:i=`${r}$${n++}
`,insertIndex:n}}getInsertTextForArray(e,t,r=1,n=this.indentation){let i="";if(!e)return{insertText:i=`$${r++}`,insertIndex:r};let s=Array.isArray(e.type)?e.type[0]:e.type;switch(!s&&(e.properties&&(s="object"),e.items&&(s="array")),e.type){case"boolean":i=`\${${r++}:false}`;break;case"number":case"integer":i=`\${${r++}:0}`;break;case"string":i=`\${${r++}}`;break;case"object":{let s=this.getInsertTextForObject(e,t,`${n}  `,r++);i=s.insertText.trimLeft(),r=s.insertIndex}}return{insertText:i,insertIndex:r}}getInsertTextForGuessedValue(e,t,r){switch(typeof e){case"object":if(null===e)return"${1:null}"+t;break;case"string":{let n=JSON.stringify(e);return n=n.substr(1,n.length-2),n=this.getInsertTextForPlainText(n),"string"===r&&(n=this.convertToStringValue(n)),"${1:"+n+"}"+t}case"number":case"boolean":return"${1:"+e+"}"+t}return this.getInsertTextForValue(e,t,r)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,t,r){if(null===e)return"null";switch(typeof e){case"object":{let r=this.indentation;return this.getInsertTemplateForValue(e,r,{index:1},t)}case"number":case"boolean":return this.getInsertTextForPlainText(e+t)}return"string"===(r=Array.isArray(r)?r[0]:r)&&(e=this.convertToStringValue(e)),this.getInsertTextForPlainText(e+t)}getInsertTemplateForValue(e,t,r,n){if(Array.isArray(e)){let n="\n";for(let i of e)n+=`${t}- \${${r.index++}:${i}}
`;return n}if("object"==typeof e){let i="\n";for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s)){let o,a=e[s];i+=`${t}\${${r.index++}:${s}}:`,o="object"==typeof a?`${this.getInsertTemplateForValue(a,t+this.indentation,r,n)}`:` \${${r.index++}:${this.getInsertTextForPlainText(a+n)}}
`,i+=`${o}`}return i}return this.getInsertTextForPlainText(e+n)}addSchemaValueCompletions(e,t,r,n,i,s){"object"==typeof e&&(this.addEnumValueCompletions(e,t,r,s),this.addDefaultValueCompletions(e,t,r),this.collectTypes(e,n),s&&"value"===i&&!X(e)&&this.addArrayItemValueCompletion(e,t,r),Array.isArray(e.allOf)&&e.allOf.forEach(e=>this.addSchemaValueCompletions(e,t,r,n,i,s)),Array.isArray(e.anyOf)&&e.anyOf.forEach(e=>this.addSchemaValueCompletions(e,t,r,n,i,s)),Array.isArray(e.oneOf)&&e.oneOf.forEach(e=>this.addSchemaValueCompletions(e,t,r,n,i,s)))}collectTypes(e,t){if(Array.isArray(e.enum)||K(e.const))return;let r=e.type;Array.isArray(r)?r.forEach(function(e){return t[e]=!0}):r&&(t[r]=!0)}addDefaultValueCompletions(e,t,r,n=0){let i=!1;if(K(e.default)){let s,o=e.type,a=e.default;for(let e=n;e>0;e--)a=[a],o="array";s="object"==typeof a?"Default value":a.toString().replace(tf,'"'),r.add({kind:this.getSuggestionKind(o),label:s,insertText:this.getInsertTextForValue(a,t,o),insertTextFormat:d.q8.Snippet,detail:k("json.suggest.default","Default value")}),i=!0}Array.isArray(e.examples)&&e.examples.forEach(s=>{let o=e.type,a=s;for(let e=n;e>0;e--)a=[a],o="array";r.add({kind:this.getSuggestionKind(o),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,t,o),insertTextFormat:d.q8.Snippet}),i=!0}),this.collectDefaultSnippets(e,t,r,{newLineFirst:!0,indentFirstObject:!0,shouldIndentWithTab:!0}),i||"object"!=typeof e.items||Array.isArray(e.items)||this.addDefaultValueCompletions(e.items,t,r,n+1)}addEnumValueCompletions(e,t,r,n){if(K(e.const)&&!n&&r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t,e.type),insertTextFormat:d.q8.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(let n=0,i=e.enum.length;n<i;n++){let i=e.enum[n],s=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&n<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?s=this.fromMarkup(e.markdownEnumDescriptions[n]):e.enumDescriptions&&n<e.enumDescriptions.length&&(s=e.enumDescriptions[n]),r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(i),insertText:this.getInsertTextForValue(i,t,e.type),insertTextFormat:d.q8.Snippet,documentation:s})}}getLabelForValue(e){return null===e?"null":Array.isArray(e)?JSON.stringify(e):""+e}collectDefaultSnippets(e,t,r,n,i=0){if(Array.isArray(e.defaultSnippets))for(let s of e.defaultSnippets){let o,a,l=e.type,c=s.body,u=s.label;if(K(c)){let a=s.type||e.type;if(0===i&&"array"===a){let e={};Object.keys(c).forEach((t,r)=>{0!==r||t.startsWith("-")?e[`  ${t}`]=c[t]:e[`- ${t}`]=c[t]}),c=e}let l=Object.keys(r.proposed).filter(e=>"__"===r.proposed[e].label);if(""===(o=this.getInsertTextForSnippetValue(c,t,n,l))&&c)continue;u=u||this.getLabelForSnippetValue(c)}else if("string"==typeof s.bodyText){let e="",r="",n="";for(let t=i;t>0;t--)e=e+n+"[\n",r=r+"\n"+n+"]",n+=this.indentation,l="array";o=e+n+s.bodyText.split("\n").join("\n"+n)+r+t,u=u||o,a=o.replace(/[\n]/g,"")}r.add({kind:s.suggestionKind||this.getSuggestionKind(l),label:u,sortText:s.sortText||s.label,documentation:this.fromMarkup(s.markdownDescription)||s.description,insertText:o,insertTextFormat:d.q8.Snippet,filterText:a})}}getInsertTextForSnippetValue(e,t,r,n,i){return function e(t,r,n,i,s=0,o=0){if(null!==t&&"object"==typeof t){let a=0===s&&i.shouldIndentWithTab||s>0?r+i.indentation:"";if(Array.isArray(t)){if(o+=1,0===t.length)return"";let l="";for(let c=0;c<t.length;c++){let u=t[c];if("object"!=typeof t[c]){l+="\n"+a+"- "+n(t[c]);continue}Array.isArray(t[c])||(u=function(e,t){let r={};for(let n=0;n<Object.keys(e).length;n++){let i=Object.keys(e)[n];0===n?r["- ".repeat(t)+i]=e[i]:r["  ".repeat(t)+i]=e[i]}return r}(t[c],o)),l+=e(u,r,n,i,s+=1,o)}return l}{let o=Object.keys(t);if(0===o.length)return"";let l=0===s&&i.newLineFirst||s>0?"\n":"",c=!0;for(let u=0;u<o.length;u++){let h=o[u];if(0===s&&i.existingProps.includes(h))continue;let m="object"==typeof t[h],f=m?":":": ",p=a+(m&&/^\s|-/.test(h)?i.indentation:""),d=c?"":"\n";if(0===s&&c&&!i.indentFirstObject){let o=e(t[h],p,n,i,s+1,0);l+=d+r+h+f+o}else{let r=e(t[h],p,n,i,s+1,0);l+=d+a+h+f+r}c=!1}return l}}return n(t)}(e,"",e=>{if("string"==typeof e){if("^"===e[0])return e.substr(1);if("true"===e||"false"===e)return`"${e}"`}return e},{...r,indentation:this.indentation,existingProps:n},i)+t}addBooleanValueCompletion(e,t,r){r.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t,"boolean"),insertTextFormat:d.q8.Snippet,documentation:""})}addNullValueCompletion(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:d.q8.Snippet,documentation:""})}getLabelForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getCustomTagValueCompletions(e){ea(this.customTags).forEach(t=>{let r=t.split(" ")[0];this.addCustomTagValueCompletion(e," ",r)})}addCustomTagValueCompletion(e,t,r){e.add({kind:this.getSuggestionKind("string"),label:r,insertText:r+t,insertTextFormat:d.q8.Snippet,documentation:""})}getDocumentationWithMarkdownText(e,t){let r=e;return this.doesSupportMarkdown()&&(t=t.replace(/\${[0-9]+[:|](.*)}/g,(e,t)=>t).replace(/\$([0-9]+)/g,""),r=this.fromMarkup(`${e}
 \`\`\`
${t}
\`\`\``)),r}getSuggestionKind(e){if(Array.isArray(e)){let t=e;e=t.length>0?t[0]:null}if(!e)return d.Io.Value;switch(e){case"string":default:return d.Io.Value;case"object":return d.Io.Module;case"property":return d.Io.Property}}getCurrentWord(e,t){let r=t-1,n=e.getText();for(;r>=0&&-1===' 	\n\r\v":{[,]}'.indexOf(n.charAt(r));)r--;return n.substring(r+1,t)}fromMarkup(e){if(e&&this.doesSupportMarkdown())return{kind:d.nw.Markdown,value:e}}doesSupportMarkdown(){if(void 0===this.supportsMarkdown){let e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(d.nw.Markdown)}return this.supportsMarkdown}findItemAtOffset(e,t,r){for(let t=e.items.length-1;t>=0;t--){let n=e.items[t];if((0,g.Ll)(n)&&n.range){if(r>n.range[1])return t;else if(r>=n.range[0])return t}}return 0}convertToStringValue(e){let t;if(0===(t="string"==typeof e?["on","off","true","false","yes","no"].includes(e.toLowerCase())?`${this.getQuote()}${e}${this.getQuote()}`:e:""+e).length)return t;if("true"===t||"false"===t||"null"===t||this.isNumberExp.test(t))return`"${t}"`;-1!==t.indexOf('"')&&(t=t.replace(tf,'"'));let r=!isNaN(parseInt(t))||"@"===t.charAt(0);if(!r){let e=t.indexOf(":",0);for(;e>0&&e<t.length;e=t.indexOf(":",e+1)){if(e===t.length-1){r=!0;break}let n=t.charAt(e+1);if("	"===n||" "===n){r=!0;break}}}return r&&(t=`"${t}"`),t}getQuote(){return this.isSingleQuote?"'":'"'}evaluateTab1Symbol(e){return e.replace(/\$\{1:(.*)\}/,"$1")}isParentCompletionItem(e){return"parent"in e}};function tg(){}var ty=class{constructor(e){this.telemetry=e}getDefinition(e,t){var r;try{let r=e_.getYamlDocument(e),n=e.offsetAt(t.position),i=eo(n,r);if(i){let[t]=i.getNodeFromPosition(n,new eQ(e));if(t&&(0,g.Vj)(t)){let r=t.resolve(i.internalDocument);if(r&&r.range){let t=d.Q6.create(e.positionAt(r.range[0]),e.positionAt(r.range[2])),n=d.Q6.create(e.positionAt(r.range[0]),e.positionAt(r.range[1]));return[d.Im.create(e.uri,t,n)]}}}}catch(e){null==(r=this.telemetry)||r.sendError("yaml.definition.error",e)}}};function tv(e,t){let r=e_.getYamlDocument(e);return t.map(t=>{let i;for(let s of function(t){let i=e.offsetAt(t),s=[];for(let a of r.documents){let r,l;for(a.visit(s=>{let o=s.offset+s.length;if(o<i||"\n"===n(o-1,o)&&o-1<i)return!0;let a=s.offset;if(a>i){let r=function(t,r){var i;let s=e.positionAt(t.offset);if(s.line===r.line){if((null==(i=t.parent)?void 0:i.type)==="array"&&"- "===n(t.offset-2,t.offset))return t.offset-2;if("array"===t.type||"object"===t.type){let t={line:s.line,character:0};if(0===e.getText({start:t,end:s}).trim().length)return e.offsetAt(t)}}}(s,t);if(!r||r>i)return!0;a=r}return(!r||a>=r.offset)&&(r=s,l=a),!0});r;){var o;let t=null!=l?l:r.offset,n=r.offset+r.length,a={start:e.positionAt(t),end:e.positionAt(n)},c=(o=e.getText(a)).endsWith("\r\n")?o.substring(0,o.length-2):o.endsWith("\n")?o.substring(0,o.length-1):o,u=t+c.length;u>=i&&(a.end=e.positionAt(u));let h=(e,t)=>c.startsWith(e)&&c.endsWith(t||e);("string"===r.type&&(h("'")||h('"'))||"object"===r.type&&h("{","}")||"array"===r.type&&h("[","]"))&&s.push({start:e.positionAt(t+1),end:e.positionAt(n-1)}),s.push(a),r=r.parent,l=void 0}if(s.length>0)break}return s.reverse()}(t))i=d.yn.create(s,i);return null!=i?i:d.yn.create({start:t,end:t})});function n(t,r){return e.getText({start:e.positionAt(t),end:e.positionAt(r)})}}async function tb(e){let t=await fetch(e);if(t.ok)return t.text();throw Error(`Schema request failed for ${e}`)}!function(e){e[e.SchemaStore=1]="SchemaStore",e[e.SchemaAssociation=2]="SchemaAssociation",e[e.Settings=3]="Settings"}(u||(u={}));var tS={send(){},sendError(e,t){console.error("monaco-yaml",e,t)},sendTrack(){}},tx={resolveRelativePath:(e,t)=>String(new URL(e,t))};(0,h.n)((e,{enableSchemaRequest:t,...r})=>{let n=function(e){let t=new eG(e.schemaRequestService,e.workspaceContext),r=new td(t,e.clientCapabilities,e_,e.telemetry),n=new e0(t,e.telemetry),i=new eX(t,e.telemetry),s=new e8(t,e.telemetry),o=new e7,a=new ts(e.clientCapabilities),l=new th(t,e.telemetry),c=new te(e.telemetry),u=new ty(e.telemetry);return new tg(t,e.yamlSettings,e.connection),{configure:i=>{t.clearExternalSchemas(),i.schemas&&(t.schemaPriorityMapping=new Map,i.schemas.forEach(e=>{let r=e.priority?e.priority:0;t.addSchemaPriority(e.uri,r),t.registerExternalSchema(e.uri,e.fileMatch,e.schema,e.name,e.description,e.versions)})),s.configure(i),n.configure(i),r.configure(i,e.yamlSettings),o.configure(i),a.configure(i)},registerCustomSchemaProvider:e=>{t.registerCustomSchemaProvider(e)},findLinks:c.findLinks.bind(c),doComplete:r.doComplete.bind(r),doValidation:s.doValidation.bind(s),doHover:n.doHover.bind(n),findDocumentSymbols:i.findDocumentSymbols.bind(i),findDocumentSymbols2:i.findHierarchicalDocumentSymbols.bind(i),doDefinition:u.getDefinition.bind(u),resetSchema:e=>t.onResourceChange(e),doFormat:o.format.bind(o),doDocumentOnTypeFormatting:tl,addSchema:(e,r)=>t.saveSchema(e,r),deleteSchema:e=>t.deleteSchema(e),modifySchemaContent:e=>t.addContent(e),deleteSchemaContent:e=>t.deleteContent(e),deleteSchemasWhole:e=>t.deleteSchemas(e),getFoldingRanges:tt,getSelectionRanges:tv,getCodeAction:(e,t)=>a.getCodeAction(e,t),getCodeLens:e=>l.getCodeLens(e),resolveCodeLens:e=>l.resolveCodeLens(e)}}({schemaRequestService:t?tb:null,telemetry:tS,workspaceContext:tx,clientCapabilities:{textDocument:{completion:{completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"]}},moniker:{}}}}),i=t=>(r,...n)=>{for(let i of e.getMirrorModels())if(String(i.uri)===r)return t(m.V.create(r,"yaml",i.version,i.getValue()),...n)};return n.configure(r),{doValidation:i(e=>n.doValidation(e,!!r.isKubernetes)),doComplete:i((e,t)=>n.doComplete(e,t,!!r.isKubernetes)),doDefinition:i((e,t)=>n.doDefinition(e,{position:t,textDocument:e})),doDocumentOnTypeFormatting:i((e,t,r,i)=>n.doDocumentOnTypeFormatting(e,{ch:r,options:i,position:t,textDocument:e})),doHover:i(n.doHover),format:i(n.doFormat),resetSchema:n.resetSchema,findDocumentSymbols:i(n.findDocumentSymbols2),findLinks:i(n.findLinks),getCodeAction:i((e,t,r)=>n.getCodeAction(e,{range:t,textDocument:e,context:r})),getFoldingRanges:i(e=>n.getFoldingRanges(e,{lineFoldingOnly:!0})),getSelectionRanges:i(n.getSelectionRanges)}})}}]);